!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CoveoHeadlessRecommendation={})}(this,(function(e){"use strict";function t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(e){return!!e&&!!e[z]}function n(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[U]||!!e.constructor[U]||c(e)||l(e))}function i(e,t,r){void 0===r&&(r=!1),0===o(e)?(r?Object.keys:N)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function o(e){var t=e[z];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:c(e)?2:l(e)?3:0}function a(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function s(e,t,r){var n=o(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function c(e){return V&&e instanceof Map}function l(e){return $&&e instanceof Set}function d(e){return e.o||e.t}function f(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H(e);delete t[z];for(var r=N(t),n=0;n<r.length;n++){var i=r[n],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function p(e,t){return void 0===t&&(t=!1),g(e)||r(e)||!n(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),t&&i(e,(function(e,t){return p(t,!0)}),!0)),e}function h(){t(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var r=Q[e];return r||t(18,e),r}function v(){return M}function m(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function b(e){w(e),e.p.forEach(O),e.p=null}function w(e){e===M&&(M=e.l)}function S(e){return M={p:[],l:M,h:e,m:!0,_:0}}function O(e){var t=e[z];0===t.i||1===t.i?t.j():t.g=!0}function C(e,r){r._=r.p.length;var i=r.p[0],o=void 0!==e&&e!==i;return r.h.O||y("ES5").S(r,e,o),o?(i[z].P&&(b(r),t(4)),n(e)&&(e=q(r,e),r.l||I(r,e)),r.u&&y("Patches").M(i[z],e,r.u,r.s)):e=q(r,i,[]),b(r),r.u&&r.v(r.u,r.s),e!==L?e:void 0}function q(e,t,r){if(g(t))return t;var n=t[z];if(!n)return i(t,(function(i,o){return E(e,n,t,i,o,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return I(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=f(n.k):n.o;i(3===n.i?new Set(o):o,(function(t,i){return E(e,n,o,t,i,r)})),I(e,o,!1),r&&e.u&&y("Patches").R(n,r,e.u,e.s)}return n.o}function E(e,t,i,o,u,c){if(r(u)){var l=q(e,u,c&&t&&3!==t.i&&!a(t.D,o)?c.concat(o):void 0);if(s(i,o,l),!r(l))return;e.m=!1}if(n(u)&&!g(u)){if(!e.h.N&&e._<1)return;q(e,u),t&&t.A.l||I(e,u)}}function I(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&p(t,r)}function x(e,t){var r=e[z];return(r?d(r):e)[t]}function A(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function j(e){e.P||(e.P=!0,e.l&&j(e.l))}function R(e){e.o||(e.o=f(e.t))}function k(e,t,r){var n=c(t)?y("MapSet").T(t,r):l(t)?y("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:v(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=n,o=Y;r&&(i=[n],o=B);var a=Proxy.revocable(i,o),s=a.revoke,u=a.proxy;return n.k=u,n.j=s,u}(t,r):y("ES5").J(t,r);return(r?r.A:v()).p.push(n),n}function P(e){return r(e)||t(22,e),function e(t){if(!n(t))return t;var r,a=t[z],u=o(t);if(a){if(!a.P&&(a.i<4||!y("ES5").K(a)))return a.t;a.I=!0,r=T(t,u),a.I=!1}else r=T(t,u);return i(r,(function(t,n){a&&function(e,t){return 2===o(e)?e.get(t):e[t]}(a.t,t)===n||s(r,t,e(n))})),3===u?new Set(r):r}(e)}function T(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return f(e)}var _,M,F="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),V="undefined"!=typeof Map,$="undefined"!=typeof Set,D="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,L=F?Symbol.for("immer-nothing"):((_={})["immer-nothing"]=!0,_),U=F?Symbol.for("immer-draftable"):"__$immer_draftable",z=F?Symbol.for("immer-state"):"__$immer_state",N="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(e){var t={};return N(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Q={},Y={get:function(e,t){if(t===z)return e;var r=d(e);if(!a(r,t))return function(e,t,r){var n,i=A(t,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var i=r[t];return e.I||!n(i)?i:i===x(e.t,t)?(R(e),e.o[t]=k(e.A.h,i,e)):i},has:function(e,t){return t in d(e)},ownKeys:function(e){return Reflect.ownKeys(d(e))},set:function(e,t,r){var n=A(d(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=x(d(e),t),o=null==i?void 0:i[z];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(u(r,i)&&(void 0!==r||a(e.t,t)))return!0;R(e),j(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==x(e.t,t)||t in e.t?(e.D[t]=!1,R(e),j(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=d(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){t(12)}},B={};i(Y,(function(e,t){B[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),B.deleteProperty=function(e,t){return Y.deleteProperty.call(this,e[0],t)},B.set=function(e,t,r){return Y.set.call(this,e[0],t,r,e[0])};var W=new(function(){function e(e){this.O=D,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(e,r,i){if("function"==typeof e&&"function"!=typeof r){var o=r;r=e;var a=this;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(i))}))}}var s;if("function"!=typeof r&&t(6),void 0!==i&&"function"!=typeof i&&t(7),n(e)){var u=S(this),c=k(this,e,void 0),l=!0;try{s=r(c),l=!1}finally{l?b(u):w(u)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return m(u,i),C(e,u)}),(function(e){throw b(u),e})):(m(u,i),C(s,u))}if(!e||"object"!=typeof e){if((s=r(e))===L)return;return void 0===s&&(s=e),this.N&&p(s,!0),s}t(21,e)},i.produceWithPatches=function(e,t){var r,n,i=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},i.createDraft=function(e){n(e)||t(8),r(e)&&(e=P(e));var i=S(this),o=k(this,e,void 0);return o[z].C=!0,w(i),o},i.finishDraft=function(e,t){var r=(e&&e[z]).A;return m(r,t),C(void 0,r)},i.setAutoFreeze=function(e){this.N=e},i.setUseProxies=function(e){e&&!D&&t(20),this.O=e},i.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var o=y("Patches").$;return r(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(n+1))}))},e}()),J=W.produce;W.produceWithPatches.bind(W),W.setAutoFreeze.bind(W),W.setUseProxies.bind(W),W.applyPatches.bind(W),W.createDraft.bind(W),W.finishDraft.bind(W);var K=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),Z=function(){return Math.random().toString(36).substring(7).split("").join(".")},X={INIT:"@@redux/INIT"+Z(),REPLACE:"@@redux/REPLACE"+Z(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Z()}};function G(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ee(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(ee)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,c();var r=s.indexOf(e);s.splice(r,1),a=null}}}function f(e){if(!G(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,r=0;r<t.length;r++){(0,t[r])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:X.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[K]=function(){return this},e}return f({type:X.INIT}),(n={dispatch:f,subscribe:d,getState:l,replaceReducer:p})[K]=h,n}function te(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function re(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];"function"==typeof e[i]&&(r[i]=e[i])}var o,a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:X.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:X.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+X.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var n=!1,i={},s=0;s<a.length;s++){var u=a[s],c=r[u],l=e[u],d=c(l,t);if(void 0===d){var f=te(u,t);throw new Error(f)}i[u]=d,n=n||d!==l}return(n=n||a.length!==Object.keys(e).length)?i:e}}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function se(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return oe({},r,{dispatch:n=ae.apply(void 0,o)(r.dispatch)})}}}function ue(e,t){return e===t}function ce(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,i=0;i<n;i++)if(!e(t[i],r[i]))return!1;return!0}function le(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,r=null,n=null;return function(){return ce(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));var de=le();function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ye(e,t,r){return(ye=ge()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&he(i,r.prototype),i}).apply(null,arguments)}function ve(e){var t="function"==typeof Map?new Map:void 0;return(ve=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ye(e,arguments,pe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),he(n,e)})(e)}de.withExtraArgument=le;var me="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?ae:ae.apply(null,arguments)};var be=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.concat=function(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return ye(n,(t=e.prototype.concat).call.apply(t,[this].concat(i)))},i.prepend=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])?ye(n,t[0].concat(this)):ye(n,t.concat(this))},n}(ve(Array));function we(){return function(e){return function(e){void 0===e&&(e={});var t=e,r=t.thunk,n=void 0===r||r;t.immutableCheck,t.serializableCheck;var i=new be;n&&(!function(e){return"boolean"==typeof e}(n)?i.push(de.withExtraArgument(n.extraArgument)):i.push(de));return i}(e)}}function Se(e){var t,r=we(),n=e||{},i=n.reducer,o=void 0===i?void 0:i,a=n.middleware,s=void 0===a?r():a,u=n.devTools,c=void 0===u||u,l=n.preloadedState,d=void 0===l?void 0:l,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=re(o)}var h=se.apply(void 0,"function"==typeof s?s(r):s),g=ae;c&&(g=me(fe({trace:!1},"object"==typeof c&&c)));var y=[h];return Array.isArray(p)?y=[h].concat(p):"function"==typeof p&&(y=p(y)),ee(t,d,g.apply(void 0,y))}function Oe(e,t){function r(){if(t){var r=t.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return fe({type:e,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function Ce(e,t,i,o){void 0===i&&(i=[]);var a="function"==typeof t?function(e){var t,r={},n=[],i={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,i},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[r,n,t]}(t):[t,i,o],s=a[0],u=a[1],c=a[2];return function(t,i){void 0===t&&(t=e);var o=[s[i.type]].concat(u.filter((function(e){return(0,e.matcher)(i)})).map((function(e){return e.reducer})));return 0===o.filter((function(e){return!!e})).length&&(o=[c]),o.reduce((function(e,t){if(t){if(r(e)){var o=t(e,i);return void 0===o?e:o}if(n(e))return J(e,(function(e){return t(e,i)}));var a=t(e,i);if(void 0===a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),t)}}"undefined"==typeof Symbol||(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"==typeof Symbol||(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var qe=["name","message","stack","code"],Ee=function(e){this.payload=e,this.name="RejectWithValue",this.message="Rejected"},Ie=function(e){if("object"==typeof e&&null!==e){var t={},r=qe,n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}var a=o;"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}};function xe(e,t,r){var n=Oe(e+"/fulfilled",(function(e,t,r){return{payload:e,meta:{arg:r,requestId:t,requestStatus:"fulfilled"}}})),i=Oe(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e,requestStatus:"pending"}}})),o=Oe(e+"/rejected",(function(e,t,n){var i=e instanceof Ee,o=!!e&&"AbortError"===e.name,a=!!e&&"ConditionError"===e.name;return{payload:e instanceof Ee?e.payload:void 0,error:(r&&r.serializeError||Ie)(e||"Rejected"),meta:{arg:n,requestId:t,rejectedWithValue:i,requestStatus:"rejected",aborted:o,condition:a}}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,u,c){var l,d=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new a,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),h=!1;var g=function(){try{var a,l=function(e){return g?e:(r&&!r.dispatchConditionRejection&&o.match(a)&&a.meta.condition||s(a),a)},g=!1,y=function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){if(r&&r.condition&&!1===r.condition(e,{getState:u,extra:c}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return h=!0,s(i(d,e)),Promise.resolve(Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:u,extra:c,requestId:d,signal:f.signal,rejectWithValue:function(e){return new Ee(e)}})).then((function(t){return t instanceof Ee?o(t,d,e):n(t,d,e)}))])).then((function(e){a=e}))}),(function(t){a=o(t,d,e)}));return Promise.resolve(y&&y.then?y.then(l):l(y))}catch(e){return Promise.reject(e)}}();return Object.assign(g,{abort:function(e){h&&(l=e,f.abort())},requestId:d,arg:e})}}),{pending:i,rejected:o,fulfilled:n,typePrefix:e})}!function(){function e(e,t){var r=s[e];return r?r.enumerable=t:s[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[z];return Y.get(t,e)},set:function(t){var r=this[z];Y.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][z];if(!r.P)switch(r.i){case 5:o(r)&&j(r);break;case 4:n(r)&&j(r)}}}function n(e){for(var t=e.t,r=e.k,n=N(r),i=n.length-1;i>=0;i--){var o=n[i];if(o!==z){var s=t[o];if(void 0===s&&!a(t,o))return!0;var c=r[o],l=c&&c[z];if(l?l.t!==s:!u(c,s))return!0}}var d=!!t[z];return n.length!==N(t).length+(d?0:1)}function o(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var s={};!function(e,t){Q[e]||(Q[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var o=H(r);delete o[z];for(var a=N(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(n,t),o={i:n?5:4,A:r?r.A:v(),P:!1,I:!1,D:{},l:r,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,z,{value:o,writable:!0}),i},S:function(e,n,s){s?r(n)&&n[z].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[z];if(r){var n=r.t,s=r.k,u=r.D,c=r.i;if(4===c)i(s,(function(t){t!==z&&(void 0!==n[t]||a(n,t)?u[t]||e(s[t]):(u[t]=!0,j(r)))})),i(n,(function(e){void 0!==s[e]||a(s,e)||(u[e]=!1,j(r))}));else if(5===c){if(o(r)&&(j(r),u.length=!0),s.length<n.length)for(var l=s.length;l<n.length;l++)u[l]=!1;else for(var d=n.length;d<s.length;d++)u[d]=!0;for(var f=Math.min(s.length,n.length),p=0;p<f;p++)void 0===u[p]&&e(s[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):o(e)}})}();class Ae extends Error{constructor(e){super(e),this.name="SchemaValidationError"}}class je{constructor(e){this.definition=e}validate(e={},t=""){const r={...this.default,...e},n=[];for(const e in this.definition){const t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw function(e,t){const r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new Ae(r)}(n,t);return r}get default(){const e={};for(const t in this.definition){const r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}}class Re{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&Pe(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}}function ke(e){return void 0===e}function Pe(e){return ke(e)||function(e){return null===e}(e)}class Te{constructor(e={}){this.config=e,this.value=new Re(e)}validate(e){return this.value.validate(e)||(function(e){return ke(e)||_e(e)}(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}}function _e(e){return"number"==typeof e&&!isNaN(e)}class Me{constructor(e={}){this.value=new Re(e)}validate(e){return this.value.validate(e)||(function(e){return ke(e)||Fe(e)}(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}}function Fe(e){return"boolean"==typeof e}const Ve=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;class $e{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new Re(this.config)}validate(e){const{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,o=this.value.validate(e);return o||(ke(e)?null:De(e)?t||e.length?r&&!Ve.test(e)?"value is not a valid URL.":n&&!n.test(e)?"value did not match provided regex "+n:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}}function De(e){return"[object String]"===Object.prototype.toString.call(e)}class Le{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ke(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Ue(e))return"value is not an object";for(const[t,r]of Object.entries(this.config.values))if(r.required&&Pe(e[t]))return"value does not contain "+t;let t="";for(const[r,n]of Object.entries(this.config.values)){const i=e[r],o=n.validate(i);null!==o&&(t+=" "+o)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}}function Ue(e){return void 0!==e&&"object"==typeof e}class ze{constructor(e={}){this.config=e,this.value=new Re(this.config)}validate(e){if(!Pe(e)&&!Array.isArray(e))return"value is not an array";const t=this.value.validate(e);if(null!==t)return t;if(Pe(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return"value contains more than "+this.config.max;if(void 0!==this.config.min&&e.length<this.config.min)return"value contains less than "+this.config.min;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&Pe(r)&&(t="value is null or undefined: "+e.join(","));const n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return Fe(e)||De(e)||_e(e)||Ue(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}}function Ne(e){return Array.isArray(e)}const He=new $e({required:!0,emptyAllowed:!1}),Qe=new $e({required:!0,emptyAllowed:!0}),Ye=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Be=(e,t)=>"required"in t?{payload:new je({value:t}).validate({value:e}).value}:{payload:new je(t).validate(e)},We=(e,t)=>{try{return Be(e,t)}catch(t){return{payload:e,error:Ye(t)}}},Je=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}},Ke=new $e({emptyAllowed:!1,required:!1}),Ze=()=>new $e({emptyAllowed:!1,required:!1}),Xe=()=>new $e({emptyAllowed:!1,required:!0}),Ge=Oe("configuration/updateBasicConfiguration",(e=>We(e,{accessToken:new $e({emptyAllowed:!1}),organizationId:new $e({emptyAllowed:!1}),platformUrl:new $e({url:!0,emptyAllowed:!1})}))),et=Oe("configuration/updateSearchConfiguration",(e=>We(e,{apiBaseUrl:new $e({url:!0,emptyAllowed:!1}),pipeline:new $e({emptyAllowed:!1}),searchHub:new $e({emptyAllowed:!1}),locale:Ke}))),tt=Oe("configuration/updateAnalyticsConfiguration",(e=>We(e,{enabled:new Me({default:!0}),originLevel2:Ze(),originLevel3:Ze(),apiBaseUrl:new $e({url:!0,emptyAllowed:!1}),runtimeEnvironment:new Re}))),rt=Oe("configuration/analytics/disable"),nt=Oe("configuration/analytics/enable"),it=Oe("configuration/analytics/originlevel2",(e=>We(e,{originLevel2:Xe()}))),ot=Oe("configuration/analytics/originlevel3",(e=>We(e,{originLevel3:Xe()})));const at=e=>()=>t=>r=>{if(!r.error)return t(r);const n=r.error;return e.error(n.stack||n.message||n.name||"Error","Action dispatch error "+r.type,r),"SchemaValidationError"!==r.error.name?t(r):void 0};const st=Oe("history/undo"),ut=Oe("history/redo"),ct=Oe("history/snapshot");xe("history/back",(async(e,{dispatch:t})=>{t(st()),await t(lt())})),xe("history/forward",(async(e,{dispatch:t})=>{t(ut()),await t(lt())}));const lt=xe("history/change",(async(e,{getState:t})=>t().history.present)),dt=Oe("advancedSearchQueries/update",(e=>We(e,{aq:new $e({required:!1,emptyAllowed:!0}),cq:new $e({required:!1,emptyAllowed:!0})}))),ft=Oe("advancedSearchQueries/register",(e=>We(e,{aq:new $e({required:!1,emptyAllowed:!0}),cq:new $e({required:!1,emptyAllowed:!0})}))),pt={q:new $e,enableQuerySyntax:new Me,aq:new $e,cq:new $e,firstResult:new Te({min:0}),numberOfResults:new Te({min:0}),sortCriteria:new $e,f:new Le,cf:new Le,nf:new Le,df:new Le,debug:new Me},ht=Oe("searchParameters/restore",(e=>We(e,pt))),gt=Ce({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,defaultFilters:{cq:"",aq:""}},(e=>{e.addCase(dt,((e,t)=>{const{aq:r,cq:n}=t.payload;ke(r)||(e.aq=r,e.aqWasSet=!0),ke(n)||(e.cq=n,e.cqWasSet=!0)})).addCase(ft,((e,t)=>{const{aq:r,cq:n}=t.payload;ke(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),ke(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n))})).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.advancedSearchQueries)&&void 0!==n?n:e})).addCase(ht,((e,t)=>{const{aq:r,cq:n}=t.payload;ke(r)||(e.aq=r,e.aqWasSet=!0),ke(n)||(e.cq=n,e.cqWasSet=!0)}))}));var yt=fetch,vt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function mt(e){var t={exports:{}};return e(t,t.exports),t.exports}var bt=vt&&vt.__assign||function(){return(bt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},wt={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};var St=function(e){var t=bt(bt({},wt),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t},Ot=Object.defineProperty({getSanitizedOptions:St},"__esModule",{value:!0});var Ct=function(e){var t=Math.random()*e;return Math.round(t)},qt=Object.defineProperty({fullJitter:Ct},"__esModule",{value:!0});var Et=function(e){return e},It=Object.defineProperty({noJitter:Et},"__esModule",{value:!0});var xt,At=function(e){switch(e.jitter){case"full":return qt.fullJitter;case"none":default:return It.noJitter}},jt=Object.defineProperty({JitterFactory:At},"__esModule",{value:!0}),Rt=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return jt.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}(),kt=Object.defineProperty({Delay:Rt},"__esModule",{value:!0}),Pt=vt&&vt.__extends||(xt=function(e,t){return(xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}xt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Tt=vt&&vt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},_t=vt&&vt.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pt(t,e),t.prototype.apply=function(){return Tt(this,void 0,void 0,(function(){return _t(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(kt.Delay),Ft=Object.defineProperty({SkipFirstDelay:Mt},"__esModule",{value:!0}),Vt=vt&&vt.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vt(t,e),t}(kt.Delay),Dt=Object.defineProperty({AlwaysDelay:$t},"__esModule",{value:!0});var Lt=function(e,t){var r=function(e){if(!e.delayFirstAttempt)return new Ft.SkipFirstDelay(e);return new Dt.AlwaysDelay(e)}(e);return r.setAttemptNumber(t),r};var Ut=Object.defineProperty({DelayFactory:Lt},"__esModule",{value:!0}),zt=vt&&vt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Nt=vt&&vt.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var Ht=function(e,t){return void 0===t&&(t={}),zt(this,void 0,void 0,(function(){var r;return Nt(this,(function(n){switch(n.label){case 0:return r=Ot.getSanitizedOptions(t),[4,new Qt(e,r).execute()];case 1:return[2,n.sent()]}}))}))},Qt=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return zt(this,void 0,void 0,(function(){var e;return Nt(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return zt(this,void 0,void 0,(function(){return Nt(this,(function(e){switch(e.label){case 0:return[4,Ut.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}();class Yt extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}}class Bt extends Error{constructor(){super(),this.name="Disconnected",this.message="Client is not connected to the internet."}}function Wt(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function Jt(e){return 429===e}class Kt{static async call(e){const t=function(e){const{url:t,method:r,requestParams:n,contentType:i,accessToken:o,signal:a}=e,s=function(e,t){if("application/x-www-form-urlencoded"===t)return"object"==typeof(r=e)&&r&&Object.values(r).every(Wt)?function(e){const t=[];for(const r in e){const n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}(e):"";var r;return JSON.stringify(e)}(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:"Bearer "+o,...e.headers},body:s,signal:a}}(e),{preprocessRequest:r,logger:n}=e,i={...t,...r?await r(t,"searchApiFetch"):{}};n.info(i,"Platform request");const{url:o,...a}=i,s=async()=>{const e=await yt(o,a);if(Jt(e.status))throw e;return e};try{const e=await Ht(s,{retry:e=>{const t=e&&Jt(e.status);return t&&n.info("Platform retrying request"),t}});if(419===e.status)throw n.info("Platform renewing token"),new Yt;return n.info({response:e,requestInfo:i},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new Bt:e}}}function Zt(e){return`https://platform${e&&e.environment&&"prod"!==e.environment?e.environment:""}${e&&e.region&&"us-east-1"!==e.region?"-"+e.region:""}.cloud.coveo.com`}const Xt=Ce({organizationId:"",accessToken:"",platformUrl:Zt(),search:{apiBaseUrl:Zt()+"/rest/search/v2",locale:"en-US"},analytics:{enabled:!0,apiBaseUrl:Zt()+"/rest/ua",originLevel2:"default",originLevel3:"default"}},(e=>e.addCase(Ge,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=t.payload.platformUrl+"/rest/search/v2",e.analytics.apiBaseUrl=t.payload.platformUrl+"/rest/ua")})).addCase(et,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale)})).addCase(tt,((e,t)=>{void 0!==t.payload.enabled&&(e.analytics.enabled=t.payload.enabled),void 0!==t.payload.originLevel2&&(e.analytics.originLevel2=t.payload.originLevel2),void 0!==t.payload.originLevel3&&(e.analytics.originLevel3=t.payload.originLevel3),void 0!==t.payload.apiBaseUrl&&(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),void 0!==t.payload.runtimeEnvironment&&(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment)})).addCase(rt,(e=>{e.analytics.enabled=!1})).addCase(nt,(e=>{e.analytics.enabled=!0})).addCase(it,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(ot,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})))),Gt=new ze({each:He,required:!0}),er=(e,t)=>(We(e,He),De(t)?We(t,He):We(t,Gt),{payload:{contextKey:e,contextValue:t}}),tr=Oe("context/set",(e=>{for(const[t,r]of Object.entries(e))er(t,r);return{payload:e}})),rr=Oe("context/add",(e=>er(e.contextKey,e.contextValue))),nr=Oe("context/remove",(e=>We(e,He)));const ir=Ce({contextValues:{}},(e=>{e.addCase(tr,((e,t)=>{e.contextValues=t.payload})).addCase(rr,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(nr,((e,t)=>{delete e.contextValues[t.payload]})).addCase(lt.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)}))})),or=Oe("debug/enable"),ar=Oe("debug/disable"),sr=Ce(!1,(e=>{e.addCase(or,(()=>!0)).addCase(ar,(()=>!1)).addCase(ht,((e,t)=>{var r;return null!==(r=t.payload.debug)&&void 0!==r?r:e}))})),ur=Ce("1.7.0",(e=>e)),cr=Oe("didYouMean/enable"),lr=Oe("didYouMean/disable"),dr=Oe("didYouMean/correction",(e=>We(e,He)));function fr(e){if(e instanceof Bt)return{error:{statusCode:0,type:"Disconnected",message:"Could not connect"}};throw e}const pr=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${hr(e)}`}),hr=e=>"organizationId="+e.organizationId;const gr=TextDecoder;class yr{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){const t=await Kt.call({...pr(e,"POST","application/json","/plan"),requestParams:Cr(e),...this.options});if(t instanceof Error)return fr(t);const r=await t.json();return function(e){return void 0!==e.preprocessingOutput}(r)?{success:r}:{error:vr({response:t,body:r})}}async querySuggest(e){const t=await Kt.call({...pr(e,"POST","application/json","/querySuggest"),requestParams:Cr(e),...this.options});if(t instanceof Error)return fr(t);const r=await t.json(),n={response:t,body:r};if(function(e){return void 0!==e.completions}(r)){return{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}}return{error:vr(n)}}async search(e){var t;this.searchAbortController&&(this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();const r=await Kt.call({...pr(e,"POST","application/json",""),requestParams:Cr(e),...this.options,signal:null===(t=this.searchAbortController)||void 0===t?void 0:t.signal});if(r instanceof Error)return fr(r);this.searchAbortController=null;const n=await r.json(),i={response:r,body:n};if(Or(n)){i.body=function(e){const t={answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0};if(Pe(e.questionAnswer))return e.questionAnswer=t,e;return e.questionAnswer={...t,...e.questionAnswer},e}(n);return{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}}return{error:vr(i)}}async facetSearch(e){const t=await Kt.call({...pr(e,"POST","application/json","/facet"),requestParams:Cr(e),...this.options});if(t instanceof Error)throw t;const r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){const t=await Kt.call({...pr(e,"POST","application/json",""),requestParams:Cr(e),...this.options});if(t instanceof Error)throw t;const r=await t.json();return Or(r)?{success:r}:{error:vr({response:t,body:r})}}async html(e){const t=await Kt.call({...pr(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Cr(e),...this.options});if(t instanceof Error)throw t;const r=function(e){return((e.headers.get("content-type")||"").split(";").find((e=>-1!==e.indexOf("charset=")))||"").split("=")[1]||"UTF-8"}(t),n=await t.arrayBuffer(),i=new gr(r).decode(n);return function(e){return"string"==typeof e}(i)?{success:i}:{error:vr({response:t,body:i})}}async productRecommendations(e){const t=await Kt.call({...pr(e,"POST","application/json",""),requestParams:Cr(e),...this.options});if(t instanceof Error)throw t;const r=await t.json();return Or(r)?{success:r}:{error:vr({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){if("undefined"==typeof window){return new(require("node-abort-controller"))}return"undefined"==typeof AbortController?null:new AbortController}}const vr=e=>{const{response:t}=e;return t.body?mr(e):br(t)},mr=e=>function(e){return void 0!==e.body.exception}(e)?wr(e):function(e){return void 0!==e.body.statusCode}(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},br=e=>{const t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:"Client side error: "+(t.message||""),statusCode:400,type:"ClientError"}},wr=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Sr=e=>void 0!==e.error;function Or(e){return void 0!==e.results}function Cr(e){const{url:t,accessToken:r,organizationId:n,...i}=e;return i}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
function qr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function Er(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}var Ir;!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(Ir||(Ir={}));const xr=window.fetch;class Ar{constructor(e){this.opts=e}sendEvent(e,t){return Er(this,void 0,void 0,(function*(){const{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,o=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",a={url:`${r}/analytics/${e}${o}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},a),i?yield i(a,"analyticsFetch"):{}),{url:u}=s,c=qr(s,["url"]),l=yield xr(u,c);if(l.ok){const e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{l.json()}catch(e){}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}shouldAppendVisitorId(e){return-1!==[Ir.click,Ir.custom,Ir.search,Ir.view].indexOf(e)}getVisitorIdParam(){return Er(this,void 0,void 0,(function*(){const{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?"?visitor="+t:""}))}getHeaders(){const{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:"Bearer "+e}:{}),{"Content-Type":"application/json"})}}function jr(){return"undefined"!=typeof navigator}function Rr(){return"undefined"!=typeof document}function kr(){return"undefined"!=typeof localStorage}function Pr(){return jr()&&navigator.cookieEnabled}function Tr(){return"undefined"!=typeof crypto&&void 0!==crypto.getRandomValues}const _r=[Ir.click,Ir.custom,Ir.search,Ir.view],Mr=(e,t)=>-1!==_r.indexOf(e)?Object.assign({language:Rr()?document.documentElement.lang:"unknown",userAgent:jr()?navigator.userAgent:"unknown"},t):t;class Fr{static set(e,t,r){var n,i,o,a;r?((i=new Date).setTime(i.getTime()+r),o="; expires="+i.toGMTString()):o="",-1===(a=location.hostname).indexOf(".")?document.cookie=e+"="+t+o+"; path=/":((n=a.split(".")).shift(),Vr({name:e,value:t,expires:o,domain:"."+n.join(".")}),null!=Fr.get(e)&&Fr.get(e)==t||Vr({name:e,value:t,expires:o,domain:"."+a}))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(0==(i=i.replace(/^\s+/,"")).indexOf(t))return i.substring(t.length,i.length)}return null}static erase(e){Fr.set(e,"",-1)}}function Vr(e){const{name:t,value:r,expires:n,domain:i}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${i}; SameSite=Lax`}function $r(){return kr()?localStorage:Pr()?new Dr:"undefined"!=typeof sessionStorage?sessionStorage:new Ur}class Dr{getItem(e){return Fr.get(`${Dr.prefix}${e}`)}removeItem(e){Fr.erase(`${Dr.prefix}${e}`)}setItem(e,t){Fr.set(`${Dr.prefix}${e}`,t)}}Dr.prefix="coveo_";class Lr{constructor(){this.cookieStorage=new Dr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}}class Ur{getItem(e){return null}removeItem(e){}setItem(e,t){}}const zr="__coveo.analytics.history";class Nr{constructor(e){this.store=e||$r()}addElement(e){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Er(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){const e=this.getHistoryWithInternalTime();return this.stripInternalTime(e)}getHistoryAsync(){return Er(this,void 0,void 0,(function*(){const e=yield this.getHistoryWithInternalTimeAsync();return this.stripInternalTime(e)}))}getHistoryWithInternalTime(){try{const e=this.store.getItem(zr);return e&&"string"==typeof e?JSON.parse(e):[]}catch(e){return[]}}getHistoryWithInternalTimeAsync(){return Er(this,void 0,void 0,(function*(){try{const e=yield this.store.getItem(zr);return e?JSON.parse(e):[]}catch(e){return[]}}))}setHistory(e){try{this.store.setItem(zr,JSON.stringify(e.slice(0,20)))}catch(e){}}clear(){try{this.store.removeItem(zr)}catch(e){}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();if(null!=e){return e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]}return null}cropQueryElement(e){e.name&&"query"==e.name.toLowerCase()&&null!=e.value&&(e.value=e.value.slice(0,75))}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return e.map((e=>{const{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}}))}}var Hr=Object.freeze({__proto__:null,STORE_KEY:zr,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,MAX_VALUE_SIZE:75,HistoryStore:Nr,default:Nr});const Qr=(e,t)=>Er(void 0,void 0,void 0,(function*(){return e===Ir.view?(yield Yr(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),Yr=e=>Er(void 0,void 0,void 0,(function*(){const t=new Nr,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)})),Br=e=>e?(Number(e)^Wr(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,Br),Wr=e=>{if(Tr())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)0==(3&t)&&(r=4294967296*Math.random()),e[t]=r>>>((3&t)<<3)&255;return e},Jr=Object.keys,Kr={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Zr=[...Jr(Kr).map((e=>Kr[e]))].join("|"),Xr=new RegExp(`^(${Zr}$)`),Gr=[e=>Xr.test(e)],en={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},tn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr"},rn={action:"pa",list:"pal",listSource:"pls"},nn={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},on={id:"quoteId",affiliation:"quoteAffiliation"},an={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},sn={add:rn,bookmark_add:rn,bookmark_remove:rn,click:rn,checkout:rn,checkout_option:rn,detail:rn,impression:rn,remove:rn,refund:Object.assign(Object.assign({},rn),nn),purchase:Object.assign(Object.assign({},rn),nn),quickview:rn,quote:Object.assign(Object.assign({},rn),on),review:Object.assign(Object.assign({},rn),an)},un=Jr(en).map((e=>en[e])),cn=Jr(tn).map((e=>tn[e])),ln=Jr(rn).map((e=>rn[e])),dn=Jr(nn).map((e=>nn[e])),fn=Jr(an).map((e=>an[e])),pn=Jr(on).map((e=>on[e])),hn=[...un,"custom"].join("|"),gn=[...cn,"custom"].join("|"),yn=new RegExp(`^(pr[0-9]+)(${hn})$`),vn=new RegExp(`^((il[0-9]+pi[0-9]+)(${gn}))|(il[0-9]+nm)$`),mn=new RegExp(`^(${ln.join("|")})$`),bn=new RegExp(`^(${dn.join("|")})$`),wn=new RegExp("^(pr[0-9]+)custom$"),Sn=new RegExp("^(il[0-9]+pi[0-9]+)custom$"),On=new RegExp(`^(${["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...fn,...pn].join("|")})$`),Cn=[e=>vn.test(e),e=>yn.test(e),e=>mn.test(e),e=>bn.test(e),e=>On.test(e)],qn=[wn,Sn],En=Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),In=Object.assign(Object.assign({},En),{svcAction:"svc_action",svcActionData:"svc_action_data"}),xn=Jr(In).map((e=>In[e])),An=e=>-1!==xn.indexOf(e),jn=e=>"custom"===e,Rn=e=>{let t=void 0;return[...qn].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},kn=(e,t)=>Jr(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{});class Pn{constructor(e){this.opts=e}sendEvent(e,t){return Er(this,void 0,void 0,(function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');const{baseUrl:r,preprocessRequest:n}=this.opts,i=this.encodeForEventType(e,t),o=yield this.getQueryParamsForEventType(e),a={url:`${r}/analytics/${e}?${o}`,body:new Blob([i],{type:"application/x-www-form-urlencoded"})},{url:s,body:u}=Object.assign(Object.assign({},a),n?yield n(a,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,u)}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return Er(this,void 0,void 0,(function*(){const{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?"access_token="+t:"",n?"visitorId="+n:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[Ir.click,Ir.custom,Ir.search,Ir.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}}class Tn{sendEvent(e,t){return Er(this,void 0,void 0,(function*(){return Promise.resolve()}))}}class _n{constructor(e,t){kr()&&Pr()?this.storage=new Lr:kr()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Ur),this.beaconClient=new Pn(e),window.addEventListener("beforeunload",(()=>t()))}}class Mn{constructor(e,t){this.storage=t||new Ur,this.beaconClient=new Ar(e)}}class Fn{constructor(){this.storage=new Ur,this.beaconClient=new Tn}}const Vn="https://analytics.cloud.coveo.com/rest/ua";class $n{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Qr,Mr].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};const t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.analyticsFetchClient=new Ar(t)}get defaultOptions(){return{endpoint:Vn,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return"undefined"!=typeof window&&Rr()?new _n(e,(()=>this.flushBufferWithBeacon())):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please install @react-native-async-storage/async-storage and instantiate \n        your analytics client as follows:\n        \n        import {ReactNativeRuntime} from 'coveo.analytics/react-native';\n        \n        const analytics = new CoveoAnalytics({\n            ...your options,\n            runtimeEnvironment: new ReactNativeRuntime();\n        })\n    "),new Mn(e))}get analyticsBeaconClient(){return this.runtime.beaconClient}get storage(){return this.runtime.storage}determineVisitorId(){return Er(this,void 0,void 0,(function*(){try{return(yield this.storage.getItem("visitorId"))||Br()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Br()}}))}getCurrentVisitorId(){return Er(this,void 0,void 0,(function*(){if(!this.visitorId){const e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Er(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}getParameters(e,...t){return Er(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Er(this,void 0,void 0,(function*(){const r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(Br()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return Er(this,void 0,void 0,(function*(){const{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Er(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Er(this,void 0,void 0,(function*(){const n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Er(this,void 0,void 0,(function*(){const r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Er(this,void 0,void 0,(function*(){const{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[t=>this.removeEmptyPayloadValues(t,e),e=>this.validateParams(e),e=>r?(e=>{const t=!!e.action&&sn[e.action]||{};return Jr(e).reduce(((r,n)=>{const i=t[n]||In[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})})(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):e].reduce(((e,t)=>Er(this,void 0,void 0,(function*(){const r=yield e;return yield t(r)}))),Promise.resolve(t))}))}sendEvent(e,...t){return Er(this,void 0,void 0,(function*(){const{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:i,handled:!1}),yield Promise.all(this.afterSendHooks.map((t=>t(e,n)))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}flushBufferWithBeacon(){for(;this.hasPendingRequests();){const{eventType:e,payload:t}=this.bufferedRequests.pop();this.analyticsBeaconClient.sendEvent(e,t)}}sendFromBufferWithFetch(){return Er(this,void 0,void 0,(function*(){const e=this.bufferedRequests.shift();if(e){const{eventType:t,payload:r}=e;return this.analyticsFetchClient.sendEvent(t,r)}}))}hasPendingRequests(){return this.bufferedRequests.length>0}clear(){this.storage.removeItem("visitorId");(new Nr).clear()}sendSearchEvent(e){return Er(this,void 0,void 0,(function*(){return this.sendEvent(Ir.search,e)}))}sendClickEvent(e){return Er(this,void 0,void 0,(function*(){return this.sendEvent(Ir.click,e)}))}sendCustomEvent(e){return Er(this,void 0,void 0,(function*(){return this.sendEvent(Ir.custom,e)}))}sendViewEvent(e){return Er(this,void 0,void 0,(function*(){return this.sendEvent(Ir.view,e)}))}getVisit(){return Er(this,void 0,void 0,(function*(){const e=yield fetch(this.baseUrl+"/analytics/visit"),t=yield e.json();return this.visitorId=t.visitorId,t}))}getHealth(){return Er(this,void 0,void 0,(function*(){const e=yield fetch(this.baseUrl+"/analytics/monitoring/health");return yield e.json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){const r={};for(let n=0,i=t.length;n<i;n++){const i=t[n];if("string"==typeof i)r[e[n]]=i;else if("object"==typeof i)return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return-1!==({[Ir.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>{return this.isKeyAllowedEmpty(t,r)||null!=(n=e[r])&&""!==n;var n})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if((e=>[...Cn,...Gr,An,jn].some((t=>t(e))))(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){const{custom:t}=e,r=qr(e,["custom"]),n=this.lowercaseKeys(t),i=Jr(o=r).reduce(((e,t)=>{const r=Rn(t);return r?Object.assign(Object.assign({},e),kn(r,o[t])):Object.assign(Object.assign({},e),{[t]:o[t]})}),{});var o;return Object.assign(Object.assign({},n),i)}lowercaseKeys(e){return Object.keys(e||{}).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]})),{})}validateParams(e){const{anonymizeIp:t}=e,r=qr(e,["anonymizeIp"]);return void 0!==t&&-1==["0","false","undefined","null","{}","[]",""].indexOf((""+t).toLowerCase())&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){const{userId:t}=e,r=qr(e,["userId"]);return(null==(n=this.options.token)?void 0:n.startsWith("xx"))&&!t?(r.userId="anonymous",r):e;var n}get baseUrl(){const{version:e,endpoint:t}=this.options,r=-1!==t.indexOf(".cloud.coveo.com");return`${t}${r?"":"/rest"}/${e}`}}var Dn;!function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion"}(Dn||(Dn={}));const Ln={[Dn.triggerNotify]:"queryPipelineTriggers",[Dn.triggerExecute]:"queryPipelineTriggers",[Dn.triggerQuery]:"queryPipelineTriggers",[Dn.triggerRedirect]:"queryPipelineTriggers",[Dn.queryError]:"errors",[Dn.queryErrorBack]:"errors",[Dn.queryErrorClear]:"errors",[Dn.queryErrorRetry]:"errors",[Dn.pagerNext]:"getMoreResults",[Dn.pagerPrevious]:"getMoreResults",[Dn.pagerNumber]:"getMoreResults",[Dn.pagerResize]:"getMoreResults",[Dn.pagerScrolling]:"getMoreResults",[Dn.facetSearch]:"facet",[Dn.facetShowLess]:"facet",[Dn.facetShowMore]:"facet",[Dn.recommendation]:"recommendation",[Dn.likeSmartSnippet]:"smartSnippet",[Dn.dislikeSmartSnippet]:"smartSnippet",[Dn.expandSmartSnippet]:"smartSnippet",[Dn.collapseSmartSnippet]:"smartSnippet",[Dn.openSmartSnippetFeedbackModal]:"smartSnippet",[Dn.closeSmartSnippetFeedbackModal]:"smartSnippet",[Dn.sendSmartSnippetReason]:"smartSnippet",[Dn.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Dn.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions"};var Un;!function(e){e.DoesNotAnswer="does_not_answer",e.PartiallyAnswers="partially_answers",e.WasNotAQuestion="was_not_a_question",e.Other="other"}(Un||(Un={}));class zn{constructor(){this.runtime=new Fn,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}}function Nn(e){const t=e.join(";");return t.length<=256?t:Nn(e.slice(1))}const Hn=e=>Nn(function(e){let t="";return e.filter((e=>{const r=e!==t;return t=e,r}))}(function(e){return e.map((e=>e.replace(/;/g,"")))}(e)));function Qn(e){const t="string"==typeof e.partialQueries?e.partialQueries:Hn(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:Hn(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}class Yn{constructor(e,t){this.opts=e,this.provider=t,this.coveoAnalyticsClient=!1===e.enableAnalytics?new zn:new $n(e)}disable(){this.coveoAnalyticsClient instanceof $n&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new zn}enable(){this.coveoAnalyticsClient=new $n(this.opts)}logInterfaceLoad(){return this.logSearchEvent(Dn.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(Dn.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(Dn.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(Dn.recommendationOpen,e,t)}logFetchMoreResults(){return this.logCustomEvent(Dn.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(Dn.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(Dn.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(Dn.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(Dn.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(Dn.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(Dn.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(Dn.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(Dn.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(Dn.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(Dn.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(Dn.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(Dn.omniboxAnalytics,Qn(e))}logOmniboxFromLink(e){return this.logSearchEvent(Dn.omniboxFromLink,Qn(e))}logSearchFromLink(){return this.logSearchEvent(Dn.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(Dn.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(Dn.triggerExecute,e)}logTriggerQuery(){const e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(Dn.triggerQuery,e)}logTriggerRedirect(e){const t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(Dn.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(Dn.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(Dn.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(Dn.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(Dn.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(Dn.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(Dn.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(Dn.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(Dn.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(Dn.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(Dn.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(Dn.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(Dn.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(Dn.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(Dn.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(Dn.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(Dn.queryError,e)}logQueryErrorBack(){return Er(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Dn.queryErrorBack),this.logSearchEvent(Dn.queryErrorBack)}))}logQueryErrorRetry(){return Er(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Dn.queryErrorRetry),this.logSearchEvent(Dn.queryErrorRetry)}))}logQueryErrorClear(){return Er(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Dn.queryErrorClear),this.logSearchEvent(Dn.queryErrorClear)}))}logLikeSmartSnippet(){return this.logCustomEvent(Dn.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(Dn.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(Dn.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(Dn.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(Dn.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(Dn.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(Dn.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(Dn.expandSmartSnippetSuggestion,{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(Dn.collapseSmartSnippetSuggestion,{documentId:e})}logCustomEvent(e,t){const r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},this.getBaseCustomEventRequest(r)),{eventType:Ln[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)}logCustomEventWithType(e,t,r){const n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(i)}logSearchEvent(e,t){return this.coveoAnalyticsClient.sendSearchEvent(this.getBaseSearchEventRequest(e,t))}logClickEvent(e,t,r,n){const i=Object.assign(Object.assign(Object.assign({},t),this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(i)}getBaseSearchEventRequest(e,t){return Object.assign(Object.assign(Object.assign({},this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})}getBaseCustomEventRequest(e){return Object.assign(Object.assign({},this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})}getBaseEventRequest(e){const t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[]})}getOrigins(){return{originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}}const Bn=e=>{const t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"};function Wn(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;const n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}const Jn=(e,t)=>{const r=((e,t)=>{const r=((e,t)=>e.search.response.facets.find((e=>e.facetId===t)))(e,t);if(function(e,t){return!!t&&t.facetId in e.categoryFacetSet}(e,r))return r})(e,t);return Wn(null==r?void 0:r.values).parents};function Kn(e){return{facetSet:e.facetSet||{},categoryFacetSet:e.categoryFacetSet||{},dateFacetSet:e.dateFacetSet||{},numericFacetSet:e.numericFacetSet||{},search:e.search||{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[]}}}const Zn=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Xn=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Gn=e=>({displayValue:e.value,value:e.value}),ei=(e,t)=>{const r=((e,t)=>Jn(e,t).map((e=>e.value)).join(";"))(e,t);return{value:r,valuePosition:1,displayValue:r}},ti=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),ri=(e,t)=>{var r;return e.facetSet[t]||(null===(r=e.categoryFacetSet[t])||void 0===r?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},ni=(e,t)=>{const r=ri(e,t);return r?r.type:"specific"};class ii{constructor(e){this.state=e}getLanguage(){return Bn(this.state)}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults,getBaseMetadata:this.getBaseMetadata()}}getBaseMetadata(){const{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(const[e,n]of Object.entries(t)){r["context_"+e]=n}return r}getSearchUID(){var e,t;return(null===(e=this.state.search)||void 0===e?void 0:e.response.searchUid)||(null===(t=this.state.recommendation)||void 0===t?void 0:t.searchUid)||""}getPipeline(){return this.state.pipeline||"default"}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}getFacetState(){return(e=>{const t=[];return e.search.response.facets.forEach(((r,n)=>{const i=ni(e,r.facetId),o=ti(r,n+1);if("hierarchical"!==i)r.values.forEach(((e,r)=>{if("idle"===e.state)return;const n=Zn(e,r+1,i),a="specific"===i?Gn(e):Xn(e);t.push({...o,...n,...a})}));else{if(!Jn(e,r.facetId).length)return;t.push({...o,...ei(e,r.facetId),facetType:i,state:"selected"})}})),t})(Kn(this.state))}mapResultsToAnalyticsDocument(){var e;return null===(e=this.state.search)||void 0===e?void 0:e.response.results.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get queryText(){var e;return(null===(e=this.state.query)||void 0===e?void 0:e.q)||""}get responseTime(){var e;return(null===(e=this.state.search)||void 0===e?void 0:e.duration)||0}get numberOfResults(){var e;return(null===(e=this.state.search)||void 0===e?void 0:e.response.results.length)||[].length}}const oi=()=>new $n({}).currentVisitorId,ai=new Hr.HistoryStore;var si;!function(e){e[e.Search=0]="Search",e[e.Custom=1]="Custom",e[e.Click=2]="Click"}(si||(si={}));const ui=(e,t,r,n=(e=>new ii(e)))=>xe(e,(async(e,{getState:i,extra:{analyticsClientMiddleware:o,preprocessRequest:a,logger:s}})=>{const u=(e=>e())(i),c=(({logger:e,state:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new ii(t)})=>{const o=t.configuration.accessToken,a=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=new Yn({token:o,endpoint:a,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(t,r)=>(e.info({...r,type:t,endpoint:a,token:o},"Analytics request"),r)]},i);return!1===t.configuration.analytics.enabled&&u.disable(),u})({state:u,logger:s,analyticsClientMiddleware:o,preprocessRequest:a,provider:n(u)}),l=await r(c,u);return s.info({client:c.coveoAnalyticsClient,response:l},"Analytics response"),{analyticsType:t}})),ci=(e,t)=>{var r;const n=(null===(r=t.recommendation)||void 0===r?void 0:r.recommendations.findIndex((({uniqueId:t})=>e.uniqueId===t)))||0;return function(e,t,r){const n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:fi(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:pi(e),queryPipeline:r.pipeline||"default"}}(e,n,t)};const li={urihash:new $e,sourcetype:new $e,permanentid:new $e},di={uniqueId:He,raw:new Le({values:li}),title:He,uri:He,clickUri:He,rankingModifier:new $e({required:!1,emptyAllowed:!0})};function fi(e){const t=e.raw.author;return Pe(t)?"unknown":Array.isArray(t)?t.join(";"):""+t}function pi(e){const t=e.raw.source;return Pe(t)?"unknown":t}const hi=e=>new je(di).validate(function(e){return Object.assign({},...Object.keys(di).map((t=>({[t]:e[t]}))),{raw:(t=e.raw,Object.assign({},...Object.keys(li).map((e=>({[e]:t[e]})))))});var t}(e));ui("analytics/didyoumean/click",si.Search,(e=>e.logDidYouMeanClick()));const gi=ui("analytics/didyoumean/automatic",si.Search,(e=>e.logDidYouMeanAutomatic())),yi=Oe("query/updateQuery",(e=>We(e,{q:new $e,enableQuerySyntax:new Me})));var vi,mi;!function(e){e.Ascending="ascending",e.Descending="descending"}(vi||(vi={})),function(e){e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort"}(mi||(mi={}));const bi=e=>{if(Ne(e))return e.map((e=>bi(e))).join(",");switch(e.by){case mi.Relevancy:case mi.QRE:case mi.NoSort:return e.by;case mi.Date:return"date "+e.order;case mi.Field:return`@${e.field} ${e.order}`;default:return""}};function wi(){return bi({by:mi.Relevancy})}function Si(e){var t,r;return{context:e.context||{contextValues:{}},facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},pagination:e.pagination||{firstResult:0,numberOfResults:10,totalCountFiltered:0},query:e.query||{q:"",enableQuerySyntax:!1},advancedSearchQueries:e.advancedSearchQueries||{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,defaultFilters:{cq:"",aq:""}},querySet:e.querySet||{},sortCriteria:e.sortCriteria||wi(),pipeline:e.pipeline||"default",searchHub:e.searchHub||"default",facetOptions:e.facetOptions||{freezeFacetOrder:!1},facetOrder:null!==(t=e.facetOrder)&&void 0!==t?t:[],debug:null!==(r=e.debug)&&void 0!==r&&r}}const Oi=ui("search/logFetchMoreResults",si.Search,(e=>e.logFetchMoreResults())),Ci=e=>ui("search/queryError",si.Search,((t,r)=>{var n,i,o;return t.logQueryError({query:(null===(n=r.query)||void 0===n?void 0:n.q)||"",aq:(null===(i=r.advancedSearchQueries)||void 0===i?void 0:i.aq)||"",cq:(null===(o=r.advancedSearchQueries)||void 0===o?void 0:o.cq)||"",dq:"",errorType:e.type,errorMessage:e.message})}))(),qi=async(e,t,r)=>{var n;const i=(new Date).getTime();return{response:await e.search(r),duration:(new Date).getTime()-i,queryExecuted:(null===(n=t.query)||void 0===n?void 0:n.q)||"",requestExecuted:r}},Ei=xe("search/executeSearch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{const o=t();_i(o);const a=await qi(i.searchAPIClient,o,Ri(o));if(Sr(a.response))return r(Ci(a.response.error)),n(a.response.error);if(!ji(o,a.response.success))return r(ct(Si(o))),{...a,response:a.response.success,automaticallyCorrected:!1,originalQuery:Mi(o),analyticsAction:e};const{correctedQuery:s}=a.response.success.queryCorrections[0],u=await Ai(i.searchAPIClient,s,t,r);if(Sr(u.response))return r(Ci(u.response.error)),n(u.response.error);const c=a.response.success;return e(r,(()=>xi(a.queryExecuted,a.duration,o,c)),i),r(ct(Si(t()))),{...u,response:{...u.response.success,queryCorrections:a.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:Mi(o),analyticsAction:gi()}})),Ii=xe("search/fetchMoreResults",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{searchAPIClient:i}})=>{const o=t(),a=await qi(i,o,ki(o));return Sr(a.response)?(r(Ci(a.response.error)),n(a.response.error)):(r(ct(Si(o))),{...a,response:a.response.success,automaticallyCorrected:!1,originalQuery:Mi(o),analyticsAction:Oi()})})),xi=(e,t,r,n)=>{var i,o;return{...r,query:{q:e,enableQuerySyntax:null!==(o=null===(i=r.query)||void 0===i?void 0:i.enableQuerySyntax)&&void 0!==o&&o},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],duration:t,response:n,results:n.results}}},Ai=async(e,t,r,n)=>{n(yi({q:t}));const i=await qi(e,r(),Ri(r()));return n(dr(t)),i},ji=(e,t)=>{var r;return!0===(null===(r=e.didYouMean)||void 0===r?void 0:r.enableDidYouMean)&&0===t.results.length&&0!==t.queryCorrections.length},Ri=e=>{var t;const r=function(e){var t;return function(e,t){const r={};e.forEach((e=>r[e.facetId]=e));const n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));const i=Object.values(r);return[...n,...i]}(function(e){return[...Ti(e.facetSet),...Ti(e.numericFacetSet),...Ti(e.dateFacetSet),...Pi(e.categoryFacetSet)]}(e),null!==(t=e.facetOrder)&&void 0!==t?t:[])}(e);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,...e.configuration.analytics.enabled&&{visitorId:oi()},...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.context&&{context:e.context.contextValues},...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r.length&&{facets:r},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.facetOptions&&{facetOptions:e.facetOptions},...(null===(t=e.folding)||void 0===t?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}}},ki=e=>{var t,r,n,i;return{...Ri(e),firstResult:(null!==(r=null===(t=e.pagination)||void 0===t?void 0:t.firstResult)&&void 0!==r?r:0)+(null!==(i=null===(n=e.search)||void 0===n?void 0:n.results.length)&&void 0!==i?i:0)}};function Pi(e){return Object.values(e||{}).map((e=>e.request))}function Ti(e={}){return Object.keys(e).map((t=>e[t]))}const _i=e=>{var t;e.configuration.analytics.enabled&&ai.addElement({name:"Query",value:(null===(t=e.query)||void 0===t?void 0:t.q)||"",time:JSON.stringify(new Date)})},Mi=e=>{var t;return void 0!==(null===(t=e.query)||void 0===t?void 0:t.q)?e.query.q:""};Ce({enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:{correctedQuery:"",wordCorrections:[],originalQuery:""},originalQuery:""},(e=>{e.addCase(cr,(e=>{e.enableDidYouMean=!0})).addCase(lr,(e=>{e.enableDidYouMean=!1})).addCase(Ei.pending,(e=>{e.queryCorrection={correctedQuery:"",wordCorrections:[],originalQuery:""},e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(Ei.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||{correctedQuery:"",wordCorrections:[],originalQuery:""},e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(dr,((e,t)=>{e.wasCorrectedTo=t.payload}))}));const Fi=Oe("facetOptions/update",(e=>We(e,{freezeFacetOrder:new Me({required:!1})})));Ce({freezeFacetOrder:!1},(e=>{e.addCase(Fi,((e,t)=>({...e,...t.payload}))).addCase(Ei.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(Ei.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.facetOptions)&&void 0!==n?n:e}))}));const Vi=He,$i={state:new Re({required:!0}),numberOfResults:new Te({required:!0,min:0}),value:new $e({required:!0,emptyAllowed:!0}),path:new ze({required:!0,each:He}),moreValuesAvailable:new Me({required:!1})};function Di(e){e.children.forEach((e=>{Di(e)})),Be({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},$i)}const Li={facetId:Vi,field:He,delimitingCharacter:new $e({required:!1,emptyAllowed:!0}),filterFacetCount:new Me({required:!1}),injectionDepth:new Te({required:!1,min:0}),numberOfValues:new Te({required:!1,min:1}),sortCriteria:new Re({required:!1}),basePath:new ze({required:!1,each:He}),filterByBasePath:new Me({required:!1})},Ui=Oe("categoryFacet/register",(e=>We(e,Li))),zi=Oe("categoryFacet/toggleSelectValue",(e=>{try{return Be(e.facetId,He),Di(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}})),Ni=Oe("categoryFacet/deselectAll",(e=>We(e,Vi))),Hi=Oe("categoryFacet/updateNumberOfValues",(e=>We(e,{facetId:Vi,numberOfValues:new Te({required:!0,min:1})}))),Qi=Oe("categoryFacet/updateSortCriterion",(e=>We(e,{facetId:Vi,criterion:new Re})));function Yi(e,t){const{facetId:r,criterion:n}=t,i=e[r];i&&(i.sortCriteria=n)}function Bi(e){e&&(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function Wi(e,t){e&&(e.numberOfValues=t)}const Ji={facetId:Vi,captions:new Le({options:{required:!1}}),numberOfValues:new Te({required:!1,min:1}),query:new $e({required:!1,emptyAllowed:!0})},Ki={path:new ze({required:!0,each:He}),displayValue:Qe,rawValue:Qe,count:new Te({required:!0,min:0})},Zi=Oe("categoryFacet/selectSearchResult",(e=>We(e,{facetId:Vi,value:new Le({values:Ki})}))),Xi=Oe("categoryFacetSearch/register",(e=>We(e,Ji))),Gi=Oe("facet/deselectAllFacets");function eo(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];const r=to(e[0],t);let n=r;for(const r of e.splice(1)){const e=to(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function to(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}Ce({},(e=>{e.addCase(Ui,((e,t)=>{const r=t.payload,{facetId:n}=r;if(n in e)return;const i=(o=r,{...ro,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...o});var o;const a=i.numberOfValues;e[n]={request:i,initialNumberOfValues:a}})).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.categoryFacetSet)&&void 0!==n?n:e})).addCase(ht,((e,t)=>{const r=t.payload.cf||{};Object.keys(e).forEach((t=>{eo(e[t].request,r[t]||[],e[t].initialNumberOfValues)}))})).addCase(Qi,((e,t)=>{var r;const{facetId:n,criterion:i}=t.payload,o=null===(r=e[n])||void 0===r?void 0:r.request;o&&(o.sortCriteria=i)})).addCase(zi,((e,t)=>{var r;const{facetId:n,selection:i,retrieveCount:o}=t.payload,a=null===(r=e[n])||void 0===r?void 0:r.request;if(!a)return;let s=a.currentValues;const{path:u}=i,c=u.slice(0,u.length-1);for(const e of c){const t=s[0];if(e!==t.value)return;t.retrieveChildren=!1,t.state="idle",s=t.children}if(s.length){const e=s[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}const l=function(e,t){const{value:r}=e;return{value:r,state:"selected",children:[],retrieveChildren:!0,retrieveCount:t}}(i,o);s.push(l),a.numberOfValues=1})).addCase(Ni,((e,t)=>{no(e,t.payload)})).addCase(Gi,(e=>{Object.keys(e).forEach((t=>no(e,t)))})).addCase(Hi,((e,t)=>{var r;const{facetId:n,numberOfValues:i}=t.payload,o=null===(r=e[n])||void 0===r?void 0:r.request;if(o)return o.currentValues.length?void function(e,t){var r;const{facetId:n,numberOfValues:i}=t;let o=null===(r=e[n])||void 0===r?void 0:r.request.currentValues[0];if(!o)return;for(;o.children.length&&"selected"!==(null==o?void 0:o.state);)o=o.children[0];o.retrieveCount=i}(e,t.payload):Wi(o,i)})).addCase(Zi,((e,t)=>{const{facetId:r,value:n}=t.payload,i=e[r];if(!i)return;const o=[...n.path,n.rawValue];eo(i.request,o,i.initialNumberOfValues)})).addCase(Ei.fulfilled,((e,t)=>{const{facets:r}=t.payload.response;r.forEach((t=>{var r;if(!function(e,t){return t.facetId in e}(e,t))return;const n=t.facetId,i=null===(r=e[n])||void 0===r?void 0:r.request;if(!i)return;const o=function(e,t){const r=Wn(e.currentValues).parents,n=Wn(t.values).parents;return r.length!==n.length}(i,t);i.currentValues=o?[]:i.currentValues,i.preventAutoSelect=!1}))}))}));const ro={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function no(e,t){const r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function io(e,t,r){const{facetId:n}=t;if(e[n])return;const i={...fo,...t},o=r();e[n]={options:i,isLoading:!1,response:o,initialNumberOfValues:i.numberOfValues,requestId:""}}function oo(e,t){const{facetId:r,...n}=t,i=e[r];i&&(i.options={...i.options,...n})}function ao(e,t,r){const n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function so(e,t){const r=e[t];r&&(r.isLoading=!1)}function uo(e,t,r){const{facetId:n,response:i}=t,o=e[n];o&&o.requestId===r&&(o.isLoading=!1,o.response=i)}function co(e,t,r){const{facetId:n}=t,i=e[n];i&&(i.requestId="",i.isLoading=!1,i.response=r(),i.options.numberOfValues=i.initialNumberOfValues,i.options.query=fo.query)}function lo(e,t){Object.keys(e).forEach((r=>co(e,{facetId:r},t)))}Ce([],(e=>{e.addCase(Ei.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.facetOrder)&&void 0!==n?n:e}))}));const fo={captions:{},numberOfValues:10,query:""},po={facetId:Vi,value:new Le({values:{displayValue:Qe,rawValue:Qe,count:new Te({required:!0,min:0})}})},ho=Oe("facetSearch/register",(e=>We(e,Ji))),go=Oe("facetSearch/update",(e=>We(e,Ji))),yo=Oe("facetSearch/toggleSelectValue",(e=>We(e,po)));const vo=e=>ui("analytics/facet/search",si.Search,((t,r)=>{We(e,Vi);const n=Kn(r),i=((e,t)=>{const r=ri(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:`${n}_${e}`}})(e,n);return t.logFacetSearch(i)}))(),mo=e=>{const t=[];let r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},bo=xe("facetSearch/executeSearch",(async(e,{dispatch:t,getState:r,extra:{searchAPIClient:n,validatePayload:i}})=>{const o=r();let a;i(e,He),a=So(o,e)?((e,t)=>{const{captions:r,query:n,numberOfValues:i}=t.facetSearchSet[e].options,{field:o,delimitingCharacter:a,currentValues:s}=t.facetSet[e],u=Ri(t),c=s.filter((e=>"idle"!==e.state)).map((e=>e.value)),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:i,query:l,field:o,delimitingCharacter:a,ignoreValues:c,searchContext:u,type:"specific"}})(e,o):((e,t)=>{const r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:i,query:o,numberOfValues:a}=r,{field:s,delimitingCharacter:u,basePath:c}=n,l=Ri(t),d=mo(n),f=d.length?[d]:[],p=`*${o}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:c,captions:i,numberOfValues:a,query:p,field:s,delimitingCharacter:u,ignorePaths:f,searchContext:l,type:"hierarchical"}})(e,o);const s=await n.facetSearch(a);return t(vo(e)),{facetId:e,response:s}})),wo=Oe("facetSearch/clearResults",(e=>We(e,{facetId:Vi}))),So=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t];function Oo(){return{moreValuesAvailable:!1,values:[]}}function Co(){return{moreValuesAvailable:!1,values:[]}}Ce({},(e=>{e.addCase(Xi,((e,t)=>{io(e,t.payload,Oo)})).addCase(go,((e,t)=>{oo(e,t.payload)})).addCase(bo.pending,((e,t)=>{ao(e,t.meta.arg,t.meta.requestId)})).addCase(bo.rejected,((e,t)=>{so(e,t.meta.arg)})).addCase(bo.fulfilled,((e,t)=>{uo(e,t.payload,t.meta.requestId)})).addCase(wo,((e,{payload:{facetId:t}})=>{co(e,{facetId:t},Oo)})).addCase(Ei.fulfilled,(e=>{lo(e,Oo)}))})),Ce({},(e=>{e.addCase(ho,((e,t)=>{io(e,t.payload,Co)})).addCase(go,((e,t)=>{oo(e,t.payload)})).addCase(bo.pending,((e,t)=>{ao(e,t.meta.arg,t.meta.requestId)})).addCase(bo.rejected,((e,t)=>{so(e,t.meta.arg)})).addCase(bo.fulfilled,((e,t)=>{uo(e,t.payload,t.meta.requestId)})).addCase(wo,((e,{payload:t})=>{co(e,t,Co)})).addCase(Ei.fulfilled,(e=>{lo(e,Co)}))}));const qo={value:He,numberOfResults:new Te({min:0}),state:He},Eo={facetId:Vi,field:new $e({required:!0,emptyAllowed:!0}),delimitingCharacter:new $e({required:!1,emptyAllowed:!0}),filterFacetCount:new Me({required:!1}),injectionDepth:new Te({required:!1,min:0}),numberOfValues:new Te({required:!1,min:1}),sortCriteria:new Re({required:!1})},Io=Oe("facet/register",(e=>We(e,Eo))),xo=Oe("facet/toggleSelectValue",(e=>We(e,{facetId:Vi,selection:new Le({values:qo})}))),Ao=Oe("facet/deselectAll",(e=>We(e,Vi))),jo=Oe("facet/updateSortCriterion",(e=>We(e,{facetId:Vi,criterion:new Re({required:!0})}))),Ro=Oe("facet/updateNumberOfValues",(e=>We(e,{facetId:Vi,numberOfValues:new Te({required:!0,min:1})}))),ko=Oe("facet/updateIsFieldExpanded",(e=>We(e,{facetId:Vi,isFieldExpanded:new Me({required:!0})}))),Po=Oe("facet/updateFreezeCurrentValues",(e=>We(e,{facetId:Vi,freezeCurrentValues:new Me({required:!0})})));Ce({},(e=>{e.addCase(Io,((e,t)=>{const{facetId:r}=t.payload;var n;r in e||(e[r]=(n=t.payload,{...To,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...n}))})).addCase(lt.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(ht,((e,t)=>{const r=t.payload.f||{};Object.keys(e).forEach((t=>{const n=e[t],i=r[t]||[];n.currentValues=i.map(Mo),n.preventAutoSelect=!0,n.numberOfValues=Math.max(i.length,n.numberOfValues)}))})).addCase(xo,((e,t)=>{const{facetId:r,selection:n}=t.payload,i=e[r];if(!i)return;const o=i.currentValues.find((e=>e.value===n.value));if(!o)return;const a="selected"===o.state;o.state=a?"idle":"selected",i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(Po,((e,t)=>{const{facetId:r,freezeCurrentValues:n}=t.payload,i=e[r];i&&(i.freezeCurrentValues=n)})).addCase(Ao,((e,t)=>{Bi(e[t.payload])})).addCase(Gi,(e=>{Object.keys(e).forEach((t=>{Bi(e[t])}))})).addCase(jo,((e,t)=>{Yi(e,t.payload)})).addCase(Ro,((e,t)=>{const{facetId:r,numberOfValues:n}=t.payload;Wi(e[r],n)})).addCase(ko,((e,t)=>{const{facetId:r,isFieldExpanded:n}=t.payload,i=e[r];i&&(i.isFieldExpanded=n)})).addCase(Ei.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{const r=t.facetId,n=e[r];n&&(n.currentValues=t.values.map(_o),n.freezeCurrentValues=!1,n.preventAutoSelect=!1)}))})).addCase(yo,((e,t)=>{const{facetId:r,value:n}=t.payload,i=e[r];if(!i)return;const{rawValue:o}=n,{currentValues:a}=i,s=a.find((e=>e.value===o));if(s)return void(s.state="selected");const u=Mo(o),c=a.findIndex((e=>"idle"===e.state)),l=-1===c?a.length:c,d=a.slice(0,l),f=a.slice(l+1);i.currentValues=[...d,u,...f],i.numberOfValues=i.currentValues.length,i.freezeCurrentValues=!0,i.preventAutoSelect=!0}))}));const To={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function _o(e){const{value:t,state:r}=e;return{value:t,state:r}}function Mo(e){return{value:e,state:"selected"}}var Fo=mt((function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",a="hour",s="day",u="week",c="month",l="quarter",d="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),o=r-i<0,a=t.clone().add(n+(o?-1:1),c);return+(-(n+(r-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:s,D:f,h:a,m:o,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=y;var S=function(e){return e instanceof E},O=function(e,t,r){var n;if(!e)return b;if("string"==typeof e)w[e]&&(n=e),t&&(w[e]=t,n=e);else{var i=e.name;w[i]=e,n=i}return!r&&n&&(b=n),n||!r&&b},C=function(e,t){if(S(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new E(r)},q=m;q.l=O,q.i=S,q.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function y(e){this.$L=O(e.locale,null,!0),this.parse(e)}var v=y.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(q.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return q},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return C(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<C(e)},v.$g=function(e,t,r){return q.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!q.u(t)||t,l=q.p(e),p=function(e,t){var i=q.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(s)},h=function(e,t){return q.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return n?p(1,0):p(31,11);case c:return n?p(1,y):p(0,y+1);case u:var b=this.$locale().weekStart||0,w=(g<b?g+7:g)-b;return p(n?v-w:v+(6-w),y);case s:case f:return h(m+"Hours",0);case a:return h(m+"Minutes",1);case o:return h(m+"Seconds",2);case i:return h(m+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,u=q.p(e),l="set"+(this.$u?"UTC":""),p=(r={},r[s]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[a]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],h=u===s?this.$D+(t-this.$W):t;if(u===c||u===d){var g=this.clone().set(f,1);g.$d[p](h),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[q.p(e)]()},v.add=function(n,l){var f,p=this;n=Number(n);var h=q.p(l),g=function(e){var t=C(p);return q.w(t.date(t.date()+Math.round(e*n)),p)};if(h===c)return this.set(c,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===s)return g(1);if(h===u)return g(7);var y=(f={},f[o]=t,f[a]=r,f[i]=e,f)[h]||1,v=this.$d.getTime()+n*y;return q.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this;if(!this.isValid())return p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=q.z(this),i=this.$locale(),o=this.$H,a=this.$m,s=this.$M,u=i.weekdays,c=i.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},d=function(e){return q.s(o%12||12,e,"0")},f=i.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:q.s(s+1,2,"0"),MMM:l(i.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:q.s(this.$D,2,"0"),d:String(this.$W),dd:l(i.weekdaysMin,this.$W,u,2),ddd:l(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:q.s(o,2,"0"),h:d(1),hh:d(2),a:f(o,a,!0),A:f(o,a,!1),m:String(a),mm:q.s(a,2,"0"),s:String(this.$s),ss:q.s(this.$s,2,"0"),SSS:q.s(this.$ms,3,"0"),Z:n};return r.replace(g,(function(e,t){return t||h[e]||n.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,p){var h,g=q.p(f),y=C(n),v=(y.utcOffset()-this.utcOffset())*t,m=this-y,b=q.m(this,y);return b=(h={},h[d]=b/12,h[c]=b,h[l]=b/3,h[u]=(m-v)/6048e5,h[s]=(m-v)/864e5,h[a]=m/r,h[o]=m/t,h[i]=m/e,h)[g]||m,p?b:q.a(b)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return w[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=O(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return q.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},y}(),I=E.prototype;return C.prototype=I,[["$ms",n],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",d],["$D",f]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,E,C),e.$i=!0),C},C.locale=O,C.isDayjs=S,C.unix=function(e){return C(1e3*e)},C.en=w[b],C.Ls=w,C.p={},C}()}));const Vo={state:He,start:new Te({required:!0}),end:new Te({required:!0}),endInclusive:new Me({required:!0}),numberOfResults:new Te({required:!0,min:0})},$o={start:He,end:He,endInclusive:new Me({required:!0}),state:He,numberOfResults:new Te({required:!0,min:0})};var Do=mt((function(e,t){e.exports=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,o){var a=i.prototype;o.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var r=o(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=a.utcOffset;a.utcOffset=function(n,i){var o=this.$utils().u;if(o(n))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===o?a:-a}(n)))return this;var a=Math.abs(n)<=16?60*n:n,s=this;if(i)return s.$offset=a,s.$u=0===n,s;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+u,e)).$offset=a,s.$x.$localOffset=u}else s=this.utc();return s};var l=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=o(e).local();return f.call(n,i,t,r)}}}()})),Lo=mt((function(e,t){e.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^\s\d-_:/()]+/,o={},a=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],u=function(e){var t=o[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=o.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},l={A:[i,function(e){this.afternoon=c(e,!1)}],a:[i,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,a("seconds")],ss:[n,a("seconds")],m:[n,a("minutes")],mm:[n,a("minutes")],H:[n,a("hours")],h:[n,a("hours")],HH:[n,a("hours")],hh:[n,a("hours")],D:[n,a("day")],DD:[r,a("day")],Do:[i,function(e){var t=o.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,a("month")],MM:[r,a("month")],MMM:[i,function(e){var t=u("months"),r=(u("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,a("year")],YY:[r,function(e){e=+e,this.year=e+(e>68?1900:2e3)}],YYYY:[/\d{4}/,a("year")],Z:s,ZZ:s};function d(r){var n,i;n=r,i=o&&o.formats;for(var a=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var o=n&&n.toUpperCase();return r||i[n]||e[n]||i[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=a.length,u=0;u<s;u+=1){var c=a[u],d=l[c],f=d&&d[0],p=d&&d[1];a[u]=p?{regex:f,parser:p}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var i=a[r];if("string"==typeof i)n+=i.length;else{var o=i.regex,u=i.parser,c=e.substr(n),l=o.exec(c)[0];u.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0;var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,a=e.args;this.$u=n;var s=a[1];if("string"==typeof s){var u=!0===a[2],c=!0===a[3],l=u||c,f=a[2];c&&(f=a[2]),o=this.$locale(),!u&&f&&(o=r.Ls[f]),this.$d=function(e,t,r){try{var n=d(t)(e),i=n.year,o=n.month,a=n.day,s=n.hours,u=n.minutes,c=n.seconds,l=n.milliseconds,f=n.zone,p=new Date,h=a||(i||o?1:p.getDate()),g=i||p.getFullYear(),y=0;i&&!o||(y=o>0?o-1:p.getMonth());var v=s||0,m=u||0,b=c||0,w=l||0;return f?new Date(Date.UTC(g,y,h,v,m,b,w+60*f.offset*1e3)):r?new Date(Date.UTC(g,y,h,v,m,b,w)):new Date(g,y,h,v,m,b,w)}catch(e){return new Date("")}}(t,s,n),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),l&&t!==this.format(s)&&(this.$d=new Date("")),o={}}else if(s instanceof Array)for(var p=s.length,h=1;h<=p;h+=1){a[1]=s[h-1];var g=r.apply(this,a);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}h===p&&(this.$d=new Date(""))}else i.call(this,e)}}}()}));function Uo(e,t){const{dateFormat:r,useLocalTime:n}=t,i=Fo(e,r);if(!i.isValid())throw new Error(`Could not parse the provided date "${e}".\n      Please provide a dateFormat string in the configuration options.\n      See https://day.js.org/docs/en/parse/string-format for more information.\n       `);return function(e){const t="YYYY/MM/DD@HH:mm:ss";return e.format(t)}(n?i:i.utc())}Fo.extend(Do),Fo.extend(Lo);const zo=Oe("rangeFacet/updateSortCriterion",(e=>We(e,{facetId:Vi,criterion:new Re({required:!0})}))),No={start:He,end:He,endInclusive:new Me({required:!0}),state:He},Ho={facetId:Vi,field:He,currentValues:new ze({required:!1,each:new Le({values:No})}),generateAutomaticRanges:new Me({required:!0}),filterFacetCount:new Me({required:!1}),injectionDepth:new Te({required:!1,min:0}),numberOfValues:new Te({required:!1,min:1}),sortCriteria:new Re({required:!1}),rangeAlgorithm:new Re({required:!1})};function Qo(e){e.currentValues&&e.currentValues.forEach((e=>{const{start:t,end:r}={start:Uo((n=e).start,n),end:Uo(n.end,n),endInclusive:null!==(i=n.endInclusive)&&void 0!==i&&i,state:null!==(o=n.state)&&void 0!==o?o:"idle"};var n,i,o;if(Fo(t).isAfter(Fo(r)))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}const Yo=Oe("dateFacet/register",(e=>{try{return Be(e,Ho),Qo(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}})),Bo=Oe("dateFacet/toggleSelectValue",(e=>We(e,{facetId:Vi,selection:new Le({values:$o})}))),Wo=Oe("dateFacet/updateFacetValues",(e=>{try{return Be(e,{facetId:Vi,values:new ze({each:new Le({values:$o})})}),Qo({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}})),Jo=zo,Ko=Ao,Zo={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Xo(e,t){const{facetId:r}=t;if(r in e)return;const n=oa(t);e[r]={...t,numberOfValues:n}}function Go(e,t,r){const n=e[t];n&&(n.currentValues=r,n.numberOfValues=oa(n))}function ea(e,t,r){const n=e[t];if(!n)return;const i=ia(n.currentValues,r);if(!i)return;const o="selected"===i.state;i.state=o?"idle":"selected",n.preventAutoSelect=!0}function ta(e,t){const r=e[t];r&&r.currentValues.forEach((e=>e.state="idle"))}function ra(e,t){Object.entries(e).forEach((([e,r])=>{const n=t[e]||[];r.currentValues.forEach((e=>{const t=!!ia(n,e);return e.state=t?"selected":"idle",e}));const i=n.filter((e=>!ia(r.currentValues,e))),o=r.currentValues;o.push(...i),r.numberOfValues=Math.max(r.numberOfValues,o.length)}))}function na(e,t,r){t.forEach((t=>{const n=t.facetId,i=e[n];if(!i)return;const o=r(t.values);i.currentValues=o,i.preventAutoSelect=!1}))}function ia(e,t){const{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function oa(e){const{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}function aa(e){return e.map((e=>{const{numberOfResults:t,...r}=e;return r}))}Ce({},(e=>{e.addCase(Yo,((e,t)=>{const{payload:r}=t;var n;Xo(e,(n=r,{...Zo,currentValues:[],preventAutoSelect:!1,type:"dateRange",...n}))})).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.dateFacetSet)&&void 0!==n?n:e})).addCase(ht,((e,t)=>{ra(e,t.payload.df||{})})).addCase(Bo,((e,t)=>{const{facetId:r,selection:n}=t.payload;ea(e,r,n)})).addCase(Wo,((e,t)=>{const{facetId:r,values:n}=t.payload;Go(e,r,n)})).addCase(Ko,((e,t)=>{ta(e,t.payload)})).addCase(Gi,(e=>{Object.keys(e).forEach((t=>{ta(e,t)}))})).addCase(Jo,((e,t)=>{Yi(e,t.payload)})).addCase(Ei.fulfilled,((e,t)=>{na(e,t.payload.response.facets,aa)}))}));const sa={state:He,start:new Te({required:!0}),end:new Te({required:!0}),endInclusive:new Me({required:!0})},ua={facetId:Vi,field:He,currentValues:new ze({required:!1,each:new Le({values:sa})}),generateAutomaticRanges:new Me({required:!0}),filterFacetCount:new Me({required:!1}),injectionDepth:new Te({required:!1,min:0}),numberOfValues:new Te({required:!1,min:1}),sortCriteria:new Re({required:!1}),rangeAlgorithm:new Re({required:!1})};function ca(e){e.currentValues&&e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}const la=Oe("numericFacet/register",(e=>{try{return We(e,ua),ca(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}})),da=Oe("numericFacet/toggleSelectValue",(e=>We(e,{facetId:Vi,selection:new Le({values:Vo})}))),fa=Oe("numericFacet/updateFacetValues",(e=>{try{return Be(e,{facetId:Vi,values:new ze({each:new Le({values:Vo})})}),ca({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ye(t)}}})),pa=zo,ha=Ao;function ga(e){return e.map((e=>{const{numberOfResults:t,...r}=e;return r}))}Ce({},(e=>{e.addCase(la,((e,t)=>{const{payload:r}=t;var n;Xo(e,(n=r,{...Zo,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...n}))})).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.numericFacetSet)&&void 0!==n?n:e})).addCase(ht,((e,t)=>{ra(e,t.payload.nf||{})})).addCase(da,((e,t)=>{const{facetId:r,selection:n}=t.payload;ea(e,r,n)})).addCase(fa,((e,t)=>{const{facetId:r,values:n}=t.payload;Go(e,r,n)})).addCase(ha,((e,t)=>{ta(e,t.payload)})).addCase(Gi,(e=>{Object.keys(e).forEach((t=>{ta(e,t)}))})).addCase(pa,((e,t)=>{Yi(e,t.payload)})).addCase(Ei.fulfilled,((e,t)=>{na(e,t.payload.response.facets,ga)}))}));const ya=new ze({each:He,required:!0}),va=Oe("fields/registerFieldsToInclude",(e=>We(e,ya))),ma={collectionField:new $e,parentField:new $e,childField:new $e,numberOfFoldedResults:new Te({min:0})},ba=Oe("folding/register",(e=>We(e,ma))),wa=xe("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n}})=>{const{folding:{fields:i},configuration:{accessToken:o,organizationId:a,search:{apiBaseUrl:s}}}=t(),u=await n.search({tab:"",referrer:"",accessToken:o,organizationId:a,url:s,aq:`@${i.collection} = ${e}`,numberOfResults:100});return Sr(u)?r(u.error):{collectionId:e,results:u.success.results}})),Sa=Ce({fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"]},(e=>e.addCase(va,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(ba,((e,{payload:t})=>{var r,n,i;const o={collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"};e.fieldsToInclude.push(null!==(r=t.collectionField)&&void 0!==r?r:o.collection,null!==(n=t.parentField)&&void 0!==n?n:o.parent,null!==(i=t.childField)&&void 0!==i?i:o.child)}))));function Oa(e,t){return e.raw[t.parent]}function Ca(e,t){const r=e.raw[t.child];return n=r,Array.isArray(n)?r[0]:r;var n}function qa(e){return e.childResults?e.childResults.flatMap((e=>[e,...qa(e)])):[]}function Ea(e,t,r,n=[]){const i=Ca(e,r);return i?-1!==n.indexOf(i)?[]:t.filter((t=>{const n=Ca(t,r)===Ca(e,r);return Oa(t,r)===i&&!n})).map((e=>({result:e,children:Ea(e,t,r,[...n,i])}))):[]}function Ia(e,t){return e.find((e=>{const r=void 0===Oa(e,t),n=(i=Oa(e,t),o=Ca(e,t),void 0!==(i||o)&&i===o);var i,o;return r||n}))}function xa(e){const t=qa(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));var n,i;return n=[e,...t,...r],i=e=>e.uniqueId,Object.values(n.reduce(((e,t,r)=>({...e,[i(t,r)]:t})),{}))}function Aa(e,t){const r={};return e.forEach((e=>{const n=function(e,t){return e.raw[t.collection]}(e,t);n&&Ca(e,t)&&(r[n]=function(e,t){var r;const n=xa(e),i=null!==(r=Ia(n,t))&&void 0!==r?r:e;return{result:i,children:Ea(i,n,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}(e,t))})),r}Ce({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},(e=>e.addCase(Ei.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Aa(t.response.results,e.fields):{}})).addCase(Ii.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...Aa(t.response.results,e.fields)}:{}})).addCase(ba,((e,{payload:t})=>{var r,n,i,o;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!==(r=t.collectionField)&&void 0!==r?r:e.fields.collection,parent:null!==(n=t.parentField)&&void 0!==n?n:e.fields.parent,child:null!==(i=t.childField)&&void 0!==i?i:e.fields.child},filterFieldRange:null!==(o=t.numberOfFoldedResults)&&void 0!==o?o:e.filterFieldRange}})).addCase(wa.pending,((e,{meta:t})=>{const r=t.arg;e.collections[r].isLoadingMoreResults=!0})).addCase(wa.rejected,((e,{meta:t})=>{const r=t.arg;e.collections[r].isLoadingMoreResults=!1})).addCase(wa.fulfilled,((e,{payload:{collectionId:t,results:r}})=>{const n=Ia(r,e.fields);n&&(e.collections[t]={result:n,children:Ea(n,r,e.fields),moreResultsAvailable:!1,isLoadingMoreResults:!1})})))),mt((function(e,t){!function(e){var t="function"==typeof WeakSet,r=Object.keys;function n(e,t){return e===t||e!=e&&t!=t}function i(e){return e.constructor===Object||null==e.constructor}function o(e){return!!e&&"function"==typeof e.then}function a(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var u=t?function(){return new WeakSet}:s;function c(e){return function(t){var r=e||t;return function(e,t,n){void 0===n&&(n=u());var i=!!e&&"object"==typeof e,o=!!t&&"object"==typeof t;if(i||o){var a=i&&n.has(e),s=o&&n.has(t);if(a||s)return a&&s;i&&n.add(e),o&&n.add(t)}return r(e,t,n)}}}function l(e,t,r,n){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!r(e[i],t[i],n))return!1;return!0}function d(e,t,r,n){var i=e.size===t.size;return i&&e.size&&e.forEach((function(e,o){i&&(i=!1,t.forEach((function(t,a){!i&&r(o,a,n)&&(i=r(e,t,n))})))})),i}var f="_owner",p=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function h(e,t,n,i){var o=r(e),s=o.length;if(r(t).length!==s)return!1;if(s)for(var u=void 0;s-- >0;){if((u=o[s])===f){var c=a(e),l=a(t);if((c||l)&&c!==l)return!1}if(!p(t,u)||!n(e[u],t[u],i))return!1}return!0}function g(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}function y(e,t,r,n){var i=e.size===t.size;return i&&e.size&&e.forEach((function(e){i&&(i=!1,t.forEach((function(t){i||(i=r(e,t,n))})))})),i}var v="function"==typeof Map,m="function"==typeof Set;function b(e){var t="function"==typeof e?e(r):r;function r(e,r,a){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(i(e)&&i(r))return h(e,r,t,a);var s=Array.isArray(e),u=Array.isArray(r);return s||u?s===u&&l(e,r,t,a):(s=e instanceof Date,u=r instanceof Date,s||u?s===u&&n(e.getTime(),r.getTime()):(s=e instanceof RegExp,u=r instanceof RegExp,s||u?s===u&&g(e,r):o(e)||o(r)?e===r:v&&(s=e instanceof Map,u=r instanceof Map,s||u)?s===u&&d(e,r,t,a):m&&(s=e instanceof Set,u=r instanceof Set,s||u)?s===u&&y(e,r,t,a):h(e,r,t,a)))}return e!=e&&r!=r}return r}var w=b(),S=b((function(){return n})),O=b(c()),C=b(c(n));e.circularDeepEqual=O,e.circularShallowEqual=C,e.createCustomEqual=b,e.deepEqual=w,e.sameValueZeroEqual=n,e.shallowEqual=S,Object.defineProperty(e,"__esModule",{value:!0})}(t)})).createCustomEqual((e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t=>-1!==r.findIndex((r=>e(t,r))))):e(t,r))),Ce(Si({}),(e=>{e.addCase(ct,((e,t)=>ja(e,t.payload)?void 0:t.payload))}));const ja=(e,t)=>Ra(e.context,t.context)&&Ma(e.advancedSearchQueries,t.advancedSearchQueries)&&ka(e.facetSet,t.facetSet)&&ka(e.dateFacetSet,t.dateFacetSet)&&ka(e.numericFacetSet,t.numericFacetSet)&&Pa(e.categoryFacetSet,t.categoryFacetSet)&&Ta(e.pagination,t.pagination)&&_a(e.query,t.query)&&Fa(e,t)&&Va(e.pipeline,t.pipeline)&&$a(e.searchHub,t.searchHub)&&Da(e.facetOrder,t.facetOrder)&&La(e.debug,t.debug),Ra=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),ka=(e,t)=>{for(const[r,n]of Object.entries(t)){if(!e[r])return!1;const t=e[r].currentValues.filter((e=>"selected"===e.state)),i=n.currentValues.filter((e=>"selected"===e.state));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},Pa=(e,t)=>{var r;for(const[n,i]of Object.entries(t)){if(!e[n])return!1;const t=Wn(null===(r=e[n])||void 0===r?void 0:r.request.currentValues).parents.map((({value:e})=>e)),o=Wn(null==i?void 0:i.request.currentValues).parents.map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(o))return!1}return!0},Ta=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,_a=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Ma=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Fa=(e,t)=>e.sortCriteria===t.sortCriteria,Va=(e,t)=>e===t,$a=(e,t)=>e===t,Da=(e,t)=>{return n=t,(r=e).length===n.length&&-1===r.findIndex(((e,t)=>n[t]!==e));var r,n},La=(e,t)=>e===t,Ua=new Te({required:!0,min:0}),za=Oe("pagination/registerNumberOfResults",(e=>We(e,Ua))),Na=Oe("pagination/updateNumberOfResults",(e=>We(e,Ua))),Ha=Oe("pagination/registerPage",(e=>We(e,Ua))),Qa=Oe("pagination/updatePage",(e=>We(e,Ua))),Ya=Oe("pagination/nextPage"),Ba=Oe("pagination/previousPage");function Wa(e){e.firstResult=0}function Ja(e){const{firstResult:t,numberOfResults:r}=e;return function(e,t){return e/t+1}(t,r)}function Ka(e,t){return(e-1)*t}Ce({firstResult:0,numberOfResults:10,totalCountFiltered:0},(e=>{e.addCase(za,((e,t)=>{const r=Ja(e),n=t.payload;e.numberOfResults=n,e.firstResult=Ka(r,n)})).addCase(Na,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(Ha,((e,t)=>{const r=t.payload;e.firstResult=Ka(r,e.numberOfResults)})).addCase(Qa,((e,t)=>{const r=t.payload;e.firstResult=Ka(r,e.numberOfResults)})).addCase(Ba,(e=>{const t=Ja(e),r=Math.max(t-1,1);e.firstResult=Ka(r,e.numberOfResults)})).addCase(Ya,(e=>{const t=Ja(e),r=function(e){const{totalCountFiltered:t,numberOfResults:r}=e;return function(e,t){const r=Math.min(e,1e3);return Math.ceil(r/t)}(t,r)}(e),n=Math.min(t+1,r);e.firstResult=Ka(n,e.numberOfResults)})).addCase(lt.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(ht,((e,t)=>{var r,n;e.firstResult=null!==(r=t.payload.firstResult)&&void 0!==r?r:e.firstResult,e.numberOfResults=null!==(n=t.payload.numberOfResults)&&void 0!==n?n:e.numberOfResults})).addCase(Ei.fulfilled,((e,t)=>{const{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Ao,(e=>{Wa(e)})).addCase(xo,(e=>{Wa(e)})).addCase(Ni,(e=>{Wa(e)})).addCase(zi,(e=>{Wa(e)})).addCase(Zi,(e=>{Wa(e)})).addCase(Bo,(e=>{Wa(e)})).addCase(da,(e=>{Wa(e)})).addCase(Gi,(e=>{Wa(e)})).addCase(Wo,(e=>{Wa(e)})).addCase(fa,(e=>{Wa(e)})).addCase(yo,(e=>{Wa(e)}))}));const Za=Oe("pipeline/set",(e=>We(e,new $e({required:!0,emptyAllowed:!0})))),Xa=Ce("default",(e=>{e.addCase(Za,((e,t)=>t.payload)).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.pipeline)&&void 0!==n?n:e})).addCase(et,((e,t)=>t.payload.pipeline||e))})),Ga=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating"];class es{constructor(e){this.state=e,this.initialState={id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}}getLanguage(){return Bn(this.state)}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){var e;return{recommendation:(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.id)||this.initialState.id}}getSearchUID(){var e;return(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.searchUid)||this.initialState.searchUid}getPipeline(){return""}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2||"default"}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.recommendations.length)||this.initialState.recommendations.length}}const ts=ui("analytics/productrecommendations/load",si.Search,(e=>e.logRecommendationInterfaceLoad()),(e=>new es(e))),rs=Oe("productrecommendations/setId",(e=>We(e,{id:He}))),ns=Oe("productrecommendations/setSku",(e=>We(e,{skus:new ze({required:!0,min:1,each:new $e({emptyAllowed:!1})})}))),is=Oe("productrecommendations/setBrand",(e=>We(e,{brand:new $e({required:!0,emptyAllowed:!0})}))),os=Oe("productrecommendations/setCategory",(e=>We(e,{category:new $e({required:!0,emptyAllowed:!0})}))),as=Oe("productrecommendations/setAdditionalFields",(e=>We(e,{additionalFields:new ze({required:!0,each:new $e({emptyAllowed:!1})})}))),ss=Oe("productrecommendations/setMaxNumberOfRecommendations",(e=>We(e,{number:new Te({required:!0,max:50,min:1})}))),us=xe("productrecommendations/get",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n}})=>{const i=t(),o=(new Date).getTime(),a=await n.productRecommendations(ls(i)),s=(new Date).getTime()-o;if(Sr(a))return r(a.error);const u=i.productRecommendations.additionalFields||[];return{recommendations:a.success.results.map((e=>cs(e,{additionalFields:u}))),analyticsAction:ts(),searchUid:a.success.searchUid,duration:s}})),cs=(e,{additionalFields:t})=>{const r=e.raw.ec_price,n=e.raw.ec_promo_price,i=e.raw.ec_in_stock;return{permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:void 0===n||void 0!==r&&n>=r?void 0:n,ec_in_stock:void 0===i?void 0:"yes"===i.toLowerCase()||"true"===i.toLowerCase(),ec_rating:e.raw.ec_rating,additionalFields:t.reduce(((t,r)=>({...t,[r]:e.raw[r]})),{})}},ls=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,...e.configuration.analytics.enabled&&{visitorId:oi()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Ga,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?ai.getHistory():[],...e.context&&{context:e.context.contextValues},...e.searchHub&&{searchHub:e.searchHub}});Ce({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0},(e=>{e.addCase(rs,((e,t)=>{e.id=t.payload.id})).addCase(ns,((e,t)=>{e.skus=t.payload.skus})).addCase(is,((e,t)=>{e.filter.brand=t.payload.brand})).addCase(os,((e,t)=>{e.filter.category=t.payload.category})).addCase(ss,((e,t)=>{e.maxNumberOfRecommendations=t.payload.number})).addCase(as,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(us.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(us.fulfilled,((e,t)=>{e.error=null,e.searchUid=t.payload.searchUid,e.recommendations=t.payload.recommendations,e.isLoading=!1})).addCase(us.pending,(e=>{e.isLoading=!0}))}));const ds={id:He,query:Qe},fs=Oe("querySet/register",(e=>We(e,ds))),ps=Oe("querySet/update",(e=>We(e,ds))),hs={id:He},gs=Oe("querySuggest/register",(e=>We(e,{...hs,q:new $e,count:new Te({min:0})}))),ys=Oe("querySuggest/unregister",(e=>We(e,hs))),vs=Oe("querySuggest/selectSuggestion",(e=>We(e,{...hs,expression:Qe}))),ms=Oe("querySuggest/clear",(e=>We(e,hs))),bs=xe("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n,validatePayload:i}})=>{i(e,hs);const o=e.id,a=await n.querySuggest(ws(o,t()));return Sr(a)?r({id:o,...a.error}):{id:o,...a.success}})),ws=(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySuggest[e].q,locale:t.configuration.search.locale,actionsHistory:t.configuration.analytics.enabled?ai.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub}});Ce({},(e=>{e.addCase(fs,((e,t)=>{const{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(ps,((e,t)=>{const{id:r,query:n}=t.payload;Ss(e,r,n)})).addCase(vs,((e,t)=>{const{id:r,expression:n}=t.payload;Ss(e,r,n)})).addCase(Ei.fulfilled,((e,t)=>{const{queryExecuted:r}=t.payload;Object.keys(e).forEach((t=>e[t]=r))})).addCase(lt.fulfilled,((e,t)=>{if(t.payload)for(const[r,n]of Object.entries(t.payload.querySet))Ss(e,r,n)}))}));const Ss=(e,t,r)=>{t in e&&(e[t]=r)};Ce({},(e=>e.addCase(gs,((e,t)=>{e[t.payload.id]={id:"",completions:[],count:5,q:"",currentRequestId:"",error:null,partialQueries:[],...t.payload}})).addCase(ys,((e,t)=>{delete e[t.payload.id]})).addCase(bs.pending,((e,t)=>{e[t.meta.arg.id].currentRequestId=t.meta.requestId})).addCase(bs.fulfilled,((e,t)=>{var r;const n=t.meta.arg.id;if(t.meta.requestId===(null===(r=e[n])||void 0===r?void 0:r.currentRequestId)){const{q:r}=e[n];r&&e[n].partialQueries.push(r.replace(/;/,encodeURIComponent(";"))),e[n].completions=t.payload.completions}})).addCase(bs.rejected,((e,t)=>{e[t.payload.id].error=t.payload})).addCase(ps,((e,t)=>{const{id:r,query:n}=t.payload;r in e&&(e[r].q=n)})).addCase(ms,((e,t)=>{const{id:r}=t.payload;e[r].q="",e[r].completions=[],e[r].partialQueries=[]})).addCase(vs,((e,t)=>{const{id:r,expression:n}=t.payload;e[r].q=n})))),Ce({q:"",enableQuerySyntax:!1},(e=>e.addCase(yi,((e,t)=>({...e,...t.payload}))).addCase(dr,((e,t)=>{e.q=t.payload})).addCase(vs,((e,t)=>{e.q=t.payload.expression})).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.query)&&void 0!==n?n:e})).addCase(ht,((e,t)=>{var r,n;e.q=null!==(r=t.payload.q)&&void 0!==r?r:e.q,e.enableQuerySyntax=null!==(n=t.payload.enableQuerySyntax)&&void 0!==n?n:e.enableQuerySyntax}))));const Os=()=>new Le({values:{documentId:new Le({values:{contentIdKey:new $e({required:!0,emptyAllowed:!1}),contentIdValue:new $e({required:!0,emptyAllowed:!1})}})},options:{required:!0}}),Cs=Oe("smartSnippet/expand"),qs=Oe("smartSnippet/collapse"),Es=Oe("smartSnippet/like"),Is=Oe("smartSnippet/dislike"),xs=Oe("smartSnippet/related/expand",(e=>We(e,Os()))),As=Oe("smartSnippet/related/collapse",(e=>We(e,Os()))),js=(e,t)=>e.findIndex((e=>e.contentIdValue===t.contentIdValue&&e.contentIdKey===t.contentIdKey));Ce({liked:!1,disliked:!1,expanded:!1,relatedQuestions:[]},(e=>e.addCase(Cs,(e=>{e.expanded=!0})).addCase(qs,(e=>{e.expanded=!1})).addCase(Es,(e=>{e.liked=!0,e.disliked=!1})).addCase(Is,(e=>{e.liked=!1,e.disliked=!0})).addCase(Ei.fulfilled,((e,t)=>{e.relatedQuestions=t.payload.response.questionAnswer.relatedQuestions.map((e=>({contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1})))})).addCase(xs,((e,t)=>{const r=js(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase(As,((e,t)=>{const r=js(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)}))));const Rs=ui("analytics/recommendation/update",si.Search,(e=>e.logRecommendationInterfaceLoad())),ks=e=>ui("analytics/recommendation/open",si.Click,((t,r)=>(hi(e),t.logRecommendationOpen(ci(e,r),(e=>({contentIDKey:"@permanentid",contentIDValue:e.raw.permanentid||""}))(e)))))(),Ps=Oe("recommendation/set",(e=>We(e,{id:He}))),Ts=xe("recommendation/get",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n}})=>{const i=t(),o=(new Date).getTime(),a=await n.recommendations(_s(i)),s=(new Date).getTime()-o;return Sr(a)?r(a.error):{recommendations:a.success.results,analyticsAction:Rs(),duration:s,searchUid:a.success.searchUid}})),_s=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,actionsHistory:e.configuration.analytics.enabled?ai.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude}}),Ms=Ce({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""},(e=>{e.addCase(Ps,((e,t)=>{e.id=t.payload.id})).addCase(Ts.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(Ts.fulfilled,((e,t)=>{e.error=null,e.recommendations=t.payload.recommendations,e.duration=t.payload.duration,e.isLoading=!1,e.searchUid=t.payload.searchUid})).addCase(Ts.pending,(e=>{e.isLoading=!0}))}));function Fs(e){return"notify"===e.type}function Vs(e){return"redirect"===e.type}function $s(e){return"query"===e.type}function Ds(e){return"execute"===e.type}class Ls{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){const e=this.response.preprocessingOutput.triggers.filter(Vs);return e.length?e[0].content:null}}const Us=ui("analytics/redirection",si.Search,((e,t)=>{var r;if(null===(r=t.redirection)||void 0===r?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})})),zs=xe("redirection/check",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{searchAPIClient:i,validatePayload:o}})=>{o(e,{defaultRedirectionUrl:new $e({emptyAllowed:!1,url:!0})});const a=await i.plan(Ns(r()));if(Sr(a))return n(a.error);const s=new Ls(a.success).redirectionUrl;return s&&t(Us()),s||e.defaultRedirectionUrl})),Ns=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub}});Ce({redirectTo:null},(e=>e.addCase(zs.fulfilled,((e,t)=>{e.redirectTo=t.payload}))));const Hs=xe("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{const i=function(e,t){var r;const{search:n,accessToken:i,organizationId:o}=e.configuration,a=(null===(r=e.query)||void 0===r?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:i,organizationId:o,enableNavigation:!1,q:a,...t,requestedOutputSize:t.requestedOutputSize||0}}(r(),e),o=await t.searchAPIClient.html(i);return Sr(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}}));Ce({uniqueId:"",content:"",isLoading:!1},(e=>{e.addCase(Hs.pending,(e=>{e.isLoading=!0})).addCase(Hs.fulfilled,((e,t)=>{const{content:r,uniqueId:n}=t.payload;e.content=r,e.uniqueId=n,e.isLoading=!1}))}));const Qs=Oe("searchHub/set",(e=>We(e,new $e({required:!0,emptyAllowed:!0})))),Ys=Ce("default",(e=>{e.addCase(Qs,((e,t)=>t.payload)).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.searchHub)&&void 0!==n?n:e})).addCase(et,((e,t)=>t.payload.searchHub||e))}));function Bs(e,t){e.error=t.payload?t.payload:null,e.isLoading=!1}function Ws(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Js(e){e.isLoading=!0}Ce({response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[]},(e=>{e.addCase(Ei.rejected,Bs),e.addCase(Ii.rejected,Bs),e.addCase(Ei.fulfilled,((e,t)=>{Ws(e,t),e.results=t.payload.response.results})),e.addCase(Ii.fulfilled,((e,t)=>{Ws(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(Ei.pending,Js),e.addCase(Ii.pending,Js)}));const Ks={by:new class{constructor(e){this.config=e,this.value=new Re(e)}validate(e){const t=this.value.validate(e);return null!==t?t:ke(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}}({enum:mi,required:!0})},Zs=Oe("sortCriteria/register",(e=>Gs(e))),Xs=Oe("sortCriteria/update",(e=>Gs(e))),Gs=e=>Ne(e)?(e.forEach((e=>We(e,Ks))),{payload:e}):We(e,Ks);Ce(wi(),(e=>{e.addCase(Zs,((e,t)=>bi(t.payload))).addCase(Xs,((e,t)=>bi(t.payload))).addCase(lt.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.sortCriteria)&&void 0!==n?n:e})).addCase(ht,((e,t)=>{var r;return null!==(r=t.payload.sortCriteria)&&void 0!==r?r:e}))}));Ce({redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""},(e=>e.addCase(Ei.fulfilled,((e,t)=>{const r=t.payload.response.triggers.filter(Vs);e.redirectTo=r.length?r[0].content:"";const n=t.payload.response.triggers.filter($s);e.query=n.length?n[0].content:"";const i=t.payload.response.triggers.filter(Ds);e.execute=i.length?{functionName:i[0].content.name,params:i[0].content.params}:{functionName:"",params:[]};const o=t.payload.response.triggers.filter(Fs);e.notification=o.length?o[0].content:""}))));const eu=Xt,tu=gt,ru=ir,nu=Sa,iu=Xa,ou=Ys,au=sr,su=Ms;function uu(e,t){let r=0;const n=function(e,t,r){var n,i,o;void 0===t&&(t=50),void 0===r&&(r={});var a=null!=(n=r.isImmediate)&&n,s=null!=(i=r.callback)&&i,u=r.maxWait,c=Date.now(),l=[];function d(){if(void 0!==u){var e=Date.now()-c;if(e+t>=u)return u-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var u=a&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,c=Date.now(),!a){var n=e.apply(r,t);s&&s(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),u){var f=e.apply(r,t);return s&&s(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){void 0!==o&&clearTimeout(o),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}((()=>r=0),500);return i=>o=>async a=>{if(!("function"==typeof a))return o(a);const s=await o(a);if(!function(e){var t;return(null===(t=e.error)||void 0===t?void 0:t.name)===(new Yt).name}(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();const u=await async function(e){try{return await e()}catch(e){return""}}(t);i.dispatch(Ge({accessToken:u})),i.dispatch(a)}}const cu=e=>t=>r=>{var n,i;const o=null===(n=r.payload)||void 0===n?void 0:n.analyticsAction;void 0!==o&&(null===(i=r.payload)||void 0===i||delete i.analyticsAction);const a=t(r);return r.type===Ei.fulfilled.type&&void 0===o&&console.error("No analytics action associated with search:",r),r.type===Ts.fulfilled&&void 0===o&&console.error("No analytics action associated with recommendation:",r),r.type===us.fulfilled&&void 0===o&&console.error("No analytics action associated with product recommendation:",r),void 0!==o&&e.dispatch(o),a},lu={configuration:eu,version:ur};function du(e,t){const r=function(e,t){const{reducers:r}=e,n=function(e){const t={...e};return{get combinedReducer(){return re(t)},add(e){Object.keys(e).filter((e=>!(e in t))).forEach((r=>t[r]=e[r]))}}}({...lu,...r}),i=t.logger,o=function(e,t,r){const{preloadedState:n,configuration:i}=e,o=i.name||"coveo-headless",a=function(e,t){const{renewAccessToken:r}=e.configuration;return[uu(t,r),at(t),cu].concat(e.middlewares||[])}(e,t.logger);return function({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return Se({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i},middleware:e=>{return[...r,...e({thunk:{extraArgument:n}}),(t=n.logger,e=>r=>n=>(t.debug({action:n,nextState:e.getState()},"Action dispatched: "+n.type),r(n)))];var t}})}({preloadedState:n,reducer:r.combinedReducer,middlewares:a,thunkExtraArguments:t,name:o})}(e,t,n);return{addReducers(e){n.add(e),o.replaceReducer(n.combinedReducer)},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(nt())},disableAnalytics(){o.dispatch(rt())},get state(){return o.getState()},logger:i,store:o}}(e,t),{accessToken:n,organizationId:i,platformUrl:o,analytics:a}=e.configuration;if(r.dispatch(Ge({accessToken:n,organizationId:i,platformUrl:o})),a){const{analyticsClientMiddleware:e,...t}=a;r.dispatch(tt(t))}return r}const fu={organizationId:He,accessToken:He,platformUrl:new $e({required:!1,emptyAllowed:!1}),name:new $e({required:!1,emptyAllowed:!1}),analytics:new Le({options:{required:!1},values:{enabled:new Me({required:!1}),originLevel2:new $e({required:!1}),originLevel3:new $e({required:!1})}})};const pu=new je({...fu,pipeline:new $e({required:!1,emptyAllowed:!1}),searchHub:new $e({required:!1,emptyAllowed:!1})});function hu(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}var gu=function(e,t,r){var n=r&&r.stringify||hu;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=new Array(i);o[0]=n(e);for(var a=1;a<i;a++)o[a]=n(t[a]);return o.join(" ")}if("string"!=typeof e)return e;var s=t.length;if(0===s)return e;for(var u="",c=0,l=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(l=l>-1?l:0,e.charCodeAt(f+1)){case 100:case 102:if(c>=s)break;if(l<f&&(u+=e.slice(l,f)),null==t[c])break;u+=Number(t[c]),l=f+=2;break;case 105:if(c>=s)break;if(l<f&&(u+=e.slice(l,f)),null==t[c])break;u+=Math.floor(Number(t[c])),l=f+=2;break;case 79:case 111:case 106:if(c>=s)break;if(l<f&&(u+=e.slice(l,f)),void 0===t[c])break;var p=typeof t[c];if("string"===p){u+="'"+t[c]+"'",l=f+2,f++;break}if("function"===p){u+=t[c].name||"<anonymous>",l=f+2,f++;break}u+=n(t[c]),l=f+2,f++;break;case 115:if(c>=s)break;l<f&&(u+=e.slice(l,f)),u+=String(t[c]),l=f+2,f++;break;case 37:l<f&&(u+=e.slice(l,f)),u+="%",l=f+2,f++,c--}++c}++f}if(-1===l)return e;l<d&&(u+=e.slice(l));return u};var yu=bu;const vu=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},mu={mapHttpRequest:xu,mapHttpResponse:xu,wrapRequestSerializer:Au,wrapResponseSerializer:Au,wrapErrorSerializer:Au,req:xu,res:xu,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function bu(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||vu;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},i=function(e,t){if(Array.isArray(e))return e.filter((function(e){return"!stdSerializers.err"!==e}));return!0===e&&Object.keys(t)}(e.browser.serialize,n);let o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const a=e.level||"info",s=Object.create(r);s.log||(s.log=ju),Object.defineProperty(s,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(s,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,wu(u,s,"error","log"),wu(u,s,"fatal","error"),wu(u,s,"warn","error"),wu(u,s,"info","log"),wu(u,s,"debug","log"),wu(u,s,"trace","log")}});const u={transmit:t,serialize:i,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:Iu(e)};return s.levels=bu.levels,s.level=a,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=ju,s.serializers=n,s._serialize=i,s._stdErrSerialize=o,s.child=function(r){if(!r)throw new Error("missing bindings for child Pino");const o=r.serializers;if(i&&o){var a=Object.assign({},n,o),s=!0===e.browser.serialize?Object.keys(a):i;delete r.serializers,Ou([r],s,a,this._stdErrSerialize)}function u(e){this._childLevel=1+(0|e._childLevel),this.error=Cu(e,r,"error"),this.fatal=Cu(e,r,"fatal"),this.warn=Cu(e,r,"warn"),this.info=Cu(e,r,"info"),this.debug=Cu(e,r,"debug"),this.trace=Cu(e,r,"trace"),a&&(this.serializers=a,this._serialize=s),t&&(this._logEvent=Eu([].concat(e._logEvent.bindings,r)))}return u.prototype=this,new u(this)},t&&(s._logEvent=Eu()),s}function wu(e,t,r,n){const i=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?ju:i[r]?i[r]:vu[r]||vu[n]||ju,function(e,t,r){if(!e.transmit&&t[r]===ju)return;t[r]=(n=t[r],function(){const i=e.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===vu?vu:this;for(var s=0;s<o.length;s++)o[s]=arguments[s];if(e.serialize&&!e.asObject&&Ou(o,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(a,Su(this,r,o,i)):n.apply(a,o),e.transmit){const n=e.transmit.level||t.level,a=bu.levels.values[n],s=bu.levels.values[r];if(s<a)return;qu(this,{ts:i,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:bu.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},o)}});var n}(e,t,r)}function Su(e,t,r,n){e._serialize&&Ou(r,e._serialize,e.serializers,e._stdErrSerialize);const i=r.slice();let o=i[0];const a={};n&&(a.time=n),a.level=bu.levels.values[t];let s=1+(0|e._childLevel);if(s<1&&(s=1),null!==o&&"object"==typeof o){for(;s--&&"object"==typeof i[0];)Object.assign(a,i.shift());o=i.length?gu(i.shift(),i):void 0}else"string"==typeof o&&(o=gu(i.shift(),i));return void 0!==o&&(a.msg=o),a}function Ou(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=bu.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function Cu(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function qu(e,t,r){const n=t.send,i=t.ts,o=t.methodLevel,a=t.methodValue,s=t.val,u=e._logEvent.bindings;Ou(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=o,e._logEvent.level.value=a,n(o,e._logEvent,s),e._logEvent=Eu(u)}function Eu(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Iu(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?Ru:ku}function xu(){return{}}function Au(e){return e}function ju(){}function Ru(){return!1}function ku(){return Date.now()}bu.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},bu.stdSerializers=mu,bu.stdTimeFunctions=Object.assign({},{nullTime:Ru,epochTime:ku,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});const Pu=e=>e;function Tu(e,t){return{analyticsClientMiddleware:function(e){const{analytics:t}=e,r=(e,t)=>t;return(null==t?void 0:t.analyticsClientMiddleware)||r}(e),validatePayload:Be,preprocessRequest:function(e){return e.preprocessRequest||Pu}(e),logger:t}}const _u=e=>e,Mu=e=>e,Fu=e=>e,Vu={debug:au,pipeline:iu,searchHub:ou,recommendation:su};function $u(e){let t;return{subscribe(r){return r(),t=JSON.stringify(this.state),e.subscribe((()=>{(e=>{try{const r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}})(this.state)&&r()}))},get state(){return{}}}}const Du=new je({id:new $e({emptyAllowed:!0,required:!1,default:""})});e.buildContext=function(e){!function(e){e.addReducers({context:ru})}(e);const t=$u(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.context.contextValues}},set(e){r(tr(e))},add(e,t){r(rr({contextKey:e,contextValue:t}))},remove(e){r(nr(e))}}},e.buildController=$u,e.buildRecommendationEngine=function(e){const t=function(e){return yu({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter},browser:{transmit:{send:(null==e?void 0:e.browserPostLogHook)||(()=>{})}}})}(e.loggerOptions);!function(e,t){try{pu.validate(e)}catch(e){throw t.error(e,"Recommendation engine configuration error"),e}}(e.configuration,t);const r=function(e,t){return new yr({logger:t,preprocessRequest:e.preprocessRequest||Pu,postprocessSearchResponseMiddleware:_u,postprocessFacetSearchResponseMiddleware:Mu,postprocessQuerySuggestResponseMiddleware:Fu})}(e.configuration,t),n={...Tu(e.configuration,t),searchAPIClient:r},i=du({...e,reducers:Vu},n),{pipeline:o,searchHub:a}=e.configuration;return Pe(o)||i.dispatch(Za(o)),Pe(a)||i.dispatch(Qs(a)),{...i,get state(){return i.state}}},e.buildRecommendationList=function(e,t={}){!function(e){e.addReducers({recommendation:su,configuration:eu})}(e);const r=$u(e),{dispatch:n}=e,i=((e,t,r,n)=>Je(e,t,r,"Check the options of "+n,"Controller initialization error"))(e,Du,t.options,"buildRecommendationList");return""!==i.id&&n(Ps({id:i.id})),{...r,refresh(){n(Ts())},get state(){const t=e.state;return{recommendations:t.recommendation.recommendations,error:t.recommendation.error,isLoading:t.recommendation.isLoading}}}},e.getSampleRecommendationEngineConfiguration=function(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",pipeline:"default",searchHub:"default"}},e.loadAdvancedSearchQueryActions=function(e){return e.addReducers({advancedSearchQueries:tu}),{updateAdvancedSearchQueries:dt,registerAdvancedSearchQueries:ft}},e.loadClickAnalyticsActions=function(e){return e.addReducers({}),{logRecommendationOpen:ks}},e.loadConfigurationActions=function(e){return e.addReducers({configuration:eu}),{disableAnalytics:rt,enableAnalytics:nt,setOriginLevel2:it,setOriginLevel3:ot,updateAnalyticsConfiguration:tt,updateBasicConfiguration:Ge}},e.loadContextActions=function(e){return e.addReducers({context:ru}),{addContext:rr,removeContext:nr,setContext:tr}},e.loadDebugActions=function(e){return e.addReducers({debug:au}),{disableDebug:ar,enableDebug:or}},e.loadFieldActions=function(e){return e.addReducers({fields:nu}),{registerFieldsToInclude:va}},e.loadPipelineActions=function(e){return e.addReducers({pipeline:iu}),{setPipeline:Za}},e.loadRecommendationActions=function(e){return e.addReducers({recommendation:su}),{getRecommendations:Ts,setRecommendationId:Ps}},e.loadSearchHubActions=function(e){return e.addReducers({searchHub:ou}),{setSearchHub:Qs}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=headless.js.map
