function e(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function t(e){return!!e&&!!e[N]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[L]||!!e.constructor[L]||c(e)||u(e))}function n(e,t,r){void 0===r&&(r=!1),0===i(e)?(r?Object.keys:z)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function i(e){var t=e[N];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:c(e)?2:u(e)?3:0}function a(e,t){return 2===i(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function o(e,t,r){var n=i(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function s(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function c(e){return M&&e instanceof Map}function u(e){return D&&e instanceof Set}function l(e){return e.o||e.t}function d(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=U(e);delete t[N];for(var r=z(t),n=0;n<r.length;n++){var i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function f(e,a){return void 0===a&&(a=!1),h(e)||t(e)||!r(e)||(i(e)>1&&(e.set=e.add=e.clear=e.delete=p),Object.freeze(e),a&&n(e,(function(e,t){return f(t,!0)}),!0)),e}function p(){e(2)}function h(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function g(t){var r=Q[t];return r||e(18,t),r}function y(){return T}function m(e,t){t&&(g("Patches"),e.u=[],e.s=[],e.v=t)}function v(e){b(e),e.p.forEach(S),e.p=null}function b(e){e===T&&(T=e.l)}function w(e){return T={p:[],l:T,h:e,m:!0,_:0}}function S(e){var t=e[N];0===t.i||1===t.i?t.j():t.g=!0}function O(t,n){n._=n.p.length;var i=n.p[0],a=void 0!==t&&t!==i;return n.h.O||g("ES5").S(n,t,a),a?(i[N].P&&(v(n),e(4)),r(t)&&(t=C(n,t),n.l||I(n,t)),n.u&&g("Patches").M(i[N],t,n.u,n.s)):t=C(n,i,[]),v(n),n.u&&n.v(n.u,n.s),t!==$?t:void 0}function C(e,t,r){if(h(t))return t;var i=t[N];if(!i)return n(t,(function(n,a){return q(e,i,t,n,a,r)}),!0),t;if(i.A!==e)return t;if(!i.P)return I(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var a=4===i.i||5===i.i?i.o=d(i.k):i.o;n(3===i.i?new Set(a):a,(function(t,n){return q(e,i,a,t,n,r)})),I(e,a,!1),r&&e.u&&g("Patches").R(i,r,e.u,e.s)}return i.o}function q(e,n,i,s,c,u){if(t(c)){var l=C(e,c,u&&n&&3!==n.i&&!a(n.D,s)?u.concat(s):void 0);if(o(i,s,l),!t(l))return;e.m=!1}if(r(c)&&!h(c)){if(!e.h.N&&e._<1)return;C(e,c),n&&n.A.l||I(e,c)}}function I(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&f(t,r)}function x(e,t){var r=e[N];return(r?l(r):e)[t]}function R(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function E(e){e.P||(e.P=!0,e.l&&E(e.l))}function A(e){e.o||(e.o=d(e.t))}function F(e,t,r){var n=c(t)?g("MapSet").T(t,r):u(t)?g("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:y(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=n,a=H;r&&(i=[n],a=B);var o=Proxy.revocable(i,a),s=o.revoke,c=o.proxy;return n.k=c,n.j=s,c}(t,r):g("ES5").J(t,r);return(r?r.A:y()).p.push(n),n}function j(a){return t(a)||e(22,a),function e(t){if(!r(t))return t;var a,s=t[N],c=i(t);if(s){if(!s.P&&(s.i<4||!g("ES5").K(s)))return s.t;s.I=!0,a=k(t,c),s.I=!1}else a=k(t,c);return n(a,(function(t,r){s&&function(e,t){return 2===i(e)?e.get(t):e[t]}(s.t,t)===r||o(a,t,e(r))})),3===c?new Set(a):a}(a)}function k(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return d(e)}var P,T,V="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),M="undefined"!=typeof Map,D="undefined"!=typeof Set,_="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$=V?Symbol.for("immer-nothing"):((P={})["immer-nothing"]=!0,P),L=V?Symbol.for("immer-draftable"):"__$immer_draftable",N=V?Symbol.for("immer-state"):"__$immer_state",z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,U=Object.getOwnPropertyDescriptors||function(e){var t={};return z(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Q={},H={get:function(e,t){if(t===N)return e;var n=l(e);if(!a(n,t))return function(e,t,r){var n,i=R(t,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(e.k):void 0}(e,n,t);var i=n[t];return e.I||!r(i)?i:i===x(e.t,t)?(A(e),e.o[t]=F(e.A.h,i,e)):i},has:function(e,t){return t in l(e)},ownKeys:function(e){return Reflect.ownKeys(l(e))},set:function(e,t,r){var n=R(l(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=x(l(e),t),o=null==i?void 0:i[N];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(s(r,i)&&(void 0!==r||a(e.t,t)))return!0;A(e),E(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==x(e.t,t)||t in e.t?(e.D[t]=!1,A(e),E(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=l(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){e(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){e(12)}},B={};n(H,(function(e,t){B[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),B.deleteProperty=function(e,t){return H.deleteProperty.call(this,e[0],t)},B.set=function(e,t,r){return H.set.call(this,e[0],t,r,e[0])};var Y=new(function(){function n(e){this.O=_,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=n.prototype;return i.produce=function(t,n,i){if("function"==typeof t&&"function"!=typeof n){var a=n;n=t;var o=this;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var s;if("function"!=typeof n&&e(6),void 0!==i&&"function"!=typeof i&&e(7),r(t)){var c=w(this),u=F(this,t,void 0),l=!0;try{s=n(u),l=!1}finally{l?v(c):b(c)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return m(c,i),O(e,c)}),(function(e){throw v(c),e})):(m(c,i),O(s,c))}if(!t||"object"!=typeof t){if((s=n(t))===$)return;return void 0===s&&(s=t),this.N&&f(s,!0),s}e(21,t)},i.produceWithPatches=function(e,t){var r,n,i=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},i.createDraft=function(n){r(n)||e(8),t(n)&&(n=j(n));var i=w(this),a=F(this,n,void 0);return a[N].C=!0,b(i),a},i.finishDraft=function(e,t){var r=(e&&e[N]).A;return m(r,t),O(void 0,r)},i.setAutoFreeze=function(e){this.N=e},i.setUseProxies=function(t){t&&!_&&e(20),this.O=t},i.applyPatches=function(e,r){var n;for(n=r.length-1;n>=0;n--){var i=r[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var a=g("Patches").$;return t(e)?a(e,r):this.produce(e,(function(e){return a(e,r.slice(n+1))}))},n}()),W=Y.produce;Y.produceWithPatches.bind(Y),Y.setAutoFreeze.bind(Y),Y.setUseProxies.bind(Y),Y.applyPatches.bind(Y),Y.createDraft.bind(Y),Y.finishDraft.bind(Y);var J=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),K=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z={INIT:"@@redux/INIT"+K(),REPLACE:"@@redux/REPLACE"+K(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+K()}};function X(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function G(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(G)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,a=t,o=[],s=o,c=!1;function u(){s===o&&(s=o.slice())}function l(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var r=s.indexOf(e);s.splice(r,1),o=null}}}function f(e){if(!X(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,a=i(a,e)}finally{c=!1}for(var t=o=s,r=0;r<t.length;r++){(0,t[r])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Z.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[J]=function(){return this},e}return f({type:Z.INIT}),(n={dispatch:f,subscribe:d,getState:l,replaceReducer:p})[J]=h,n}function ee(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function te(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];"function"==typeof e[i]&&(r[i]=e[i])}var a,o=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:Z.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:Z.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Z.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,i={},s=0;s<o.length;s++){var c=o[s],u=r[c],l=e[c],d=u(l,t);if(void 0===d){var f=ee(c,t);throw new Error(f)}i[c]=d,n=n||d!==l}return(n=n||o.length!==Object.keys(e).length)?i:e}}function re(e,t){return function(){return t(e.apply(this,arguments))}}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(r,!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function se(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return ae({},r,{dispatch:n=oe.apply(void 0,a)(r.dispatch)})}}}var ce=Object.freeze({__proto__:null,__DO_NOT_USE__ActionTypes:Z,applyMiddleware:se,bindActionCreators:function(e,t){if("function"==typeof e)return re(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in e){var i=e[n];"function"==typeof i&&(r[n]=re(i,t))}return r},combineReducers:te,compose:oe,createStore:G});function ue(e,t){return e===t}function le(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,i=0;i<n;i++)if(!e(t[i],r[i]))return!1;return!0}function de(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}var fe=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=0,o=n.pop(),s=de(n),c=e.apply(void 0,[function(){return a++,o.apply(null,arguments)}].concat(r)),u=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=o,u.dependencies=s,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue,r=null,n=null;return function(){return le(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));function pe(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var he=pe();function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function be(e,t,r){return(be=ve()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&me(i,r.prototype),i}).apply(null,arguments)}function we(e){var t="function"==typeof Map?new Map:void 0;return(we=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return be(e,arguments,ye(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),me(n,e)})(e)}he.withExtraArgument=pe;var Se="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?oe:oe.apply(null,arguments)};var Oe=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.concat=function(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return be(n,(t=e.prototype.concat).call.apply(t,[this].concat(i)))},i.prepend=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])?be(n,t[0].concat(this)):be(n,t.concat(this))},n}(we(Array));function Ce(e){void 0===e&&(e={});var t=e,r=t.thunk,n=void 0===r||r;t.immutableCheck,t.serializableCheck;var i=new Oe;return n&&(!function(e){return"boolean"==typeof e}(n)?i.push(he.withExtraArgument(n.extraArgument)):i.push(he)),i}function qe(e){var t,r=function(e){return Ce(e)},n=e||{},i=n.reducer,a=void 0===i?void 0:i,o=n.middleware,s=void 0===o?r():o,c=n.devTools,u=void 0===c||c,l=n.preloadedState,d=void 0===l?void 0:l,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof a)t=a;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=te(a)}var h=se.apply(void 0,"function"==typeof s?s(r):s),g=oe;u&&(g=Se(ge({trace:!1},"object"==typeof u&&u)));var y=[h];return Array.isArray(p)?y=[h].concat(p):"function"==typeof p&&(y=p(y)),G(t,d,g.apply(void 0,y))}function Ie(e,t){function r(){if(t){var r=t.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return ge({type:e,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function xe(e,n,i,a){void 0===i&&(i=[]);var o="function"==typeof n?function(e){var t,r={},n=[],i={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,i},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[r,n,t]}(n):[n,i,a],s=o[0],c=o[1],u=o[2];return function(n,i){void 0===n&&(n=e);var a=[s[i.type]].concat(c.filter((function(e){return(0,e.matcher)(i)})).map((function(e){return e.reducer})));return 0===a.filter((function(e){return!!e})).length&&(a=[u]),a.reduce((function(e,n){if(n){if(t(e)){var a=n(e,i);return void 0===a?e:a}if(r(e))return W(e,(function(e){return n(e,i)}));var o=n(e,i);if(void 0===o){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return o}return e}),n)}}"undefined"==typeof Symbol||(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"==typeof Symbol||(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Re=["name","message","stack","code"],Ee=function(e){this.payload=e,this.name="RejectWithValue",this.message="Rejected"},Ae=function(e){if("object"==typeof e&&null!==e){var t={},r=Re,n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var o=a;"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}};function Fe(e,t,r){var n=Ie(e+"/fulfilled",(function(e,t,r){return{payload:e,meta:{arg:r,requestId:t,requestStatus:"fulfilled"}}})),i=Ie(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e,requestStatus:"pending"}}})),a=Ie(e+"/rejected",(function(e,t,n){var i=e instanceof Ee,a=!!e&&"AbortError"===e.name,o=!!e&&"ConditionError"===e.name;return{payload:e instanceof Ee?e.payload:void 0,error:(r&&r.serializeError||Ae)(e||"Rejected"),meta:{arg:n,requestId:t,rejectedWithValue:i,requestStatus:"rejected",aborted:a,condition:o}}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,c,u){var l,d=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new o,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),h=!1;var g=function(){try{var o,l=function(e){return g?e:(r&&!r.dispatchConditionRejection&&a.match(o)&&o.meta.condition||s(o),o)},g=!1,y=function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){if(r&&r.condition&&!1===r.condition(e,{getState:c,extra:u}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return h=!0,s(i(d,e)),Promise.resolve(Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:c,extra:u,requestId:d,signal:f.signal,rejectWithValue:function(e){return new Ee(e)}})).then((function(t){return t instanceof Ee?a(t,d,e):n(t,d,e)}))])).then((function(e){o=e}))}),(function(t){o=a(t,d,e)}));return Promise.resolve(y&&y.then?y.then(l):l(y))}catch(e){return Promise.reject(e)}}();return Object.assign(g,{abort:function(e){h&&(l=e,f.abort())},requestId:d,arg:e})}}),{pending:i,rejected:a,fulfilled:n,typePrefix:e})}!function(){function e(e,t){var r=c[e];return r?r.enumerable=t:c[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[N];return H.get(t,e)},set:function(t){var r=this[N];H.set(r,e,t)}},r}function r(e){for(var t=e.length-1;t>=0;t--){var r=e[t][N];if(!r.P)switch(r.i){case 5:o(r)&&E(r);break;case 4:i(r)&&E(r)}}}function i(e){for(var t=e.t,r=e.k,n=z(r),i=n.length-1;i>=0;i--){var o=n[i];if(o!==N){var c=t[o];if(void 0===c&&!a(t,o))return!0;var u=r[o],l=u&&u[N];if(l?l.t!==c:!s(u,c))return!0}}var d=!!t[N];return n.length!==z(t).length+(d?0:1)}function o(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var c={};!function(e,t){Q[e]||(Q[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var a=U(r);delete a[N];for(var o=z(a),s=0;s<o.length;s++){var c=o[s];a[c]=e(c,t||!!a[c].enumerable)}return Object.create(Object.getPrototypeOf(r),a)}(n,t),a={i:n?5:4,A:r?r.A:y(),P:!1,I:!1,D:{},l:r,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,N,{value:a,writable:!0}),i},S:function(e,i,s){s?t(i)&&i[N].A===e&&r(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[N];if(r){var i=r.t,s=r.k,c=r.D,u=r.i;if(4===u)n(s,(function(t){t!==N&&(void 0!==i[t]||a(i,t)?c[t]||e(s[t]):(c[t]=!0,E(r)))})),n(i,(function(e){void 0!==s[e]||a(s,e)||(c[e]=!1,E(r))}));else if(5===u){if(o(r)&&(E(r),c.length=!0),s.length<i.length)for(var l=s.length;l<i.length;l++)c[l]=!1;else for(var d=i.length;d<s.length;d++)c[d]=!0;for(var f=Math.min(s.length,i.length),p=0;p<f;p++)void 0===c[p]&&e(s[p])}}}}(e.p[0]),r(e.p))},K:function(e){return 4===e.i?i(e):o(e)}})}();var je=fetch,ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Pe(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function Te(e){var t={exports:{}};return e(t,t.exports),t.exports}var Ve=ke&&ke.__assign||function(){return(Ve=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Me={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};var De=function(e){var t=Ve(Ve({},Me),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t},_e=Object.defineProperty({getSanitizedOptions:De},"__esModule",{value:!0});var $e=function(e){var t=Math.random()*e;return Math.round(t)},Le=Object.defineProperty({fullJitter:$e},"__esModule",{value:!0});var Ne=function(e){return e},ze=Object.defineProperty({noJitter:Ne},"__esModule",{value:!0});var Ue,Qe=function(e){switch(e.jitter){case"full":return Le.fullJitter;case"none":default:return ze.noJitter}},He=Object.defineProperty({JitterFactory:Qe},"__esModule",{value:!0}),Be=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return He.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}(),Ye=Object.defineProperty({Delay:Be},"__esModule",{value:!0}),We=ke&&ke.__extends||(Ue=function(e,t){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ue(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Je=ke&&ke.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))},Ke=ke&&ke.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return We(t,e),t.prototype.apply=function(){return Je(this,void 0,void 0,(function(){return Ke(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(Ye.Delay),Xe=Object.defineProperty({SkipFirstDelay:Ze},"__esModule",{value:!0}),Ge=ke&&ke.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ge(t,e),t}(Ye.Delay),tt=Object.defineProperty({AlwaysDelay:et},"__esModule",{value:!0});var rt=function(e,t){var r=function(e){if(!e.delayFirstAttempt)return new Xe.SkipFirstDelay(e);return new tt.AlwaysDelay(e)}(e);return r.setAttemptNumber(t),r};var nt=Object.defineProperty({DelayFactory:rt},"__esModule",{value:!0}),it=ke&&ke.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))},at=ke&&ke.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};var ot=function(e,t){return void 0===t&&(t={}),it(this,void 0,void 0,(function(){var r;return at(this,(function(n){switch(n.label){case 0:return r=_e.getSanitizedOptions(t),[4,new st(e,r).execute()];case 1:return[2,n.sent()]}}))}))},st=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return it(this,void 0,void 0,(function(){var e;return at(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return it(this,void 0,void 0,(function(){return at(this,(function(e){switch(e.label){case 0:return[4,nt.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}();class ct extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}}class ut extends Error{constructor(){super(),this.name="Disconnected",this.message="Client is not connected to the internet."}}function lt(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function dt(e){return 429===e}class ft{static async call(e){const t=function(e){const{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,s=function(e,t){if("application/x-www-form-urlencoded"===t)return"object"==typeof(r=e)&&r&&Object.values(r).every(lt)?function(e){const t=[];for(const r in e){const n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}(e):"";var r;return JSON.stringify(e)}(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:"Bearer "+a,...e.headers},body:s,signal:o}}(e),{preprocessRequest:r,logger:n}=e,i={...t,...r?await r(t,"searchApiFetch"):{}};n.info(i,"Platform request");const{url:a,...o}=i,s=async()=>{const e=await je(a,o);if(dt(e.status))throw e;return e};try{const e=await ot(s,{retry:e=>{const t=e&&dt(e.status);return t&&n.info("Platform retrying request"),t}});if(419===e.status)throw n.info("Platform renewing token"),new ct;return n.info({response:e,requestInfo:i},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new ut:e}}}function pt(e){return`https://platform${e&&e.environment&&"prod"!==e.environment?e.environment:""}${e&&e.region&&"us-east-1"!==e.region?"-"+e.region:""}.cloud.coveo.com`}function ht(e){if(e instanceof ut)return{error:{statusCode:0,type:"Disconnected",message:"Could not connect"}};throw e}const gt=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${yt(e)}`}),yt=e=>"organizationId="+e.organizationId;const mt=TextDecoder;class vt extends Error{constructor(e){super(e),this.name="SchemaValidationError"}}class bt{constructor(e){this.definition=e}validate(e={},t=""){const r={...this.default,...e},n=[];for(const e in this.definition){const t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw function(e,t){const r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new vt(r)}(n,t);return r}get default(){const e={};for(const t in this.definition){const r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}}class wt{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&Ot(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}}function St(e){return void 0===e}function Ot(e){return St(e)||function(e){return null===e}(e)}class Ct{constructor(e={}){this.config=e,this.value=new wt(e)}validate(e){return this.value.validate(e)||(function(e){return St(e)||qt(e)}(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}}function qt(e){return"number"==typeof e&&!isNaN(e)}class It{constructor(e={}){this.value=new wt(e)}validate(e){return this.value.validate(e)||(function(e){return St(e)||xt(e)}(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}}function xt(e){return"boolean"==typeof e}const Rt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;class Et{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new wt(this.config)}validate(e){const{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config,a=this.value.validate(e);return a||(St(e)?null:At(e)?t||e.length?r&&!Rt.test(e)?"value is not a valid URL.":n&&!n.test(e)?"value did not match provided regex "+n:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}}function At(e){return"[object String]"===Object.prototype.toString.call(e)}class Ft{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(St(e))return this.config.options.required?"value is required and is currently undefined":null;if(!jt(e))return"value is not an object";for(const[t,r]of Object.entries(this.config.values))if(r.required&&Ot(e[t]))return"value does not contain "+t;let t="";for(const[r,n]of Object.entries(this.config.values)){const i=e[r],a=n.validate(i);null!==a&&(t+=" "+a)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}}function jt(e){return void 0!==e&&"object"==typeof e}class kt{constructor(e={}){this.config=e,this.value=new wt(this.config)}validate(e){if(!Ot(e)&&!Array.isArray(e))return"value is not an array";const t=this.value.validate(e);if(null!==t)return t;if(Ot(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return"value contains more than "+this.config.max;if(void 0!==this.config.min&&e.length<this.config.min)return"value contains less than "+this.config.min;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&Ot(r)&&(t="value is null or undefined: "+e.join(","));const n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return xt(e)||At(e)||qt(e)||jt(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}}function Pt(e){return Array.isArray(e)}class Tt{constructor(e){this.config=e,this.value=new wt(e)}validate(e){const t=this.value.validate(e);return null!==t?t:St(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}}class Vt{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){const t=await ft.call({...gt(e,"POST","application/json","/plan"),requestParams:zt(e),...this.options});if(t instanceof Error)return ht(t);const r=await t.json();return function(e){return void 0!==e.preprocessingOutput}(r)?{success:r}:{error:Mt({response:t,body:r})}}async querySuggest(e){const t=await ft.call({...gt(e,"POST","application/json","/querySuggest"),requestParams:zt(e),...this.options});if(t instanceof Error)return ht(t);const r=await t.json(),n={response:t,body:r};if(function(e){return void 0!==e.completions}(r)){return{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}}return{error:Mt(n)}}async search(e){var t;this.searchAbortController&&(this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();const r=await ft.call({...gt(e,"POST","application/json",""),requestParams:zt(e),...this.options,signal:null===(t=this.searchAbortController)||void 0===t?void 0:t.signal});if(r instanceof Error)return ht(r);this.searchAbortController=null;const n=await r.json(),i={response:r,body:n};if(Nt(n)){i.body=function(e){const t={answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0};if(Ot(e.questionAnswer))return e.questionAnswer=t,e;return e.questionAnswer={...t,...e.questionAnswer},e}(n);return{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}}return{error:Mt(i)}}async facetSearch(e){const t=await ft.call({...gt(e,"POST","application/json","/facet"),requestParams:zt(e),...this.options});if(t instanceof Error)throw t;const r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){const t=await ft.call({...gt(e,"POST","application/json",""),requestParams:zt(e),...this.options});if(t instanceof Error)throw t;const r=await t.json();return Nt(r)?{success:r}:{error:Mt({response:t,body:r})}}async html(e){const t=await ft.call({...gt(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:zt(e),...this.options});if(t instanceof Error)throw t;const r=function(e){return((e.headers.get("content-type")||"").split(";").find((e=>-1!==e.indexOf("charset=")))||"").split("=")[1]||"UTF-8"}(t),n=await t.arrayBuffer(),i=new mt(r).decode(n);return function(e){return"string"==typeof e}(i)?{success:i}:{error:Mt({response:t,body:i})}}async productRecommendations(e){const t=await ft.call({...gt(e,"POST","application/json",""),requestParams:zt(e),...this.options});if(t instanceof Error)throw t;const r=await t.json();return Nt(r)?{success:r}:{error:Mt({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){if("undefined"==typeof window){return new(require("node-abort-controller"))}return"undefined"==typeof AbortController?null:new AbortController}}const Mt=e=>{const{response:t}=e;return t.body?Dt(e):_t(t)},Dt=e=>function(e){return void 0!==e.body.exception}(e)?$t(e):function(e){return void 0!==e.body.statusCode}(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},_t=e=>{const t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:"Client side error: "+(t.message||""),statusCode:400,type:"ClientError"}},$t=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Lt=e=>void 0!==e.error;function Nt(e){return void 0!==e.results}function zt(e){const{url:t,accessToken:r,organizationId:n,...i}=e;return i}const Ut=e=>e,Qt=e=>e,Ht=e=>e,Bt=new Et({required:!0,emptyAllowed:!1}),Yt=new Et({required:!0,emptyAllowed:!0}),Wt=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Jt=(e,t)=>"required"in t?{payload:new bt({value:t}).validate({value:e}).value}:{payload:new bt(t).validate(e)},Kt=(e,t)=>{try{return Jt(e,t)}catch(t){return{payload:e,error:Wt(t)}}},Zt=(e,t,r,n)=>Gt(e,t,r,"Check the initialState of "+n,"Controller initialization error"),Xt=(e,t,r,n)=>Gt(e,t,r,"Check the options of "+n,"Controller initialization error"),Gt=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}},er=new Et({emptyAllowed:!1,required:!1}),tr=()=>new Et({emptyAllowed:!1,required:!1}),rr=()=>new Et({emptyAllowed:!1,required:!0}),nr=Ie("configuration/updateBasicConfiguration",(e=>Kt(e,{accessToken:new Et({emptyAllowed:!1}),organizationId:new Et({emptyAllowed:!1}),platformUrl:new Et({url:!0,emptyAllowed:!1})}))),ir=Ie("configuration/updateSearchConfiguration",(e=>Kt(e,{apiBaseUrl:new Et({url:!0,emptyAllowed:!1}),pipeline:new Et({emptyAllowed:!1}),searchHub:new Et({emptyAllowed:!1}),locale:er}))),ar=Ie("configuration/updateAnalyticsConfiguration",(e=>Kt(e,{enabled:new It({default:!0}),originLevel2:tr(),originLevel3:tr(),apiBaseUrl:new Et({url:!0,emptyAllowed:!1}),runtimeEnvironment:new wt}))),or=Ie("configuration/analytics/disable"),sr=Ie("configuration/analytics/enable"),cr=Ie("configuration/analytics/originlevel2",(e=>Kt(e,{originLevel2:rr()}))),ur=Ie("configuration/analytics/originlevel3",(e=>Kt(e,{originLevel3:rr()})));const lr=e=>()=>t=>r=>{if(!r.error)return t(r);const n=r.error;return e.error(n.stack||n.message||n.name||"Error","Action dispatch error "+r.type,r),"SchemaValidationError"!==r.error.name?t(r):void 0},dr=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},"Action dispatched: "+n.type),r(n));const fr=Ie("history/undo"),pr=Ie("history/redo"),hr=Ie("history/snapshot"),gr=Fe("history/back",(async(e,{dispatch:t})=>{t(fr()),await t(mr())})),yr=Fe("history/forward",(async(e,{dispatch:t})=>{t(pr()),await t(mr())})),mr=Fe("history/change",(async(e,{getState:t})=>t().history.present)),vr=Ie("advancedSearchQueries/update",(e=>Kt(e,{aq:new Et({required:!1,emptyAllowed:!0}),cq:new Et({required:!1,emptyAllowed:!0})}))),br=Ie("advancedSearchQueries/register",(e=>Kt(e,{aq:new Et({required:!1,emptyAllowed:!0}),cq:new Et({required:!1,emptyAllowed:!0})}))),wr={q:new Et,enableQuerySyntax:new It,aq:new Et,cq:new Et,firstResult:new Ct({min:0}),numberOfResults:new Ct({min:0}),sortCriteria:new Et,f:new Ft,cf:new Ft,nf:new Ft,df:new Ft,debug:new It},Sr=Ie("searchParameters/restore",(e=>Kt(e,wr))),Or=xe({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,defaultFilters:{cq:"",aq:""}},(e=>{e.addCase(vr,((e,t)=>{const{aq:r,cq:n}=t.payload;St(r)||(e.aq=r,e.aqWasSet=!0),St(n)||(e.cq=n,e.cqWasSet=!0)})).addCase(br,((e,t)=>{const{aq:r,cq:n}=t.payload;St(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),St(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n))})).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.advancedSearchQueries)&&void 0!==n?n:e})).addCase(Sr,((e,t)=>{const{aq:r,cq:n}=t.payload;St(r)||(e.aq=r,e.aqWasSet=!0),St(n)||(e.cq=n,e.cqWasSet=!0)}))})),Cr=()=>({organizationId:"",accessToken:"",platformUrl:pt(),search:{apiBaseUrl:pt()+"/rest/search/v2",locale:"en-US"},analytics:{enabled:!0,apiBaseUrl:pt()+"/rest/ua",originLevel2:"default",originLevel3:"default"}}),qr=xe(Cr(),(e=>e.addCase(nr,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=t.payload.platformUrl+"/rest/search/v2",e.analytics.apiBaseUrl=t.payload.platformUrl+"/rest/ua")})).addCase(ir,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale)})).addCase(ar,((e,t)=>{void 0!==t.payload.enabled&&(e.analytics.enabled=t.payload.enabled),void 0!==t.payload.originLevel2&&(e.analytics.originLevel2=t.payload.originLevel2),void 0!==t.payload.originLevel3&&(e.analytics.originLevel3=t.payload.originLevel3),void 0!==t.payload.apiBaseUrl&&(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),void 0!==t.payload.runtimeEnvironment&&(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment)})).addCase(or,(e=>{e.analytics.enabled=!1})).addCase(sr,(e=>{e.analytics.enabled=!0})).addCase(cr,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(ur,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})))),Ir=new kt({each:Bt,required:!0}),xr=(e,t)=>(Kt(e,Bt),At(t)?Kt(t,Bt):Kt(t,Ir),{payload:{contextKey:e,contextValue:t}}),Rr=Ie("context/set",(e=>{for(const[t,r]of Object.entries(e))xr(t,r);return{payload:e}})),Er=Ie("context/add",(e=>xr(e.contextKey,e.contextValue))),Ar=Ie("context/remove",(e=>Kt(e,Bt)));const Fr=xe({contextValues:{}},(e=>{e.addCase(Rr,((e,t)=>{e.contextValues=t.payload})).addCase(Er,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(Ar,((e,t)=>{delete e.contextValues[t.payload]})).addCase(mr.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)}))})),jr=Ie("debug/enable"),kr=Ie("debug/disable"),Pr=xe(!1,(e=>{e.addCase(jr,(()=>!0)).addCase(kr,(()=>!1)).addCase(Sr,((e,t)=>{var r;return null!==(r=t.payload.debug)&&void 0!==r?r:e}))})),Tr="1.7.0",Vr=xe("1.7.0",(e=>e)),Mr=Ie("didYouMean/enable"),Dr=Ie("didYouMean/disable"),_r=Ie("didYouMean/correction",(e=>Kt(e,Bt)));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function $r(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function Lr(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))}var Nr;!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(Nr||(Nr={}));const zr=window.fetch;class Ur{constructor(e){this.opts=e}sendEvent(e,t){return Lr(this,void 0,void 0,(function*(){const{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:c}=s,u=$r(s,["url"]),l=yield zr(c,u);if(l.ok){const e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{l.json()}catch(e){}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}shouldAppendVisitorId(e){return-1!==[Nr.click,Nr.custom,Nr.search,Nr.view].indexOf(e)}getVisitorIdParam(){return Lr(this,void 0,void 0,(function*(){const{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?"?visitor="+t:""}))}getHeaders(){const{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:"Bearer "+e}:{}),{"Content-Type":"application/json"})}}function Qr(){return"undefined"!=typeof navigator}function Hr(){return"undefined"!=typeof document}function Br(){return"undefined"!=typeof localStorage}function Yr(){return Qr()&&navigator.cookieEnabled}function Wr(){return"undefined"!=typeof crypto&&void 0!==crypto.getRandomValues}const Jr=[Nr.click,Nr.custom,Nr.search,Nr.view],Kr=(e,t)=>-1!==Jr.indexOf(e)?Object.assign({language:Hr()?document.documentElement.lang:"unknown",userAgent:Qr()?navigator.userAgent:"unknown"},t):t;class Zr{static set(e,t,r){var n,i,a,o;r?((i=new Date).setTime(i.getTime()+r),a="; expires="+i.toGMTString()):a="",-1===(o=location.hostname).indexOf(".")?document.cookie=e+"="+t+a+"; path=/":((n=o.split(".")).shift(),Xr({name:e,value:t,expires:a,domain:"."+n.join(".")}),null!=Zr.get(e)&&Zr.get(e)==t||Xr({name:e,value:t,expires:a,domain:"."+o}))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(0==(i=i.replace(/^\s+/,"")).indexOf(t))return i.substring(t.length,i.length)}return null}static erase(e){Zr.set(e,"",-1)}}function Xr(e){const{name:t,value:r,expires:n,domain:i}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${i}; SameSite=Lax`}function Gr(){return Br()?localStorage:Yr()?new en:"undefined"!=typeof sessionStorage?sessionStorage:new rn}class en{getItem(e){return Zr.get(`${en.prefix}${e}`)}removeItem(e){Zr.erase(`${en.prefix}${e}`)}setItem(e,t){Zr.set(`${en.prefix}${e}`,t)}}en.prefix="coveo_";class tn{constructor(){this.cookieStorage=new en}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}}class rn{getItem(e){return null}removeItem(e){}setItem(e,t){}}const nn="__coveo.analytics.history";class an{constructor(e){this.store=e||Gr()}addElement(e){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Lr(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){const e=this.getHistoryWithInternalTime();return this.stripInternalTime(e)}getHistoryAsync(){return Lr(this,void 0,void 0,(function*(){const e=yield this.getHistoryWithInternalTimeAsync();return this.stripInternalTime(e)}))}getHistoryWithInternalTime(){try{const e=this.store.getItem(nn);return e&&"string"==typeof e?JSON.parse(e):[]}catch(e){return[]}}getHistoryWithInternalTimeAsync(){return Lr(this,void 0,void 0,(function*(){try{const e=yield this.store.getItem(nn);return e?JSON.parse(e):[]}catch(e){return[]}}))}setHistory(e){try{this.store.setItem(nn,JSON.stringify(e.slice(0,20)))}catch(e){}}clear(){try{this.store.removeItem(nn)}catch(e){}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();if(null!=e){return e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]}return null}cropQueryElement(e){e.name&&"query"==e.name.toLowerCase()&&null!=e.value&&(e.value=e.value.slice(0,75))}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return e.map((e=>{const{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}}))}}var on=Object.freeze({__proto__:null,STORE_KEY:nn,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,MAX_VALUE_SIZE:75,HistoryStore:an,default:an});const sn=(e,t)=>Lr(void 0,void 0,void 0,(function*(){return e===Nr.view?(yield cn(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),cn=e=>Lr(void 0,void 0,void 0,(function*(){const t=new an,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)})),un=e=>e?(Number(e)^ln(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,un),ln=e=>{if(Wr())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)0==(3&t)&&(r=4294967296*Math.random()),e[t]=r>>>((3&t)<<3)&255;return e},dn=Object.keys,fn={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},pn=[...dn(fn).map((e=>fn[e]))].join("|"),hn=new RegExp(`^(${pn}$)`),gn=[e=>hn.test(e)],yn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},mn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr"},vn={action:"pa",list:"pal",listSource:"pls"},bn={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},wn={id:"quoteId",affiliation:"quoteAffiliation"},Sn={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},On={add:vn,bookmark_add:vn,bookmark_remove:vn,click:vn,checkout:vn,checkout_option:vn,detail:vn,impression:vn,remove:vn,refund:Object.assign(Object.assign({},vn),bn),purchase:Object.assign(Object.assign({},vn),bn),quickview:vn,quote:Object.assign(Object.assign({},vn),wn),review:Object.assign(Object.assign({},vn),Sn)},Cn=dn(yn).map((e=>yn[e])),qn=dn(mn).map((e=>mn[e])),In=dn(vn).map((e=>vn[e])),xn=dn(bn).map((e=>bn[e])),Rn=dn(Sn).map((e=>Sn[e])),En=dn(wn).map((e=>wn[e])),An=[...Cn,"custom"].join("|"),Fn=[...qn,"custom"].join("|"),jn=new RegExp(`^(pr[0-9]+)(${An})$`),kn=new RegExp(`^((il[0-9]+pi[0-9]+)(${Fn}))|(il[0-9]+nm)$`),Pn=new RegExp(`^(${In.join("|")})$`),Tn=new RegExp(`^(${xn.join("|")})$`),Vn=new RegExp("^(pr[0-9]+)custom$"),Mn=new RegExp("^(il[0-9]+pi[0-9]+)custom$"),Dn=new RegExp(`^(${["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...Rn,...En].join("|")})$`),_n=[e=>kn.test(e),e=>jn.test(e),e=>Pn.test(e),e=>Tn.test(e),e=>Dn.test(e)],$n=[Vn,Mn],Ln=Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),Nn=Object.assign(Object.assign({},Ln),{svcAction:"svc_action",svcActionData:"svc_action_data"}),zn=dn(Nn).map((e=>Nn[e])),Un=e=>-1!==zn.indexOf(e),Qn=e=>"custom"===e,Hn=e=>{let t=void 0;return[...$n].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},Bn=(e,t)=>dn(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{});class Yn{constructor(e){this.opts=e}sendEvent(e,t){return Lr(this,void 0,void 0,(function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');const{baseUrl:r,preprocessRequest:n}=this.opts,i=this.encodeForEventType(e,t),a=yield this.getQueryParamsForEventType(e),o={url:`${r}/analytics/${e}?${a}`,body:new Blob([i],{type:"application/x-www-form-urlencoded"})},{url:s,body:c}=Object.assign(Object.assign({},o),n?yield n(o,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,c)}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return Lr(this,void 0,void 0,(function*(){const{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?"access_token="+t:"",n?"visitorId="+n:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[Nr.click,Nr.custom,Nr.search,Nr.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}}class Wn{sendEvent(e,t){return Lr(this,void 0,void 0,(function*(){return Promise.resolve()}))}}class Jn{constructor(e,t){Br()&&Yr()?this.storage=new tn:Br()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new rn),this.beaconClient=new Yn(e),window.addEventListener("beforeunload",(()=>t()))}}class Kn{constructor(e,t){this.storage=t||new rn,this.beaconClient=new Ur(e)}}class Zn{constructor(){this.storage=new rn,this.beaconClient=new Wn}}const Xn="https://analytics.cloud.coveo.com/rest/ua";class Gn{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[sn,Kr].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};const t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.analyticsFetchClient=new Ur(t)}get defaultOptions(){return{endpoint:Xn,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return"undefined"!=typeof window&&Hr()?new Jn(e,(()=>this.flushBufferWithBeacon())):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please install @react-native-async-storage/async-storage and instantiate \n        your analytics client as follows:\n        \n        import {ReactNativeRuntime} from 'coveo.analytics/react-native';\n        \n        const analytics = new CoveoAnalytics({\n            ...your options,\n            runtimeEnvironment: new ReactNativeRuntime();\n        })\n    "),new Kn(e))}get analyticsBeaconClient(){return this.runtime.beaconClient}get storage(){return this.runtime.storage}determineVisitorId(){return Lr(this,void 0,void 0,(function*(){try{return(yield this.storage.getItem("visitorId"))||un()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),un()}}))}getCurrentVisitorId(){return Lr(this,void 0,void 0,(function*(){if(!this.visitorId){const e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Lr(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}getParameters(e,...t){return Lr(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Lr(this,void 0,void 0,(function*(){const r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(un()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return Lr(this,void 0,void 0,(function*(){const{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Lr(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Lr(this,void 0,void 0,(function*(){const n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Lr(this,void 0,void 0,(function*(){const r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Lr(this,void 0,void 0,(function*(){const{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[t=>this.removeEmptyPayloadValues(t,e),e=>this.validateParams(e),e=>r?(e=>{const t=!!e.action&&On[e.action]||{};return dn(e).reduce(((r,n)=>{const i=t[n]||Nn[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})})(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):e].reduce(((e,t)=>Lr(this,void 0,void 0,(function*(){const r=yield e;return yield t(r)}))),Promise.resolve(t))}))}sendEvent(e,...t){return Lr(this,void 0,void 0,(function*(){const{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:i,handled:!1}),yield Promise.all(this.afterSendHooks.map((t=>t(e,n)))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}flushBufferWithBeacon(){for(;this.hasPendingRequests();){const{eventType:e,payload:t}=this.bufferedRequests.pop();this.analyticsBeaconClient.sendEvent(e,t)}}sendFromBufferWithFetch(){return Lr(this,void 0,void 0,(function*(){const e=this.bufferedRequests.shift();if(e){const{eventType:t,payload:r}=e;return this.analyticsFetchClient.sendEvent(t,r)}}))}hasPendingRequests(){return this.bufferedRequests.length>0}clear(){this.storage.removeItem("visitorId");(new an).clear()}sendSearchEvent(e){return Lr(this,void 0,void 0,(function*(){return this.sendEvent(Nr.search,e)}))}sendClickEvent(e){return Lr(this,void 0,void 0,(function*(){return this.sendEvent(Nr.click,e)}))}sendCustomEvent(e){return Lr(this,void 0,void 0,(function*(){return this.sendEvent(Nr.custom,e)}))}sendViewEvent(e){return Lr(this,void 0,void 0,(function*(){return this.sendEvent(Nr.view,e)}))}getVisit(){return Lr(this,void 0,void 0,(function*(){const e=yield fetch(this.baseUrl+"/analytics/visit"),t=yield e.json();return this.visitorId=t.visitorId,t}))}getHealth(){return Lr(this,void 0,void 0,(function*(){const e=yield fetch(this.baseUrl+"/analytics/monitoring/health");return yield e.json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){const r={};for(let n=0,i=t.length;n<i;n++){const i=t[n];if("string"==typeof i)r[e[n]]=i;else if("object"==typeof i)return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return-1!==({[Nr.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>{return this.isKeyAllowedEmpty(t,r)||null!=(n=e[r])&&""!==n;var n})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if((e=>[..._n,...gn,Un,Qn].some((t=>t(e))))(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){const{custom:t}=e,r=$r(e,["custom"]),n=this.lowercaseKeys(t),i=dn(a=r).reduce(((e,t)=>{const r=Hn(t);return r?Object.assign(Object.assign({},e),Bn(r,a[t])):Object.assign(Object.assign({},e),{[t]:a[t]})}),{});var a;return Object.assign(Object.assign({},n),i)}lowercaseKeys(e){return Object.keys(e||{}).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]})),{})}validateParams(e){const{anonymizeIp:t}=e,r=$r(e,["anonymizeIp"]);return void 0!==t&&-1==["0","false","undefined","null","{}","[]",""].indexOf((""+t).toLowerCase())&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){const{userId:t}=e,r=$r(e,["userId"]);return(null==(n=this.options.token)?void 0:n.startsWith("xx"))&&!t?(r.userId="anonymous",r):e;var n}get baseUrl(){const{version:e,endpoint:t}=this.options,r=-1!==t.indexOf(".cloud.coveo.com");return`${t}${r?"":"/rest"}/${e}`}}var ei;!function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion"}(ei||(ei={}));const ti={[ei.triggerNotify]:"queryPipelineTriggers",[ei.triggerExecute]:"queryPipelineTriggers",[ei.triggerQuery]:"queryPipelineTriggers",[ei.triggerRedirect]:"queryPipelineTriggers",[ei.queryError]:"errors",[ei.queryErrorBack]:"errors",[ei.queryErrorClear]:"errors",[ei.queryErrorRetry]:"errors",[ei.pagerNext]:"getMoreResults",[ei.pagerPrevious]:"getMoreResults",[ei.pagerNumber]:"getMoreResults",[ei.pagerResize]:"getMoreResults",[ei.pagerScrolling]:"getMoreResults",[ei.facetSearch]:"facet",[ei.facetShowLess]:"facet",[ei.facetShowMore]:"facet",[ei.recommendation]:"recommendation",[ei.likeSmartSnippet]:"smartSnippet",[ei.dislikeSmartSnippet]:"smartSnippet",[ei.expandSmartSnippet]:"smartSnippet",[ei.collapseSmartSnippet]:"smartSnippet",[ei.openSmartSnippetFeedbackModal]:"smartSnippet",[ei.closeSmartSnippetFeedbackModal]:"smartSnippet",[ei.sendSmartSnippetReason]:"smartSnippet",[ei.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[ei.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions"};var ri;!function(e){e.DoesNotAnswer="does_not_answer",e.PartiallyAnswers="partially_answers",e.WasNotAQuestion="was_not_a_question",e.Other="other"}(ri||(ri={}));class ni{constructor(){this.runtime=new Zn,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}}function ii(e){const t=e.join(";");return t.length<=256?t:ii(e.slice(1))}const ai=e=>ii(function(e){let t="";return e.filter((e=>{const r=e!==t;return t=e,r}))}(function(e){return e.map((e=>e.replace(/;/g,"")))}(e)));function oi(e){const t="string"==typeof e.partialQueries?e.partialQueries:ai(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:ai(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}class si{constructor(e,t){this.opts=e,this.provider=t,this.coveoAnalyticsClient=!1===e.enableAnalytics?new ni:new Gn(e)}disable(){this.coveoAnalyticsClient instanceof Gn&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ni}enable(){this.coveoAnalyticsClient=new Gn(this.opts)}logInterfaceLoad(){return this.logSearchEvent(ei.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(ei.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(ei.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(ei.recommendationOpen,e,t)}logFetchMoreResults(){return this.logCustomEvent(ei.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(ei.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(ei.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(ei.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(ei.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(ei.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(ei.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(ei.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(ei.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(ei.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(ei.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(ei.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(ei.omniboxAnalytics,oi(e))}logOmniboxFromLink(e){return this.logSearchEvent(ei.omniboxFromLink,oi(e))}logSearchFromLink(){return this.logSearchEvent(ei.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(ei.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(ei.triggerExecute,e)}logTriggerQuery(){const e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(ei.triggerQuery,e)}logTriggerRedirect(e){const t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(ei.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(ei.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(ei.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(ei.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(ei.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(ei.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(ei.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(ei.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(ei.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(ei.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(ei.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(ei.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(ei.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(ei.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(ei.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(ei.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(ei.queryError,e)}logQueryErrorBack(){return Lr(this,void 0,void 0,(function*(){return yield this.logCustomEvent(ei.queryErrorBack),this.logSearchEvent(ei.queryErrorBack)}))}logQueryErrorRetry(){return Lr(this,void 0,void 0,(function*(){return yield this.logCustomEvent(ei.queryErrorRetry),this.logSearchEvent(ei.queryErrorRetry)}))}logQueryErrorClear(){return Lr(this,void 0,void 0,(function*(){return yield this.logCustomEvent(ei.queryErrorClear),this.logSearchEvent(ei.queryErrorClear)}))}logLikeSmartSnippet(){return this.logCustomEvent(ei.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(ei.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(ei.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(ei.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(ei.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(ei.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(ei.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(ei.expandSmartSnippetSuggestion,{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(ei.collapseSmartSnippetSuggestion,{documentId:e})}logCustomEvent(e,t){const r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},this.getBaseCustomEventRequest(r)),{eventType:ti[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)}logCustomEventWithType(e,t,r){const n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(i)}logSearchEvent(e,t){return this.coveoAnalyticsClient.sendSearchEvent(this.getBaseSearchEventRequest(e,t))}logClickEvent(e,t,r,n){const i=Object.assign(Object.assign(Object.assign({},t),this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(i)}getBaseSearchEventRequest(e,t){return Object.assign(Object.assign(Object.assign({},this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})}getBaseCustomEventRequest(e){return Object.assign(Object.assign({},this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})}getBaseEventRequest(e){const t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[]})}getOrigins(){return{originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}}const ci=e=>{const t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"};const ui=(e,t)=>e.search.response.facets.find((e=>e.facetId===t)),li=(e,t)=>e.facetSet[t];const di=(e,t)=>{const r=ui(e,t);if(function(e,t){return!!t&&t.facetId in e.facetSet}(e,r))return r},fi=(e,t)=>{const r=di(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]};function pi(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;const n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}const hi=(e,t)=>{const r=ui(e,t);if(function(e,t){return!!t&&t.facetId in e.categoryFacetSet}(e,r))return r},gi=(e,t)=>{const r=hi(e,t);return pi(null==r?void 0:r.values).parents},yi=(e,t)=>{const r=Ii(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:`${n}_${e}`}};function mi(e,t){const{facetId:r,facetValue:n}=e;return{...yi(r,t),facetValue:"hierarchical"===xi(t,r)?Oi(t,r):n}}function vi(e){return{facetSet:e.facetSet||{},categoryFacetSet:e.categoryFacetSet||{},dateFacetSet:e.dateFacetSet||{},numericFacetSet:e.numericFacetSet||{},search:e.search||{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[]}}}const bi=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),wi=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Si=e=>({displayValue:e.value,value:e.value}),Oi=(e,t)=>gi(e,t).map((e=>e.value)).join(";"),Ci=(e,t)=>{const r=Oi(e,t);return{value:r,valuePosition:1,displayValue:r}},qi=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),Ii=(e,t)=>{var r;return e.facetSet[t]||(null===(r=e.categoryFacetSet[t])||void 0===r?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},xi=(e,t)=>{const r=Ii(e,t);return r?r.type:"specific"};class Ri{constructor(e){this.state=e}getLanguage(){return ci(this.state)}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults,getBaseMetadata:this.getBaseMetadata()}}getBaseMetadata(){const{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(const[e,n]of Object.entries(t)){r["context_"+e]=n}return r}getSearchUID(){var e,t;return(null===(e=this.state.search)||void 0===e?void 0:e.response.searchUid)||(null===(t=this.state.recommendation)||void 0===t?void 0:t.searchUid)||""}getPipeline(){return this.state.pipeline||"default"}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}getFacetState(){return(e=>{const t=[];return e.search.response.facets.forEach(((r,n)=>{const i=xi(e,r.facetId),a=qi(r,n+1);if("hierarchical"!==i)r.values.forEach(((e,r)=>{if("idle"===e.state)return;const n=bi(e,r+1,i),o="specific"===i?Si(e):wi(e);t.push({...a,...n,...o})}));else{if(!gi(e,r.facetId).length)return;t.push({...a,...Ci(e,r.facetId),facetType:i,state:"selected"})}})),t})(vi(this.state))}mapResultsToAnalyticsDocument(){var e;return null===(e=this.state.search)||void 0===e?void 0:e.response.results.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get queryText(){var e;return(null===(e=this.state.query)||void 0===e?void 0:e.q)||""}get responseTime(){var e;return(null===(e=this.state.search)||void 0===e?void 0:e.duration)||0}get numberOfResults(){var e;return(null===(e=this.state.search)||void 0===e?void 0:e.response.results.length)||[].length}}const Ei=()=>new Gn({}).currentVisitorId,Ai=new on.HistoryStore;var Fi;!function(e){e[e.Search=0]="Search",e[e.Custom=1]="Custom",e[e.Click=2]="Click"}(Fi||(Fi={}));const ji=(e,t,r,n=(e=>new Ri(e)))=>Fe(e,(async(e,{getState:i,extra:{analyticsClientMiddleware:a,preprocessRequest:o,logger:s}})=>{const c=(e=>e())(i),u=(({logger:e,state:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Ri(t)})=>{const a=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,c=new si({token:a,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(t,r)=>(e.info({...r,type:t,endpoint:o,token:a},"Analytics request"),r)]},i);return!1===t.configuration.analytics.enabled&&c.disable(),c})({state:c,logger:s,analyticsClientMiddleware:a,preprocessRequest:o,provider:n(c)}),l=await r(u,c);return s.info({client:u.coveoAnalyticsClient,response:l},"Analytics response"),{analyticsType:t}})),ki=(e,t)=>{var r;const n=(null===(r=t.search)||void 0===r?void 0:r.response.results.findIndex((({uniqueId:t})=>e.uniqueId===t)))||0;return function(e,t,r){const n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:Mi(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Di(e),queryPipeline:r.pipeline||"default"}}(e,n,t)};const Pi=e=>({contentIDKey:"@permanentid",contentIDValue:e.raw.permanentid||""}),Ti={urihash:new Et,sourcetype:new Et,permanentid:new Et},Vi={uniqueId:Bt,raw:new Ft({values:Ti}),title:Bt,uri:Bt,clickUri:Bt,rankingModifier:new Et({required:!1,emptyAllowed:!0})};function Mi(e){const t=e.raw.author;return Ot(t)?"unknown":Array.isArray(t)?t.join(";"):""+t}function Di(e){const t=e.raw.source;return Ot(t)?"unknown":t}const _i=e=>new bt(Vi).validate(function(e){return Object.assign({},...Object.keys(Vi).map((t=>({[t]:e[t]}))),{raw:(t=e.raw,Object.assign({},...Object.keys(Ti).map((e=>({[e]:t[e]})))))});var t}(e)),$i=ji("analytics/didyoumean/click",Fi.Search,(e=>e.logDidYouMeanClick())),Li=ji("analytics/didyoumean/automatic",Fi.Search,(e=>e.logDidYouMeanAutomatic())),Ni=Ie("query/updateQuery",(e=>Kt(e,{q:new Et,enableQuerySyntax:new It})));var zi,Ui;!function(e){e.Ascending="ascending",e.Descending="descending"}(zi||(zi={})),function(e){e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort"}(Ui||(Ui={}));const Qi=e=>{if(Pt(e))return e.map((e=>Qi(e))).join(",");switch(e.by){case Ui.Relevancy:case Ui.QRE:case Ui.NoSort:return e.by;case Ui.Date:return"date "+e.order;case Ui.Field:return`@${e.field} ${e.order}`;default:return""}},Hi=()=>({by:Ui.Relevancy}),Bi=e=>({by:Ui.Date,order:e}),Yi=(e,t)=>({by:Ui.Field,order:t,field:e}),Wi=()=>({by:Ui.QRE}),Ji=()=>({by:Ui.NoSort}),Ki=new Ft({values:{by:new Tt({enum:Ui,required:!0}),order:new Tt({enum:zi}),field:new Et}});function Zi(){return Qi(Hi())}function Xi(){return Gi({})}function Gi(e){var t,r;return{context:e.context||{contextValues:{}},facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},pagination:e.pagination||{firstResult:0,numberOfResults:10,totalCountFiltered:0},query:e.query||{q:"",enableQuerySyntax:!1},advancedSearchQueries:e.advancedSearchQueries||{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,defaultFilters:{cq:"",aq:""}},querySet:e.querySet||{},sortCriteria:e.sortCriteria||Zi(),pipeline:e.pipeline||"default",searchHub:e.searchHub||"default",facetOptions:e.facetOptions||{freezeFacetOrder:!1},facetOrder:null!==(t=e.facetOrder)&&void 0!==t?t:[],debug:null!==(r=e.debug)&&void 0!==r&&r}}function ea(e,t){const r={};e.forEach((e=>r[e.facetId]=e));const n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));const i=Object.values(r);return[...n,...i]}const ta=ji("search/logFetchMoreResults",Fi.Search,(e=>e.logFetchMoreResults())),ra=e=>ji("search/queryError",Fi.Search,((t,r)=>{var n,i,a;return t.logQueryError({query:(null===(n=r.query)||void 0===n?void 0:n.q)||"",aq:(null===(i=r.advancedSearchQueries)||void 0===i?void 0:i.aq)||"",cq:(null===(a=r.advancedSearchQueries)||void 0===a?void 0:a.cq)||"",dq:"",errorType:e.type,errorMessage:e.message})}))(),na=async(e,t,r)=>{var n;const i=(new Date).getTime();return{response:await e.search(r),duration:(new Date).getTime()-i,queryExecuted:(null===(n=t.query)||void 0===n?void 0:n.q)||"",requestExecuted:r}},ia=Fe("search/executeSearch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{const a=t();pa(a);const o=await na(i.searchAPIClient,a,ua(a));if(Lt(o.response))return r(ra(o.response.error)),n(o.response.error);if(!ca(a,o.response.success))return r(hr(Gi(a))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:ha(a),analyticsAction:e};const{correctedQuery:s}=o.response.success.queryCorrections[0],c=await sa(i.searchAPIClient,s,t,r);if(Lt(c.response))return r(ra(c.response.error)),n(c.response.error);const u=o.response.success;return e(r,(()=>oa(o.queryExecuted,o.duration,a,u)),i),r(hr(Gi(t()))),{...c,response:{...c.response.success,queryCorrections:o.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:ha(a),analyticsAction:Li()}})),aa=Fe("search/fetchMoreResults",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{searchAPIClient:i}})=>{const a=t(),o=await na(i,a,la(a));return Lt(o.response)?(r(ra(o.response.error)),n(o.response.error)):(r(hr(Gi(a))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:ha(a),analyticsAction:ta()})})),oa=(e,t,r,n)=>{var i,a;return{...r,query:{q:e,enableQuerySyntax:null!==(a=null===(i=r.query)||void 0===i?void 0:i.enableQuerySyntax)&&void 0!==a&&a},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],duration:t,response:n,results:n.results}}},sa=async(e,t,r,n)=>{n(Ni({q:t}));const i=await na(e,r(),ua(r()));return n(_r(t)),i},ca=(e,t)=>{var r;return!0===(null===(r=e.didYouMean)||void 0===r?void 0:r.enableDidYouMean)&&0===t.results.length&&0!==t.queryCorrections.length},ua=e=>{var t;const r=function(e){var t;return ea(function(e){return[...fa(e.facetSet),...fa(e.numericFacetSet),...fa(e.dateFacetSet),...da(e.categoryFacetSet)]}(e),null!==(t=e.facetOrder)&&void 0!==t?t:[])}(e);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,...e.configuration.analytics.enabled&&{visitorId:Ei()},...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.context&&{context:e.context.contextValues},...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r.length&&{facets:r},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.facetOptions&&{facetOptions:e.facetOptions},...(null===(t=e.folding)||void 0===t?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}}},la=e=>{var t,r,n,i;return{...ua(e),firstResult:(null!==(r=null===(t=e.pagination)||void 0===t?void 0:t.firstResult)&&void 0!==r?r:0)+(null!==(i=null===(n=e.search)||void 0===n?void 0:n.results.length)&&void 0!==i?i:0)}};function da(e){return Object.values(e||{}).map((e=>e.request))}function fa(e={}){return Object.keys(e).map((t=>e[t]))}const pa=e=>{var t;e.configuration.analytics.enabled&&Ai.addElement({name:"Query",value:(null===(t=e.query)||void 0===t?void 0:t.q)||"",time:JSON.stringify(new Date)})},ha=e=>{var t;return void 0!==(null===(t=e.query)||void 0===t?void 0:t.q)?e.query.q:""};const ga=xe({enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:{correctedQuery:"",wordCorrections:[],originalQuery:""},originalQuery:""},(e=>{e.addCase(Mr,(e=>{e.enableDidYouMean=!0})).addCase(Dr,(e=>{e.enableDidYouMean=!1})).addCase(ia.pending,(e=>{e.queryCorrection={correctedQuery:"",wordCorrections:[],originalQuery:""},e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(ia.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||{correctedQuery:"",wordCorrections:[],originalQuery:""},e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(_r,((e,t)=>{e.wasCorrectedTo=t.payload}))})),ya=Ie("facetOptions/update",(e=>Kt(e,{freezeFacetOrder:new It({required:!1})}))),ma=xe({freezeFacetOrder:!1},(e=>{e.addCase(ya,((e,t)=>({...e,...t.payload}))).addCase(ia.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(ia.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.facetOptions)&&void 0!==n?n:e}))})),va=Bt,ba={state:new wt({required:!0}),numberOfResults:new Ct({required:!0,min:0}),value:new Et({required:!0,emptyAllowed:!0}),path:new kt({required:!0,each:Bt}),moreValuesAvailable:new It({required:!1})};function wa(e){e.children.forEach((e=>{wa(e)})),Jt({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},ba)}const Sa={facetId:va,field:Bt,delimitingCharacter:new Et({required:!1,emptyAllowed:!0}),filterFacetCount:new It({required:!1}),injectionDepth:new Ct({required:!1,min:0}),numberOfValues:new Ct({required:!1,min:1}),sortCriteria:new wt({required:!1}),basePath:new kt({required:!1,each:Bt}),filterByBasePath:new It({required:!1})},Oa=Ie("categoryFacet/register",(e=>Kt(e,Sa))),Ca=Ie("categoryFacet/toggleSelectValue",(e=>{try{return Jt(e.facetId,Bt),wa(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}})),qa=Ie("categoryFacet/deselectAll",(e=>Kt(e,va))),Ia=Ie("categoryFacet/updateNumberOfValues",(e=>Kt(e,{facetId:va,numberOfValues:new Ct({required:!0,min:1})}))),xa=Ie("categoryFacet/updateSortCriterion",(e=>Kt(e,{facetId:va,criterion:new wt})));function Ra(e,t){const{facetId:r,criterion:n}=t,i=e[r];i&&(i.sortCriteria=n)}function Ea(e){e&&(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function Aa(e,t){e&&(e.numberOfValues=t)}const Fa={facetId:va,captions:new Ft({options:{required:!1}}),numberOfValues:new Ct({required:!1,min:1}),query:new Et({required:!1,emptyAllowed:!0})},ja={path:new kt({required:!0,each:Bt}),displayValue:Yt,rawValue:Yt,count:new Ct({required:!0,min:0})},ka=Ie("categoryFacet/selectSearchResult",(e=>Kt(e,{facetId:va,value:new Ft({values:ja})}))),Pa=Ie("categoryFacetSearch/register",(e=>Kt(e,Fa))),Ta=Ie("facet/deselectAllFacets");function Va(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];const r=Ma(e[0],t);let n=r;for(const r of e.splice(1)){const e=Ma(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function Ma(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}const Da=xe({},(e=>{e.addCase(Oa,((e,t)=>{const r=t.payload,{facetId:n}=r;if(n in e)return;const i=(a=r,{..._a,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...a});var a;const o=i.numberOfValues;e[n]={request:i,initialNumberOfValues:o}})).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.categoryFacetSet)&&void 0!==n?n:e})).addCase(Sr,((e,t)=>{const r=t.payload.cf||{};Object.keys(e).forEach((t=>{Va(e[t].request,r[t]||[],e[t].initialNumberOfValues)}))})).addCase(xa,((e,t)=>{var r;const{facetId:n,criterion:i}=t.payload,a=null===(r=e[n])||void 0===r?void 0:r.request;a&&(a.sortCriteria=i)})).addCase(Ca,((e,t)=>{var r;const{facetId:n,selection:i,retrieveCount:a}=t.payload,o=null===(r=e[n])||void 0===r?void 0:r.request;if(!o)return;let s=o.currentValues;const{path:c}=i,u=c.slice(0,c.length-1);for(const e of u){const t=s[0];if(e!==t.value)return;t.retrieveChildren=!1,t.state="idle",s=t.children}if(s.length){const e=s[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}const l=function(e,t){const{value:r}=e;return{value:r,state:"selected",children:[],retrieveChildren:!0,retrieveCount:t}}(i,a);s.push(l),o.numberOfValues=1})).addCase(qa,((e,t)=>{$a(e,t.payload)})).addCase(Ta,(e=>{Object.keys(e).forEach((t=>$a(e,t)))})).addCase(Ia,((e,t)=>{var r;const{facetId:n,numberOfValues:i}=t.payload,a=null===(r=e[n])||void 0===r?void 0:r.request;if(a)return a.currentValues.length?void function(e,t){var r;const{facetId:n,numberOfValues:i}=t;let a=null===(r=e[n])||void 0===r?void 0:r.request.currentValues[0];if(!a)return;for(;a.children.length&&"selected"!==(null==a?void 0:a.state);)a=a.children[0];a.retrieveCount=i}(e,t.payload):Aa(a,i)})).addCase(ka,((e,t)=>{const{facetId:r,value:n}=t.payload,i=e[r];if(!i)return;const a=[...n.path,n.rawValue];Va(i.request,a,i.initialNumberOfValues)})).addCase(ia.fulfilled,((e,t)=>{const{facets:r}=t.payload.response;r.forEach((t=>{var r;if(!function(e,t){return t.facetId in e}(e,t))return;const n=t.facetId,i=null===(r=e[n])||void 0===r?void 0:r.request;if(!i)return;const a=function(e,t){const r=pi(e.currentValues).parents,n=pi(t.values).parents;return r.length!==n.length}(i,t);i.currentValues=a?[]:i.currentValues,i.preventAutoSelect=!1}))}))})),_a={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function $a(e,t){const r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}const La=xe([],(e=>{e.addCase(ia.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.facetOrder)&&void 0!==n?n:e}))}));function Na(e,t,r){const{facetId:n}=t;if(e[n])return;const i={...Wa,...t},a=r();e[n]={options:i,isLoading:!1,response:a,initialNumberOfValues:i.numberOfValues,requestId:""}}function za(e,t){const{facetId:r,...n}=t,i=e[r];i&&(i.options={...i.options,...n})}function Ua(e,t,r){const n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function Qa(e,t){const r=e[t];r&&(r.isLoading=!1)}function Ha(e,t,r){const{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=i)}function Ba(e,t,r){const{facetId:n}=t,i=e[n];i&&(i.requestId="",i.isLoading=!1,i.response=r(),i.options.numberOfValues=i.initialNumberOfValues,i.options.query=Wa.query)}function Ya(e,t){Object.keys(e).forEach((r=>Ba(e,{facetId:r},t)))}const Wa={captions:{},numberOfValues:10,query:""},Ja={facetId:va,value:new Ft({values:{displayValue:Yt,rawValue:Yt,count:new Ct({required:!0,min:0})}})},Ka=Ie("facetSearch/register",(e=>Kt(e,Fa))),Za=Ie("facetSearch/update",(e=>Kt(e,Fa))),Xa=Ie("facetSearch/toggleSelectValue",(e=>Kt(e,Ja)));const Ga=e=>ji("analytics/facet/showMore",Fi.Search,((t,r)=>{Kt(e,va);const n=yi(e,vi(r));return t.logFacetShowMore(n)}))(),eo=e=>ji("analytics/facet/showLess",Fi.Search,((t,r)=>{Kt(e,va);const n=yi(e,vi(r));return t.logFacetShowLess(n)}))(),to=e=>ji("analytics/facet/search",Fi.Search,((t,r)=>{Kt(e,va);const n=vi(r),i=yi(e,n);return t.logFacetSearch(i)}))(),ro=e=>ji("analytics/facet/sortChange",Fi.Search,((t,r)=>{Kt(e,{facetId:va,criterion:new wt({required:!0})});const{facetId:n,criterion:i}=e,a=vi(r),o={...yi(n,a),criteria:i};return t.logFacetUpdateSort(o)}))(),no=e=>ji("analytics/facet/reset",Fi.Search,((t,r)=>{Kt(e,va);const n=vi(r),i=yi(e,n);return t.logFacetClearAll(i)}))(),io=e=>ji("analytics/facet/select",Fi.Search,((t,r)=>{Kt(e,{facetId:va,facetValue:Bt});const n=vi(r),i=mi(e,n);return t.logFacetSelect(i)}))(),ao=e=>ji("analytics/facet/deselect",Fi.Search,((t,r)=>{Kt(e,{facetId:va,facetValue:Bt});const n=vi(r),i=mi(e,n);return t.logFacetDeselect(i)}))(),oo=e=>ji("analytics/facet/breadcrumb",Fi.Search,((t,r)=>{Kt(e,{facetId:va,facetValue:Bt});const n=mi(e,vi(r));return t.logBreadcrumbFacet(n)}))(),so=e=>{const t=[];let r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},co=Fe("facetSearch/executeSearch",(async(e,{dispatch:t,getState:r,extra:{searchAPIClient:n,validatePayload:i}})=>{const a=r();let o;i(e,Bt),o=lo(a,e)?((e,t)=>{const{captions:r,query:n,numberOfValues:i}=t.facetSearchSet[e].options,{field:a,delimitingCharacter:o,currentValues:s}=t.facetSet[e],c=ua(t),u=s.filter((e=>"idle"!==e.state)).map((e=>e.value)),l=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:i,query:l,field:a,delimitingCharacter:o,ignoreValues:u,searchContext:c,type:"specific"}})(e,a):((e,t)=>{const r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:i,query:a,numberOfValues:o}=r,{field:s,delimitingCharacter:c,basePath:u}=n,l=ua(t),d=so(n),f=d.length?[d]:[],p=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:u,captions:i,numberOfValues:o,query:p,field:s,delimitingCharacter:c,ignorePaths:f,searchContext:l,type:"hierarchical"}})(e,a);const s=await n.facetSearch(o);return t(to(e)),{facetId:e,response:s}})),uo=Ie("facetSearch/clearResults",(e=>Kt(e,{facetId:va}))),lo=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],fo=xe({},(e=>{e.addCase(Pa,((e,t)=>{Na(e,t.payload,po)})).addCase(Za,((e,t)=>{za(e,t.payload)})).addCase(co.pending,((e,t)=>{Ua(e,t.meta.arg,t.meta.requestId)})).addCase(co.rejected,((e,t)=>{Qa(e,t.meta.arg)})).addCase(co.fulfilled,((e,t)=>{Ha(e,t.payload,t.meta.requestId)})).addCase(uo,((e,{payload:{facetId:t}})=>{Ba(e,{facetId:t},po)})).addCase(ia.fulfilled,(e=>{Ya(e,po)}))}));function po(){return{moreValuesAvailable:!1,values:[]}}const ho=xe({},(e=>{e.addCase(Ka,((e,t)=>{Na(e,t.payload,go)})).addCase(Za,((e,t)=>{za(e,t.payload)})).addCase(co.pending,((e,t)=>{Ua(e,t.meta.arg,t.meta.requestId)})).addCase(co.rejected,((e,t)=>{Qa(e,t.meta.arg)})).addCase(co.fulfilled,((e,t)=>{Ha(e,t.payload,t.meta.requestId)})).addCase(uo,((e,{payload:t})=>{Ba(e,t,go)})).addCase(ia.fulfilled,(e=>{Ya(e,go)}))}));function go(){return{moreValuesAvailable:!1,values:[]}}const yo={value:Bt,numberOfResults:new Ct({min:0}),state:Bt},mo={facetId:va,field:new Et({required:!0,emptyAllowed:!0}),delimitingCharacter:new Et({required:!1,emptyAllowed:!0}),filterFacetCount:new It({required:!1}),injectionDepth:new Ct({required:!1,min:0}),numberOfValues:new Ct({required:!1,min:1}),sortCriteria:new wt({required:!1})},vo=Ie("facet/register",(e=>Kt(e,mo))),bo=Ie("facet/toggleSelectValue",(e=>Kt(e,{facetId:va,selection:new Ft({values:yo})}))),wo=Ie("facet/deselectAll",(e=>Kt(e,va))),So=Ie("facet/updateSortCriterion",(e=>Kt(e,{facetId:va,criterion:new wt({required:!0})}))),Oo=Ie("facet/updateNumberOfValues",(e=>Kt(e,{facetId:va,numberOfValues:new Ct({required:!0,min:1})}))),Co=Ie("facet/updateIsFieldExpanded",(e=>Kt(e,{facetId:va,isFieldExpanded:new It({required:!0})}))),qo=Ie("facet/updateFreezeCurrentValues",(e=>Kt(e,{facetId:va,freezeCurrentValues:new It({required:!0})}))),Io=xe({},(e=>{e.addCase(vo,((e,t)=>{const{facetId:r}=t.payload;var n;r in e||(e[r]=(n=t.payload,{...xo,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...n}))})).addCase(mr.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(Sr,((e,t)=>{const r=t.payload.f||{};Object.keys(e).forEach((t=>{const n=e[t],i=r[t]||[];n.currentValues=i.map(Eo),n.preventAutoSelect=!0,n.numberOfValues=Math.max(i.length,n.numberOfValues)}))})).addCase(bo,((e,t)=>{const{facetId:r,selection:n}=t.payload,i=e[r];if(!i)return;const a=i.currentValues.find((e=>e.value===n.value));if(!a)return;const o="selected"===a.state;a.state=o?"idle":"selected",i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(qo,((e,t)=>{const{facetId:r,freezeCurrentValues:n}=t.payload,i=e[r];i&&(i.freezeCurrentValues=n)})).addCase(wo,((e,t)=>{Ea(e[t.payload])})).addCase(Ta,(e=>{Object.keys(e).forEach((t=>{Ea(e[t])}))})).addCase(So,((e,t)=>{Ra(e,t.payload)})).addCase(Oo,((e,t)=>{const{facetId:r,numberOfValues:n}=t.payload;Aa(e[r],n)})).addCase(Co,((e,t)=>{const{facetId:r,isFieldExpanded:n}=t.payload,i=e[r];i&&(i.isFieldExpanded=n)})).addCase(ia.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{const r=t.facetId,n=e[r];n&&(n.currentValues=t.values.map(Ro),n.freezeCurrentValues=!1,n.preventAutoSelect=!1)}))})).addCase(Xa,((e,t)=>{const{facetId:r,value:n}=t.payload,i=e[r];if(!i)return;const{rawValue:a}=n,{currentValues:o}=i,s=o.find((e=>e.value===a));if(s)return void(s.state="selected");const c=Eo(a),u=o.findIndex((e=>"idle"===e.state)),l=-1===u?o.length:u,d=o.slice(0,l),f=o.slice(l+1);i.currentValues=[...d,c,...f],i.numberOfValues=i.currentValues.length,i.freezeCurrentValues=!0,i.preventAutoSelect=!0}))})),xo={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function Ro(e){const{value:t,state:r}=e;return{value:t,state:r}}function Eo(e){return{value:e,state:"selected"}}var Ao=Te((function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",a="minute",o="hour",s="day",c="week",u="month",l="quarter",d="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},v={s:m,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+m(n,2,"0")+":"+m(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),a=r-i<0,o=t.clone().add(n+(a?-1:1),u);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:c,d:s,D:f,h:o,m:a,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=y;var S=function(e){return e instanceof I},O=function(e,t,r){var n;if(!e)return b;if("string"==typeof e)w[e]&&(n=e),t&&(w[e]=t,n=e);else{var i=e.name;w[i]=e,n=i}return!r&&n&&(b=n),n||!r&&b},C=function(e,t){if(S(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new I(r)},q=v;q.l=O,q.i=S,q.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function y(e){this.$L=O(e.locale,null,!0),this.parse(e)}var m=y.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(q.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return q},m.isValid=function(){return!(this.$d.toString()===p)},m.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return C(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<C(e)},m.$g=function(e,t,r){return q.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,n=!!q.u(t)||t,l=q.p(e),p=function(e,t){var i=q.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(s)},h=function(e,t){return q.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,y=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(l){case d:return n?p(1,0):p(31,11);case u:return n?p(1,y):p(0,y+1);case c:var b=this.$locale().weekStart||0,w=(g<b?g+7:g)-b;return p(n?m-w:m+(6-w),y);case s:case f:return h(v+"Hours",0);case o:return h(v+"Minutes",1);case a:return h(v+"Seconds",2);case i:return h(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var r,c=q.p(e),l="set"+(this.$u?"UTC":""),p=(r={},r[s]=l+"Date",r[f]=l+"Date",r[u]=l+"Month",r[d]=l+"FullYear",r[o]=l+"Hours",r[a]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[c],h=c===s?this.$D+(t-this.$W):t;if(c===u||c===d){var g=this.clone().set(f,1);g.$d[p](h),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[q.p(e)]()},m.add=function(n,l){var f,p=this;n=Number(n);var h=q.p(l),g=function(e){var t=C(p);return q.w(t.date(t.date()+Math.round(e*n)),p)};if(h===u)return this.set(u,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===s)return g(1);if(h===c)return g(7);var y=(f={},f[a]=t,f[o]=r,f[i]=e,f)[h]||1,m=this.$d.getTime()+n*y;return q.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this;if(!this.isValid())return p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=q.z(this),i=this.$locale(),a=this.$H,o=this.$m,s=this.$M,c=i.weekdays,u=i.months,l=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].substr(0,a)},d=function(e){return q.s(a%12||12,e,"0")},f=i.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:q.s(s+1,2,"0"),MMM:l(i.monthsShort,s,u,3),MMMM:l(u,s),D:this.$D,DD:q.s(this.$D,2,"0"),d:String(this.$W),dd:l(i.weekdaysMin,this.$W,c,2),ddd:l(i.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(a),HH:q.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,o,!0),A:f(a,o,!1),m:String(o),mm:q.s(o,2,"0"),s:String(this.$s),ss:q.s(this.$s,2,"0"),SSS:q.s(this.$ms,3,"0"),Z:n};return r.replace(g,(function(e,t){return t||h[e]||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,f,p){var h,g=q.p(f),y=C(n),m=(y.utcOffset()-this.utcOffset())*t,v=this-y,b=q.m(this,y);return b=(h={},h[d]=b/12,h[u]=b,h[l]=b/3,h[c]=(v-m)/6048e5,h[s]=(v-m)/864e5,h[o]=v/r,h[a]=v/t,h[i]=v/e,h)[g]||v,p?b:q.a(b)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return w[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=O(e,t,!0);return n&&(r.$L=n),r},m.clone=function(){return q.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),x=I.prototype;return C.prototype=x,[["$ms",n],["$s",i],["$m",a],["$H",o],["$W",s],["$M",u],["$y",d],["$D",f]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,I,C),e.$i=!0),C},C.locale=O,C.isDayjs=S,C.unix=function(e){return C(1e3*e)},C.en=w[b],C.Ls=w,C.p={},C}()}));const Fo={state:Bt,start:new Ct({required:!0}),end:new Ct({required:!0}),endInclusive:new It({required:!0}),numberOfResults:new Ct({required:!0,min:0})},jo={start:Bt,end:Bt,endInclusive:new It({required:!0}),state:Bt,numberOfResults:new Ct({required:!0,min:0})},ko=e=>({facetId:va,selection:"string"==typeof e.start?new Ft({values:jo}):new Ft({values:Fo})});var Po=Te((function(e,t){e.exports=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var o=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var c=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var u=o.utcOffset;o.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===a?o:-o}(n)))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(i)return s.$offset=o,s.$u=0===n,s;if(0!==n){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+c,e)).$offset=o,s.$x.$localOffset=c}else s=this.utc();return s};var l=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}}()})),To=Te((function(e,t){e.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^\s\d-_:/()]+/,a={},o=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],c=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},l={A:[i,function(e){this.afternoon=u(e,!1)}],a:[i,function(e){this.afternoon=u(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,o("seconds")],ss:[n,o("seconds")],m:[n,o("minutes")],mm:[n,o("minutes")],H:[n,o("hours")],h:[n,o("hours")],HH:[n,o("hours")],hh:[n,o("hours")],D:[n,o("day")],DD:[r,o("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,o("month")],MM:[r,o("month")],MMM:[i,function(e){var t=c("months"),r=(c("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[r,function(e){e=+e,this.year=e+(e>68?1900:2e3)}],YYYY:[/\d{4}/,o("year")],Z:s,ZZ:s};function d(r){var n,i;n=r,i=a&&a.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=o.length,c=0;c<s;c+=1){var u=o[c],d=l[u],f=d&&d[0],p=d&&d[1];o[c]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var i=o[r];if("string"==typeof i)n+=i.length;else{var a=i.regex,c=i.parser,u=e.substr(n),l=a.exec(u)[0];c.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0;var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,o=e.args;this.$u=n;var s=o[1];if("string"==typeof s){var c=!0===o[2],u=!0===o[3],l=c||u,f=o[2];u&&(f=o[2]),a=this.$locale(),!c&&f&&(a=r.Ls[f]),this.$d=function(e,t,r){try{var n=d(t)(e),i=n.year,a=n.month,o=n.day,s=n.hours,c=n.minutes,u=n.seconds,l=n.milliseconds,f=n.zone,p=new Date,h=o||(i||a?1:p.getDate()),g=i||p.getFullYear(),y=0;i&&!a||(y=a>0?a-1:p.getMonth());var m=s||0,v=c||0,b=u||0,w=l||0;return f?new Date(Date.UTC(g,y,h,m,v,b,w+60*f.offset*1e3)):r?new Date(Date.UTC(g,y,h,m,v,b,w)):new Date(g,y,h,m,v,b,w)}catch(e){return new Date("")}}(t,s,n),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),l&&t!==this.format(s)&&(this.$d=new Date("")),a={}}else if(s instanceof Array)for(var p=s.length,h=1;h<=p;h+=1){o[1]=s[h-1];var g=r.apply(this,o);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}h===p&&(this.$d=new Date(""))}else i.call(this,e)}}}()}));function Vo(e){return _o(Ao(e))===e}function Mo(e){var t,r;return{start:Do(e.start,e),end:Do(e.end,e),endInclusive:null!==(t=e.endInclusive)&&void 0!==t&&t,state:null!==(r=e.state)&&void 0!==r?r:"idle"}}function Do(e,t){const{dateFormat:r,useLocalTime:n}=t,i=Ao(e,r);if(!i.isValid())throw new Error(`Could not parse the provided date "${e}".\n      Please provide a dateFormat string in the configuration options.\n      See https://day.js.org/docs/en/parse/string-format for more information.\n       `);return _o(n?i:i.utc())}function _o(e){return e.format("YYYY/MM/DD@HH:mm:ss")}Ao.extend(Po),Ao.extend(To);const $o=Ie("rangeFacet/updateSortCriterion",(e=>Kt(e,{facetId:va,criterion:new wt({required:!0})}))),Lo={start:Bt,end:Bt,endInclusive:new It({required:!0}),state:Bt},No={facetId:va,field:Bt,currentValues:new kt({required:!1,each:new Ft({values:Lo})}),generateAutomaticRanges:new It({required:!0}),filterFacetCount:new It({required:!1}),injectionDepth:new Ct({required:!1,min:0}),numberOfValues:new Ct({required:!1,min:1}),sortCriteria:new wt({required:!1}),rangeAlgorithm:new wt({required:!1})};function zo(e){e.currentValues&&e.currentValues.forEach((e=>{const{start:t,end:r}=Mo(e);if(Ao(t).isAfter(Ao(r)))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}const Uo=Ie("dateFacet/register",(e=>{try{return Jt(e,No),zo(e),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}})),Qo=Ie("dateFacet/toggleSelectValue",(e=>Kt(e,{facetId:va,selection:new Ft({values:jo})}))),Ho=Ie("dateFacet/updateFacetValues",(e=>{try{return Jt(e,{facetId:va,values:new kt({each:new Ft({values:jo})})}),zo({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}})),Bo=$o,Yo=wo,Wo={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Jo(e,t){const{facetId:r}=t;if(r in e)return;const n=rs(t);e[r]={...t,numberOfValues:n}}function Ko(e,t,r){const n=e[t];n&&(n.currentValues=r,n.numberOfValues=rs(n))}function Zo(e,t,r){const n=e[t];if(!n)return;const i=ts(n.currentValues,r);if(!i)return;const a="selected"===i.state;i.state=a?"idle":"selected",n.preventAutoSelect=!0}function Xo(e,t){const r=e[t];r&&r.currentValues.forEach((e=>e.state="idle"))}function Go(e,t){Object.entries(e).forEach((([e,r])=>{const n=t[e]||[];r.currentValues.forEach((e=>{const t=!!ts(n,e);return e.state=t?"selected":"idle",e}));const i=n.filter((e=>!ts(r.currentValues,e))),a=r.currentValues;a.push(...i),r.numberOfValues=Math.max(r.numberOfValues,a.length)}))}function es(e,t,r){t.forEach((t=>{const n=t.facetId,i=e[n];if(!i)return;const a=r(t.values);i.currentValues=a,i.preventAutoSelect=!1}))}function ts(e,t){const{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function rs(e){const{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}const ns=xe({},(e=>{e.addCase(Uo,((e,t)=>{const{payload:r}=t;var n;Jo(e,(n=r,{...Wo,currentValues:[],preventAutoSelect:!1,type:"dateRange",...n}))})).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.dateFacetSet)&&void 0!==n?n:e})).addCase(Sr,((e,t)=>{Go(e,t.payload.df||{})})).addCase(Qo,((e,t)=>{const{facetId:r,selection:n}=t.payload;Zo(e,r,n)})).addCase(Ho,((e,t)=>{const{facetId:r,values:n}=t.payload;Ko(e,r,n)})).addCase(Yo,((e,t)=>{Xo(e,t.payload)})).addCase(Ta,(e=>{Object.keys(e).forEach((t=>{Xo(e,t)}))})).addCase(Bo,((e,t)=>{Ra(e,t.payload)})).addCase(ia.fulfilled,((e,t)=>{es(e,t.payload.response.facets,is)}))}));function is(e){return e.map((e=>{const{numberOfResults:t,...r}=e;return r}))}const as={state:Bt,start:new Ct({required:!0}),end:new Ct({required:!0}),endInclusive:new It({required:!0})},os={facetId:va,field:Bt,currentValues:new kt({required:!1,each:new Ft({values:as})}),generateAutomaticRanges:new It({required:!0}),filterFacetCount:new It({required:!1}),injectionDepth:new Ct({required:!1,min:0}),numberOfValues:new Ct({required:!1,min:1}),sortCriteria:new wt({required:!1}),rangeAlgorithm:new wt({required:!1})};function ss(e){e.currentValues&&e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}const cs=Ie("numericFacet/register",(e=>{try{return Kt(e,os),ss(e),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}})),us=Ie("numericFacet/toggleSelectValue",(e=>Kt(e,{facetId:va,selection:new Ft({values:Fo})}))),ls=Ie("numericFacet/updateFacetValues",(e=>{try{return Jt(e,{facetId:va,values:new kt({each:new Ft({values:Fo})})}),ss({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Wt(t)}}})),ds=$o,fs=wo,ps=xe({},(e=>{e.addCase(cs,((e,t)=>{const{payload:r}=t;var n;Jo(e,(n=r,{...Wo,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...n}))})).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.numericFacetSet)&&void 0!==n?n:e})).addCase(Sr,((e,t)=>{Go(e,t.payload.nf||{})})).addCase(us,((e,t)=>{const{facetId:r,selection:n}=t.payload;Zo(e,r,n)})).addCase(ls,((e,t)=>{const{facetId:r,values:n}=t.payload;Ko(e,r,n)})).addCase(fs,((e,t)=>{Xo(e,t.payload)})).addCase(Ta,(e=>{Object.keys(e).forEach((t=>{Xo(e,t)}))})).addCase(ds,((e,t)=>{Ra(e,t.payload)})).addCase(ia.fulfilled,((e,t)=>{es(e,t.payload.response.facets,hs)}))}));function hs(e){return e.map((e=>{const{numberOfResults:t,...r}=e;return r}))}const gs=new kt({each:Bt,required:!0}),ys=Ie("fields/registerFieldsToInclude",(e=>Kt(e,gs))),ms={collectionField:new Et,parentField:new Et,childField:new Et,numberOfFoldedResults:new Ct({min:0})},vs=Ie("folding/register",(e=>Kt(e,ms))),bs=Fe("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n}})=>{const{folding:{fields:i},configuration:{accessToken:a,organizationId:o,search:{apiBaseUrl:s}}}=t(),c=await n.search({tab:"",referrer:"",accessToken:a,organizationId:o,url:s,aq:`@${i.collection} = ${e}`,numberOfResults:100});return Lt(c)?r(c.error):{collectionId:e,results:c.success.results}})),ws=xe({fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"]},(e=>e.addCase(ys,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(vs,((e,{payload:t})=>{var r,n,i;const a={collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"};e.fieldsToInclude.push(null!==(r=t.collectionField)&&void 0!==r?r:a.collection,null!==(n=t.parentField)&&void 0!==n?n:a.parent,null!==(i=t.childField)&&void 0!==i?i:a.child)})))),Ss=(e,t=5)=>e+Math.random().toString(36).substr(2,2+t);function Os(e){return Array.isArray(e)}function Cs(e){return""===e.trim()}function qs(e,t){return e.raw[t.parent]}function Is(e,t){const r=e.raw[t.child];return Os(r)?r[0]:r}function xs(e){return e.childResults?e.childResults.flatMap((e=>[e,...xs(e)])):[]}function Rs(e,t,r,n=[]){const i=Is(e,r);return i?-1!==n.indexOf(i)?[]:t.filter((t=>{const n=Is(t,r)===Is(e,r);return qs(t,r)===i&&!n})).map((e=>({result:e,children:Rs(e,t,r,[...n,i])}))):[]}function Es(e,t){return e.find((e=>{const r=void 0===qs(e,t),n=(i=qs(e,t),a=Is(e,t),void 0!==(i||a)&&i===a);var i,a;return r||n}))}function As(e){const t=xs(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));var n,i;return n=[e,...t,...r],i=e=>e.uniqueId,Object.values(n.reduce(((e,t,r)=>({...e,[i(t,r)]:t})),{}))}function Fs(e,t){const r={};return e.forEach((e=>{const n=function(e,t){return e.raw[t.collection]}(e,t);n&&Is(e,t)&&(r[n]=function(e,t){var r;const n=As(e),i=null!==(r=Es(n,t))&&void 0!==r?r:e;return{result:i,children:Rs(i,n,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}(e,t))})),r}const js=xe({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},(e=>e.addCase(ia.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Fs(t.response.results,e.fields):{}})).addCase(aa.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...Fs(t.response.results,e.fields)}:{}})).addCase(vs,((e,{payload:t})=>{var r,n,i,a;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!==(r=t.collectionField)&&void 0!==r?r:e.fields.collection,parent:null!==(n=t.parentField)&&void 0!==n?n:e.fields.parent,child:null!==(i=t.childField)&&void 0!==i?i:e.fields.child},filterFieldRange:null!==(a=t.numberOfFoldedResults)&&void 0!==a?a:e.filterFieldRange}})).addCase(bs.pending,((e,{meta:t})=>{const r=t.arg;e.collections[r].isLoadingMoreResults=!0})).addCase(bs.rejected,((e,{meta:t})=>{const r=t.arg;e.collections[r].isLoadingMoreResults=!1})).addCase(bs.fulfilled,((e,{payload:{collectionId:t,results:r}})=>{const n=Es(r,e.fields);n&&(e.collections[t]={result:n,children:Rs(n,r,e.fields),moreResultsAvailable:!1,isLoadingMoreResults:!1})}))));const ks=Te((function(e,t){!function(e){var t="function"==typeof WeakSet,r=Object.keys;function n(e,t){return e===t||e!=e&&t!=t}function i(e){return e.constructor===Object||null==e.constructor}function a(e){return!!e&&"function"==typeof e.then}function o(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var c=t?function(){return new WeakSet}:s;function u(e){return function(t){var r=e||t;return function(e,t,n){void 0===n&&(n=c());var i=!!e&&"object"==typeof e,a=!!t&&"object"==typeof t;if(i||a){var o=i&&n.has(e),s=a&&n.has(t);if(o||s)return o&&s;i&&n.add(e),a&&n.add(t)}return r(e,t,n)}}}function l(e,t,r,n){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!r(e[i],t[i],n))return!1;return!0}function d(e,t,r,n){var i=e.size===t.size;return i&&e.size&&e.forEach((function(e,a){i&&(i=!1,t.forEach((function(t,o){!i&&r(a,o,n)&&(i=r(e,t,n))})))})),i}var f="_owner",p=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function h(e,t,n,i){var a=r(e),s=a.length;if(r(t).length!==s)return!1;if(s)for(var c=void 0;s-- >0;){if((c=a[s])===f){var u=o(e),l=o(t);if((u||l)&&u!==l)return!1}if(!p(t,c)||!n(e[c],t[c],i))return!1}return!0}function g(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}function y(e,t,r,n){var i=e.size===t.size;return i&&e.size&&e.forEach((function(e){i&&(i=!1,t.forEach((function(t){i||(i=r(e,t,n))})))})),i}var m="function"==typeof Map,v="function"==typeof Set;function b(e){var t="function"==typeof e?e(r):r;function r(e,r,o){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(i(e)&&i(r))return h(e,r,t,o);var s=Array.isArray(e),c=Array.isArray(r);return s||c?s===c&&l(e,r,t,o):(s=e instanceof Date,c=r instanceof Date,s||c?s===c&&n(e.getTime(),r.getTime()):(s=e instanceof RegExp,c=r instanceof RegExp,s||c?s===c&&g(e,r):a(e)||a(r)?e===r:m&&(s=e instanceof Map,c=r instanceof Map,s||c)?s===c&&d(e,r,t,o):v&&(s=e instanceof Set,c=r instanceof Set,s||c)?s===c&&y(e,r,t,o):h(e,r,t,o)))}return e!=e&&r!=r}return r}var w=b(),S=b((function(){return n})),O=b(u()),C=b(u(n));e.circularDeepEqual=O,e.circularShallowEqual=C,e.createCustomEqual=b,e.deepEqual=w,e.sameValueZeroEqual=n,e.shallowEqual=S,Object.defineProperty(e,"__esModule",{value:!0})}(t)})).createCustomEqual((e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t=>-1!==r.findIndex((r=>e(t,r))))):e(t,r))),Ps=xe(Xi(),(e=>{e.addCase(hr,((e,t)=>Ts(e,t.payload)?void 0:t.payload))})),Ts=(e,t)=>Vs(e.context,t.context)&&Ls(e.advancedSearchQueries,t.advancedSearchQueries)&&Ms(e.facetSet,t.facetSet)&&Ms(e.dateFacetSet,t.dateFacetSet)&&Ms(e.numericFacetSet,t.numericFacetSet)&&Ds(e.categoryFacetSet,t.categoryFacetSet)&&_s(e.pagination,t.pagination)&&$s(e.query,t.query)&&Ns(e,t)&&zs(e.pipeline,t.pipeline)&&Us(e.searchHub,t.searchHub)&&Qs(e.facetOrder,t.facetOrder)&&Hs(e.debug,t.debug),Vs=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Ms=(e,t)=>{for(const[r,n]of Object.entries(t)){if(!e[r])return!1;const t=e[r].currentValues.filter((e=>"selected"===e.state)),i=n.currentValues.filter((e=>"selected"===e.state));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},Ds=(e,t)=>{var r;for(const[n,i]of Object.entries(t)){if(!e[n])return!1;const t=pi(null===(r=e[n])||void 0===r?void 0:r.request.currentValues).parents.map((({value:e})=>e)),a=pi(null==i?void 0:i.request.currentValues).parents.map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},_s=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,$s=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Ls=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Ns=(e,t)=>e.sortCriteria===t.sortCriteria,zs=(e,t)=>e===t,Us=(e,t)=>e===t,Qs=(e,t)=>{return n=t,(r=e).length===n.length&&-1===r.findIndex(((e,t)=>n[t]!==e));var r,n},Hs=(e,t)=>e===t,Bs=new Ct({required:!0,min:0}),Ys=Ie("pagination/registerNumberOfResults",(e=>Kt(e,Bs))),Ws=Ie("pagination/updateNumberOfResults",(e=>Kt(e,Bs))),Js=Ie("pagination/registerPage",(e=>Kt(e,Bs))),Ks=Ie("pagination/updatePage",(e=>Kt(e,Bs))),Zs=Ie("pagination/nextPage"),Xs=Ie("pagination/previousPage"),Gs=xe({firstResult:0,numberOfResults:10,totalCountFiltered:0},(e=>{e.addCase(Ys,((e,t)=>{const r=tc(e),n=t.payload;e.numberOfResults=n,e.firstResult=rc(r,n)})).addCase(Ws,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(Js,((e,t)=>{const r=t.payload;e.firstResult=rc(r,e.numberOfResults)})).addCase(Ks,((e,t)=>{const r=t.payload;e.firstResult=rc(r,e.numberOfResults)})).addCase(Xs,(e=>{const t=tc(e),r=Math.max(t-1,1);e.firstResult=rc(r,e.numberOfResults)})).addCase(Zs,(e=>{const t=tc(e),r=function(e){const{totalCountFiltered:t,numberOfResults:r}=e;return ic(t,r)}(e),n=Math.min(t+1,r);e.firstResult=rc(n,e.numberOfResults)})).addCase(mr.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(Sr,((e,t)=>{var r,n;e.firstResult=null!==(r=t.payload.firstResult)&&void 0!==r?r:e.firstResult,e.numberOfResults=null!==(n=t.payload.numberOfResults)&&void 0!==n?n:e.numberOfResults})).addCase(ia.fulfilled,((e,t)=>{const{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(wo,(e=>{ec(e)})).addCase(bo,(e=>{ec(e)})).addCase(qa,(e=>{ec(e)})).addCase(Ca,(e=>{ec(e)})).addCase(ka,(e=>{ec(e)})).addCase(Qo,(e=>{ec(e)})).addCase(us,(e=>{ec(e)})).addCase(Ta,(e=>{ec(e)})).addCase(Ho,(e=>{ec(e)})).addCase(ls,(e=>{ec(e)})).addCase(Xa,(e=>{ec(e)}))}));function ec(e){e.firstResult=0}function tc(e){const{firstResult:t,numberOfResults:r}=e;return nc(t,r)}function rc(e,t){return(e-1)*t}function nc(e,t){return e/t+1}function ic(e,t){const r=Math.min(e,1e3);return Math.ceil(r/t)}const ac=Ie("pipeline/set",(e=>Kt(e,new Et({required:!0,emptyAllowed:!0})))),oc=xe("default",(e=>{e.addCase(ac,((e,t)=>t.payload)).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.pipeline)&&void 0!==n?n:e})).addCase(ir,((e,t)=>t.payload.pipeline||e))})),sc=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating"];class cc{constructor(e){this.state=e,this.initialState={id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}}getLanguage(){return ci(this.state)}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){var e;return{recommendation:(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.id)||this.initialState.id}}getSearchUID(){var e;return(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.searchUid)||this.initialState.searchUid}getPipeline(){return""}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2||"default"}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return(null===(e=this.state.productRecommendations)||void 0===e?void 0:e.recommendations.length)||this.initialState.recommendations.length}}const uc=ji("analytics/productrecommendations/load",Fi.Search,(e=>e.logRecommendationInterfaceLoad()),(e=>new cc(e))),lc=Ie("productrecommendations/setId",(e=>Kt(e,{id:Bt}))),dc=Ie("productrecommendations/setSku",(e=>Kt(e,{skus:new kt({required:!0,min:1,each:new Et({emptyAllowed:!1})})}))),fc=Ie("productrecommendations/setBrand",(e=>Kt(e,{brand:new Et({required:!0,emptyAllowed:!0})}))),pc=Ie("productrecommendations/setCategory",(e=>Kt(e,{category:new Et({required:!0,emptyAllowed:!0})}))),hc=Ie("productrecommendations/setAdditionalFields",(e=>Kt(e,{additionalFields:new kt({required:!0,each:new Et({emptyAllowed:!1})})}))),gc=Ie("productrecommendations/setMaxNumberOfRecommendations",(e=>Kt(e,{number:new Ct({required:!0,max:50,min:1})}))),yc=Fe("productrecommendations/get",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n}})=>{const i=t(),a=(new Date).getTime(),o=await n.productRecommendations(vc(i)),s=(new Date).getTime()-a;if(Lt(o))return r(o.error);const c=i.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map((e=>mc(e,{additionalFields:c}))),analyticsAction:uc(),searchUid:o.success.searchUid,duration:s}})),mc=(e,{additionalFields:t})=>{const r=e.raw.ec_price,n=e.raw.ec_promo_price,i=e.raw.ec_in_stock;return{permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:void 0===n||void 0!==r&&n>=r?void 0:n,ec_in_stock:void 0===i?void 0:"yes"===i.toLowerCase()||"true"===i.toLowerCase(),ec_rating:e.raw.ec_rating,additionalFields:t.reduce(((t,r)=>({...t,[r]:e.raw[r]})),{})}},vc=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,...e.configuration.analytics.enabled&&{visitorId:Ei()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...sc,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?Ai.getHistory():[],...e.context&&{context:e.context.contextValues},...e.searchHub&&{searchHub:e.searchHub}});xe({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0},(e=>{e.addCase(lc,((e,t)=>{e.id=t.payload.id})).addCase(dc,((e,t)=>{e.skus=t.payload.skus})).addCase(fc,((e,t)=>{e.filter.brand=t.payload.brand})).addCase(pc,((e,t)=>{e.filter.category=t.payload.category})).addCase(gc,((e,t)=>{e.maxNumberOfRecommendations=t.payload.number})).addCase(hc,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(yc.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(yc.fulfilled,((e,t)=>{e.error=null,e.searchUid=t.payload.searchUid,e.recommendations=t.payload.recommendations,e.isLoading=!1})).addCase(yc.pending,(e=>{e.isLoading=!0}))}));const bc={id:Bt,query:Yt},wc=Ie("querySet/register",(e=>Kt(e,bc))),Sc=Ie("querySet/update",(e=>Kt(e,bc))),Oc={id:Bt},Cc=Ie("querySuggest/register",(e=>Kt(e,{...Oc,q:new Et,count:new Ct({min:0})}))),qc=Ie("querySuggest/unregister",(e=>Kt(e,Oc))),Ic=Ie("querySuggest/selectSuggestion",(e=>Kt(e,{...Oc,expression:Yt}))),xc=Ie("querySuggest/clear",(e=>Kt(e,Oc))),Rc=Fe("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n,validatePayload:i}})=>{i(e,Oc);const a=e.id,o=await n.querySuggest(Ec(a,t()));return Lt(o)?r({id:a,...o.error}):{id:a,...o.success}})),Ec=(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySuggest[e].q,locale:t.configuration.search.locale,actionsHistory:t.configuration.analytics.enabled?Ai.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub}}),Ac=xe({},(e=>{e.addCase(wc,((e,t)=>{const{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(Sc,((e,t)=>{const{id:r,query:n}=t.payload;Fc(e,r,n)})).addCase(Ic,((e,t)=>{const{id:r,expression:n}=t.payload;Fc(e,r,n)})).addCase(ia.fulfilled,((e,t)=>{const{queryExecuted:r}=t.payload;Object.keys(e).forEach((t=>e[t]=r))})).addCase(mr.fulfilled,((e,t)=>{if(t.payload)for(const[r,n]of Object.entries(t.payload.querySet))Fc(e,r,n)}))})),Fc=(e,t,r)=>{t in e&&(e[t]=r)},jc=xe({},(e=>e.addCase(Cc,((e,t)=>{e[t.payload.id]={id:"",completions:[],count:5,q:"",currentRequestId:"",error:null,partialQueries:[],...t.payload}})).addCase(qc,((e,t)=>{delete e[t.payload.id]})).addCase(Rc.pending,((e,t)=>{e[t.meta.arg.id].currentRequestId=t.meta.requestId})).addCase(Rc.fulfilled,((e,t)=>{var r;const n=t.meta.arg.id;if(t.meta.requestId===(null===(r=e[n])||void 0===r?void 0:r.currentRequestId)){const{q:r}=e[n];r&&e[n].partialQueries.push(r.replace(/;/,encodeURIComponent(";"))),e[n].completions=t.payload.completions}})).addCase(Rc.rejected,((e,t)=>{e[t.payload.id].error=t.payload})).addCase(Sc,((e,t)=>{const{id:r,query:n}=t.payload;r in e&&(e[r].q=n)})).addCase(xc,((e,t)=>{const{id:r}=t.payload;e[r].q="",e[r].completions=[],e[r].partialQueries=[]})).addCase(Ic,((e,t)=>{const{id:r,expression:n}=t.payload;e[r].q=n})))),kc=xe({q:"",enableQuerySyntax:!1},(e=>e.addCase(Ni,((e,t)=>({...e,...t.payload}))).addCase(_r,((e,t)=>{e.q=t.payload})).addCase(Ic,((e,t)=>{e.q=t.payload.expression})).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.query)&&void 0!==n?n:e})).addCase(Sr,((e,t)=>{var r,n;e.q=null!==(r=t.payload.q)&&void 0!==r?r:e.q,e.enableQuerySyntax=null!==(n=t.payload.enableQuerySyntax)&&void 0!==n?n:e.enableQuerySyntax})))),Pc=()=>new Ft({values:{documentId:new Ft({values:{contentIdKey:new Et({required:!0,emptyAllowed:!1}),contentIdValue:new Et({required:!0,emptyAllowed:!1})}})},options:{required:!0}}),Tc=Ie("smartSnippet/expand"),Vc=Ie("smartSnippet/collapse"),Mc=Ie("smartSnippet/like"),Dc=Ie("smartSnippet/dislike"),_c=Ie("smartSnippet/related/expand",(e=>Kt(e,Pc()))),$c=Ie("smartSnippet/related/collapse",(e=>Kt(e,Pc()))),Lc=(e,t)=>e.findIndex((e=>e.contentIdValue===t.contentIdValue&&e.contentIdKey===t.contentIdKey)),Nc=xe({liked:!1,disliked:!1,expanded:!1,relatedQuestions:[]},(e=>e.addCase(Tc,(e=>{e.expanded=!0})).addCase(Vc,(e=>{e.expanded=!1})).addCase(Mc,(e=>{e.liked=!0,e.disliked=!1})).addCase(Dc,(e=>{e.liked=!1,e.disliked=!0})).addCase(ia.fulfilled,((e,t)=>{e.relatedQuestions=t.payload.response.questionAnswer.relatedQuestions.map((e=>({contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1})))})).addCase(_c,((e,t)=>{const r=Lc(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase($c,((e,t)=>{const r=Lc(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)})))),zc=ji("analytics/recommendation/update",Fi.Search,(e=>e.logRecommendationInterfaceLoad())),Uc=Ie("recommendation/set",(e=>Kt(e,{id:Bt}))),Qc=Fe("recommendation/get",(async(e,{getState:t,rejectWithValue:r,extra:{searchAPIClient:n}})=>{const i=t(),a=(new Date).getTime(),o=await n.recommendations(Hc(i)),s=(new Date).getTime()-a;return Lt(o)?r(o.error):{recommendations:o.success.results,analyticsAction:zc(),duration:s,searchUid:o.success.searchUid}})),Hc=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,actionsHistory:e.configuration.analytics.enabled?Ai.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude}});function Bc(e){return"notify"===e.type}function Yc(e){return"redirect"===e.type}function Wc(e){return"query"===e.type}function Jc(e){return"execute"===e.type}xe({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""},(e=>{e.addCase(Uc,((e,t)=>{e.id=t.payload.id})).addCase(Qc.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(Qc.fulfilled,((e,t)=>{e.error=null,e.recommendations=t.payload.recommendations,e.duration=t.payload.duration,e.isLoading=!1,e.searchUid=t.payload.searchUid})).addCase(Qc.pending,(e=>{e.isLoading=!0}))}));class Kc{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){const e=this.response.preprocessingOutput.triggers.filter(Yc);return e.length?e[0].content:null}}const Zc=ji("analytics/redirection",Fi.Search,((e,t)=>{var r;if(null===(r=t.redirection)||void 0===r?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})})),Xc=Fe("redirection/check",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{searchAPIClient:i,validatePayload:a}})=>{a(e,{defaultRedirectionUrl:new Et({emptyAllowed:!1,url:!0})});const o=await i.plan(Gc(r()));if(Lt(o))return n(o.error);const s=new Kc(o.success).redirectionUrl;return s&&t(Zc()),s||e.defaultRedirectionUrl})),Gc=e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub}}),eu=xe({redirectTo:null},(e=>e.addCase(Xc.fulfilled,((e,t)=>{e.redirectTo=t.payload}))));const tu=Fe("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{const i=function(e,t){var r;const{search:n,accessToken:i,organizationId:a}=e.configuration,o=(null===(r=e.query)||void 0===r?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:i,organizationId:a,enableNavigation:!1,q:o,...t,requestedOutputSize:t.requestedOutputSize||0}}(r(),e),a=await t.searchAPIClient.html(i);return Lt(a)?n(a.error):{content:a.success,uniqueId:e.uniqueId}}));const ru=xe({uniqueId:"",content:"",isLoading:!1},(e=>{e.addCase(tu.pending,(e=>{e.isLoading=!0})).addCase(tu.fulfilled,((e,t)=>{const{content:r,uniqueId:n}=t.payload;e.content=r,e.uniqueId=n,e.isLoading=!1}))})),nu=Ie("searchHub/set",(e=>Kt(e,new Et({required:!0,emptyAllowed:!0})))),iu=xe("default",(e=>{e.addCase(nu,((e,t)=>t.payload)).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.searchHub)&&void 0!==n?n:e})).addCase(ir,((e,t)=>t.payload.searchHub||e))}));function au(e,t){e.error=t.payload?t.payload:null,e.isLoading=!1}function ou(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function su(e){e.isLoading=!0}const cu=xe({response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[]},(e=>{e.addCase(ia.rejected,au),e.addCase(aa.rejected,au),e.addCase(ia.fulfilled,((e,t)=>{ou(e,t),e.results=t.payload.response.results})),e.addCase(aa.fulfilled,((e,t)=>{ou(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(ia.pending,su),e.addCase(aa.pending,su)})),uu={by:new Tt({enum:Ui,required:!0})},lu=Ie("sortCriteria/register",(e=>fu(e))),du=Ie("sortCriteria/update",(e=>fu(e))),fu=e=>Pt(e)?(e.forEach((e=>Kt(e,uu))),{payload:e}):Kt(e,uu),pu=xe(Zi(),(e=>{e.addCase(lu,((e,t)=>Qi(t.payload))).addCase(du,((e,t)=>Qi(t.payload))).addCase(mr.fulfilled,((e,t)=>{var r,n;return null!==(n=null===(r=t.payload)||void 0===r?void 0:r.sortCriteria)&&void 0!==n?n:e})).addCase(Sr,((e,t)=>{var r;return null!==(r=t.payload.sortCriteria)&&void 0!==r?r:e}))})),hu=xe({redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""},(e=>e.addCase(ia.fulfilled,((e,t)=>{const r=t.payload.response.triggers.filter(Yc);e.redirectTo=r.length?r[0].content:"";const n=t.payload.response.triggers.filter(Wc);e.query=n.length?n[0].content:"";const i=t.payload.response.triggers.filter(Jc);e.execute=i.length?{functionName:i[0].content.name,params:i[0].content.params}:{functionName:"",params:[]};const a=t.payload.response.triggers.filter(Bc);e.notification=a.length?a[0].content:""})))),gu=e=>({past:[],present:e,future:[]}),yu=qr,mu=Gs,vu=Io,bu=ho,wu=cu,Su=js,Ou=ns,Cu=La,qu=ps,Iu=Da,xu=ma,Ru=fo,Eu=kc,Au=Or,Fu=Ac,ju=eu,ku=jc,Pu=pu,Tu=Fr,Vu=ga,Mu=ws,Du=oc,_u=iu,$u=Pr,Lu=ru,Nu=Vr,zu=hu,Uu=Nc,Qu=(e=>{const{actionTypes:t,reducer:r}=e,n=gu();return(e=n,i)=>{switch(i.type){case t.undo:return(e=>{const{past:t,present:r,future:n}=e;if(!r)return e;if(0===t.length)return e;const i=t[t.length-1];return{past:t.slice(0,t.length-1),present:i,future:[r,...n]}})(e);case t.redo:return(e=>{const{past:t,present:r,future:n}=e;return r?0===n.length?e:{past:[...t,r],present:n[0],future:n.slice(1)}:e})(e);case t.snapshot:return(e=>{const{action:t,state:r,reducer:n}=e,{past:i,present:a}=r,o=n(a,t);return a?a===o?r:{past:[...i,a],present:o,future:[]}:gu(o)})({state:e,reducer:r,action:i});default:return e}}})({actionTypes:{redo:pr.type,undo:fr.type,snapshot:hr.type},reducer:Ps});function Hu(e,t){let r=0;const n=function(e,t,r){var n,i,a;void 0===t&&(t=50),void 0===r&&(r={});var o=null!=(n=r.isImmediate)&&n,s=null!=(i=r.callback)&&i,c=r.maxWait,u=Date.now(),l=[];function d(){if(void 0!==c){var e=Date.now()-u;if(e+t>=c)return c-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var c=o&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,u=Date.now(),!o){var n=e.apply(r,t);s&&s(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),c){var f=e.apply(r,t);return s&&s(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){void 0!==a&&clearTimeout(a),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}((()=>r=0),500);return i=>a=>async o=>{if(!("function"==typeof o))return a(o);const s=await a(o);if(!function(e){var t;return(null===(t=e.error)||void 0===t?void 0:t.name)===(new ct).name}(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();const c=await async function(e){try{return await e()}catch(e){return""}}(t);i.dispatch(nr({accessToken:c})),i.dispatch(o)}}const Bu=e=>t=>r=>{var n,i;const a=null===(n=r.payload)||void 0===n?void 0:n.analyticsAction;void 0!==a&&(null===(i=r.payload)||void 0===i||delete i.analyticsAction);const o=t(r);return r.type===ia.fulfilled.type&&void 0===a&&console.error("No analytics action associated with search:",r),r.type===Qc.fulfilled&&void 0===a&&console.error("No analytics action associated with recommendation:",r),r.type===yc.fulfilled&&void 0===a&&console.error("No analytics action associated with product recommendation:",r),void 0!==a&&e.dispatch(a),o},Yu={configuration:yu,version:Nu};function Wu(e,t){const r=function(e,t){const{reducers:r}=e,n=function(e){const t={...e};return{get combinedReducer(){return te(t)},add(e){Object.keys(e).filter((e=>!(e in t))).forEach((r=>t[r]=e[r]))}}}({...Yu,...r}),i=t.logger,a=function(e,t,r){const{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=function(e,t){const{renewAccessToken:r}=e.configuration;return[Hu(t,r),lr(t),Bu].concat(e.middlewares||[])}(e,t.logger);return function({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return qe({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),dr(n.logger)]})}({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}(e,t,n);return{addReducers(e){n.add(e),a.replaceReducer(n.combinedReducer)},dispatch:a.dispatch,subscribe:a.subscribe,enableAnalytics(){a.dispatch(sr())},disableAnalytics(){a.dispatch(or())},get state(){return a.getState()},logger:i,store:a}}(e,t),{accessToken:n,organizationId:i,platformUrl:a,analytics:o}=e.configuration;if(r.dispatch(nr({accessToken:n,organizationId:i,platformUrl:a})),o){const{analyticsClientMiddleware:e,...t}=o;r.dispatch(ar(t))}return r}function Ju(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}var Ku=function(e,t,r){var n=r&&r.stringify||Ju;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var a=new Array(i);a[0]=n(e);for(var o=1;o<i;o++)a[o]=n(t[o]);return a.join(" ")}if("string"!=typeof e)return e;var s=t.length;if(0===s)return e;for(var c="",u=0,l=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(l=l>-1?l:0,e.charCodeAt(f+1)){case 100:case 102:if(u>=s)break;if(l<f&&(c+=e.slice(l,f)),null==t[u])break;c+=Number(t[u]),l=f+=2;break;case 105:if(u>=s)break;if(l<f&&(c+=e.slice(l,f)),null==t[u])break;c+=Math.floor(Number(t[u])),l=f+=2;break;case 79:case 111:case 106:if(u>=s)break;if(l<f&&(c+=e.slice(l,f)),void 0===t[u])break;var p=typeof t[u];if("string"===p){c+="'"+t[u]+"'",l=f+2,f++;break}if("function"===p){c+=t[u].name||"<anonymous>",l=f+2,f++;break}c+=n(t[u]),l=f+2,f++;break;case 115:if(u>=s)break;l<f&&(c+=e.slice(l,f)),c+=String(t[u]),l=f+2,f++;break;case 37:l<f&&(c+=e.slice(l,f)),c+="%",l=f+2,f++,u--}++u}++f}if(-1===l)return e;l<d&&(c+=e.slice(l));return c};var Zu=el;const Xu=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},Gu={mapHttpRequest:cl,mapHttpResponse:cl,wrapRequestSerializer:ul,wrapResponseSerializer:ul,wrapErrorSerializer:ul,req:cl,res:cl,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function el(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||Xu;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},i=function(e,t){if(Array.isArray(e))return e.filter((function(e){return"!stdSerializers.err"!==e}));return!0===e&&Object.keys(t)}(e.browser.serialize,n);let a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const o=e.level||"info",s=Object.create(r);s.log||(s.log=ll),Object.defineProperty(s,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(s,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,tl(c,s,"error","log"),tl(c,s,"fatal","error"),tl(c,s,"warn","error"),tl(c,s,"info","log"),tl(c,s,"debug","log"),tl(c,s,"trace","log")}});const c={transmit:t,serialize:i,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:sl(e)};return s.levels=el.levels,s.level=o,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=ll,s.serializers=n,s._serialize=i,s._stdErrSerialize=a,s.child=function(r){if(!r)throw new Error("missing bindings for child Pino");const a=r.serializers;if(i&&a){var o=Object.assign({},n,a),s=!0===e.browser.serialize?Object.keys(o):i;delete r.serializers,nl([r],s,o,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.error=il(e,r,"error"),this.fatal=il(e,r,"fatal"),this.warn=il(e,r,"warn"),this.info=il(e,r,"info"),this.debug=il(e,r,"debug"),this.trace=il(e,r,"trace"),o&&(this.serializers=o,this._serialize=s),t&&(this._logEvent=ol([].concat(e._logEvent.bindings,r)))}return c.prototype=this,new c(this)},t&&(s._logEvent=ol()),s}function tl(e,t,r,n){const i=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?ll:i[r]?i[r]:Xu[r]||Xu[n]||ll,function(e,t,r){if(!e.transmit&&t[r]===ll)return;t[r]=(n=t[r],function(){const i=e.timestamp(),a=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Xu?Xu:this;for(var s=0;s<a.length;s++)a[s]=arguments[s];if(e.serialize&&!e.asObject&&nl(a,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?n.call(o,rl(this,r,a,i)):n.apply(o,a),e.transmit){const n=e.transmit.level||t.level,o=el.levels.values[n],s=el.levels.values[r];if(s<o)return;al(this,{ts:i,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:el.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},a)}});var n}(e,t,r)}function rl(e,t,r,n){e._serialize&&nl(r,e._serialize,e.serializers,e._stdErrSerialize);const i=r.slice();let a=i[0];const o={};n&&(o.time=n),o.level=el.levels.values[t];let s=1+(0|e._childLevel);if(s<1&&(s=1),null!==a&&"object"==typeof a){for(;s--&&"object"==typeof i[0];)Object.assign(o,i.shift());a=i.length?Ku(i.shift(),i):void 0}else"string"==typeof a&&(a=Ku(i.shift(),i));return void 0!==a&&(o.msg=a),o}function nl(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=el.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function il(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function al(e,t,r){const n=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,s=t.val,c=e._logEvent.bindings;nl(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===c.indexOf(e)})),e._logEvent.level.label=a,e._logEvent.level.value=o,n(a,e._logEvent,s),e._logEvent=ol(c)}function ol(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function sl(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?dl:fl}function cl(){return{}}function ul(e){return e}function ll(){}function dl(){return!1}function fl(){return Date.now()}el.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},el.stdSerializers=Gu,el.stdTimeFunctions=Object.assign({},{nullTime:dl,epochTime:fl,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});const pl=e=>e;function hl(e,t){return{analyticsClientMiddleware:function(e){const{analytics:t}=e,r=(e,t)=>t;return(null==t?void 0:t.analyticsClientMiddleware)||r}(e),validatePayload:Jt,preprocessRequest:function(e){return e.preprocessRequest||pl}(e),logger:t}}const gl={organizationId:Bt,accessToken:Bt,platformUrl:new Et({required:!1,emptyAllowed:!1}),name:new Et({required:!1,emptyAllowed:!1}),analytics:new Ft({options:{required:!1},values:{enabled:new It({required:!1}),originLevel2:new Et({required:!1}),originLevel3:new Et({required:!1})}})};const yl=new bt({...gl,search:new Ft({options:{required:!1},values:{pipeline:new Et({required:!1,emptyAllowed:!1}),searchHub:new Et({required:!1,emptyAllowed:!1}),locale:er}})});function ml(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",search:{pipeline:"default",searchHub:"default"}}}const vl=e=>Kt(e,{evt:Bt,type:new Et({required:!1,emptyAllowed:!1})}),bl=e=>ji("analytics/generic/search",Fi.Search,(t=>{vl(e);const{evt:r,meta:n}=e;return t.logSearchEvent(r,n)}))(),wl=e=>ji("analytics/generic/click",Fi.Click,((t,r)=>(_i(e.result),vl(e),t.logClickEvent(e.evt,ki(e.result,r),Pi(e.result)))))(),Sl=e=>ji("analytics/generic/custom",Fi.Custom,(t=>(vl(e),t.logCustomEventWithType(e.evt,e.type,e.meta))))(),Ol=ji("analytics/interface/load",Fi.Search,(e=>e.logInterfaceLoad())),Cl=ji("analytics/interface/change",Fi.Search,((e,t)=>{var r;return e.logInterfaceChange({interfaceChangeTo:(null===(r=t.advancedSearchQueries)||void 0===r?void 0:r.cq)||""})})),ql=ji("analytics/interface/searchFromLink",Fi.Search,(e=>e.logSearchFromLink())),Il=e=>ji("analytics/interface/omniboxFromLink",Fi.Search,(t=>t.logOmniboxFromLink(e)))();function xl(e){return""!==e.search.response.searchUid}const Rl={debug:$u,pipeline:Du,searchHub:_u,search:wu};function El(e){const t=function(e){return Zu({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter},browser:{transmit:{send:(null==e?void 0:e.browserPostLogHook)||(()=>{})}}})}(e.loggerOptions);!function(e,t){try{yl.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}(e.configuration,t);const r=function(e,t){const{search:r}=e;return new Vt({logger:t,preprocessRequest:e.preprocessRequest||pl,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||Ut,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||Qt,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||Ht})}(e.configuration,t),n={...hl(e.configuration,t),searchAPIClient:r},i=Wu({...e,reducers:Rl},n),{search:a}=e.configuration;return a&&i.dispatch(ir(a)),{...i,get state(){return i.state},executeFirstSearch(e=Ol()){if(xl(i.state))return;const t=ia(e);i.dispatch(t)}}}function Al(e){let t;return{subscribe(r){return r(),t=JSON.stringify(this.state),e.subscribe((()=>{(e=>{try{const r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}})(this.state)&&r()}))},get state(){return{}}}}const Fl=e=>{const t=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;const r=e.match(/(\w+(?:\s\w+)*): ([-0-9]+)/g);if(!r)return null;const n={};for(const e of r){const r=e.match(t);if(r){const e=r[1],t=r[2];n[e]=Number(t)}}return n},jl=(e,t)=>{const r=[];let n;for(;null!==(n=t.exec(e));)r.push(n);return r},kl=e=>{const t=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;const r=jl(e[1],/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g);if(!r)return null;const n={};for(const e of r){const r=jl(e[1],t),i={};for(const e of r)i[e[1]]={Correlation:Number(e[2]),"TF-IDF":Number(e[3])};const a=Fl(e[2]);n[Object.keys(i).join(", ")]={terms:i,Weights:a}}return n},Pl=e=>{const t=/(Expression:\s".*")\sScore:\s(?!0)([0-9]+)\n+/g;let r=t.exec(e);const n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function Tl(e){return e.search.response.results.map((e=>({result:e,ranking:(e=>{if(!e)return null;const t=/Document weights:\n((?:.)*?)\n+/g.exec(e),r=/Terms weights:\n((?:.|\n)*)\n+/g.exec(e),n=/Total weight: ([0-9]+)/g.exec(e),i=Pl(e);return{documentWeights:Fl(t?t[1]:null),termsWeight:kl(r),totalWeight:n?Number(n[1]):null,qreWeights:i}})(e.rankingInfo)})))}const Vl=new bt({enabled:new It({default:!1})});function Ml(e,t={}){!function(e){e.addReducers({debug:$u,search:wu,configuration:yu})}(e);const r=Al(e),{dispatch:n}=e;return Zt(e,Vl,t.initialState,"buildRelevanceInspector").enabled&&n(jr()),{...r,get state(){const t=e.state,r=t.debug;if(!t.debug)return{isEnabled:r};const{executionReport:n,basicExpression:i,advancedExpression:a,constantExpression:o,userIdentities:s,rankingExpressions:c}=t.search.response;return{isEnabled:r,rankingInformation:Tl(t),executionReport:n,expressions:{basicExpression:i,advancedExpression:a,constantExpression:o},userIdentities:s,rankingExpressions:c}},enable(){n(jr())},disable(){n(kr())}}}function Dl(e){!function(e){e.addReducers({context:Tu})}(e);const t=Al(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.context.contextValues}},set(e){r(Rr(e))},add(e,t){r(Er({contextKey:e,contextValue:t}))},remove(e){r(Ar(e))}}}function _l(e){!function(e){e.addReducers({configuration:yu,didYouMean:Vu})}(e);const t=Al(e),{dispatch:r}=e;r(Mr());return{...t,get state(){const t=e.state;return{originalQuery:t.didYouMean.originalQuery,wasCorrectedTo:t.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:t.didYouMean.wasAutomaticallyCorrected,queryCorrection:t.didYouMean.queryCorrection,hasQueryCorrection:""!==t.didYouMean.queryCorrection.correctedQuery||""!==t.didYouMean.wasCorrectedTo}},applyCorrection(){r(_r(this.state.queryCorrection.correctedQuery)),r(ia($i()))}}}function $l(e,t){const r=e.dispatch,{options:n,getFacetSearch:i}=t,{facetId:a}=n;return{updateText(e){r(Za({facetId:a,query:e,numberOfValues:i().initialNumberOfValues}))},showMoreResults(){const{initialNumberOfValues:e,options:t}=i();r(Za({facetId:a,numberOfValues:t.numberOfValues+e})),r(co(a))},search(){r(co(a))},select(e){const t=e.rawValue;r(ya({freezeFacetOrder:!0})),r(ia(io({facetId:a,facetValue:t})))},clear(){r(uo({facetId:a}))},get state(){const{response:e,isLoading:t,options:r}=i(),{query:n}=r,a=e.values;return{...e,values:a,isLoading:t,query:n}}}}const Ll=Fe("categoryFacetController/executeToggleSelect",(({facetId:e,selection:t,retrieveCount:r},{dispatch:n,extra:{validatePayload:i}})=>{i(e,Bt),wa(t);const a=((e,t)=>{const r={facetId:e,facetValue:t.value};return"selected"===t.state?ao(r):io(r)})(e,t);n(Ca({facetId:e,selection:t,retrieveCount:r})),n(ya({freezeFacetOrder:!0})),n(ia(a))})),Nl=Fe("categoryFacetController/executeDeselectAll",(({facetId:e},{dispatch:t,extra:{validatePayload:r}})=>{r({facetId:e},{facetId:va}),t(qa(e)),t(ya({freezeFacetOrder:!0})),t(ia(no(e)))})),zl=new Et({regex:/^[a-zA-Z0-9-_]+$/}),Ul=new Et({required:!0}),Ql=new kt({each:new Et}),Hl=new Et,Bl=new It,Yl=new It,Wl=new Ct({min:0}),Jl=new Ct({min:1}),Kl=new It({required:!0}),Zl=new Ft,Xl=new Et,Gl=new Ft({values:{captions:Zl,numberOfValues:Jl,query:Xl}}),ed=new bt({field:Ul,basePath:Ql,delimitingCharacter:Hl,facetId:zl,facetSearch:Gl,filterByBasePath:Bl,filterFacetCount:Yl,injectionDepth:Wl,numberOfValues:Jl,sortCriteria:new Et({constrainTo:["alphanumeric","occurrences"]})});function td(e,t){const{field:r,state:n}=e;if(!function(e){const{field:t,state:r}=e;return rd(r).some((e=>e&&t in e))}(e))return r;const i=r+"_",a=function(e,t){const r=rd(t);return function(e,t){const r=0,n=e.map((e=>{const n=e.split(t)[1],i=parseInt(n,10);return Number.isNaN(i)?r:i})).sort().pop();return null!=n?n:r}(r.map((e=>Object.keys(e||{}))).reduce(((e,t)=>e.concat(t)),[]),e)+1}(i,n);return function(e,t){const r=`A facet with field "${e}" already exists.\n  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}(r,t),`${i}${a}`}function rd(e){const{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:i}=e;return[t,r,n,i]}function nd(e,t){const{state:r,logger:n}=e,{field:i,facetId:a}=t;return a||td({field:i,state:r},n)}function id(e,t){!function(e){e.addReducers({categoryFacetSet:Iu,categoryFacetSearchSet:Ru,configuration:yu,search:wu})}(e);const r=Al(e),{dispatch:n}=e,i=nd(e,t.options),a={facetSearch:{...Wa},..._a,...t.options,facetId:i};Xt(e,ed,a,"buildCategoryFacet");const o=()=>((e,t)=>{var r;return null===(r=e.categoryFacetSet[t])||void 0===r?void 0:r.request})(e.state,i);n(Oa(a));const s=(()=>{const{facetId:t,facetSearch:r}=a,n={facetId:t,...r};return function(e,t){const{dispatch:r}=e,n={...Wa,...t.options},{facetId:i}=n;r(Pa(n));const a=$l(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[i]});return{...a,select(e){r(ka({facetId:i,value:e})),a.select(e)},get state(){return a.state}}}(e,{options:n})})(),{state:c,...u}=s;return{...r,facetSearch:u,toggleSelect:e=>n(Ll({facetId:i,selection:e,retrieveCount:a.numberOfValues})),deselectAll:()=>n(Nl({facetId:i})),sortBy(e){const t=a.facetId;n(xa({facetId:t,criterion:e})),n(ya({freezeFacetOrder:!0})),n(ia(ro({facetId:t,criterion:e})))},isSortedBy:e=>o().sortCriteria===e,showMoreValues(){const{facetId:e,numberOfValues:t}=a,{values:r}=this.state,i=r.length+t;n(Ia({facetId:e,numberOfValues:i})),n(ya({freezeFacetOrder:!0})),n(ia(Ga(e)))},showLessValues(){const{facetId:e,numberOfValues:t}=a;n(Ia({facetId:e,numberOfValues:t})),n(ya({freezeFacetOrder:!0})),n(ia(eo(e)))},get state(){const t=o(),r=hi(e.state,i),{parents:n,values:c}=pi(null==r?void 0:r.values),u=e.state.search.isLoading,l=0!==n.length,d=n.length>0?n[n.length-1].moreValuesAvailable:(null==r?void 0:r.moreValuesAvailable)||!1,f=c.length>a.numberOfValues;return{facetId:i,parents:n,values:c,isLoading:u,hasActiveValues:l,canShowMoreValues:d,canShowLessValues:f,sortCriteria:t.sortCriteria,facetSearch:s.state}}}}const ad=e=>"selected"===e.state,od={facetId:va,selection:new Ft({values:yo})},sd=Fe("facet/executeToggleSelect",(({facetId:e,selection:t},{dispatch:r,extra:{validatePayload:n}})=>{const i=((e,t)=>{const r={facetId:e,facetValue:t.value};return ad(t)?ao(r):io(r)})(e,t);n({facetId:e,selection:t},od),r(bo({facetId:e,selection:t})),r(ya({freezeFacetOrder:!0})),r(ia(i))})),cd=new bt({facetId:zl,field:Ul,delimitingCharacter:Hl,filterFacetCount:Yl,injectionDepth:Wl,numberOfValues:Jl,sortCriteria:new Et({constrainTo:["score","alphanumeric","occurrences","automatic"]}),facetSearch:Gl});function ud(e,t){!function(e){e.addReducers({facetSet:vu,configuration:yu,facetSearchSet:bu,search:wu})}(e);const{dispatch:r}=e,n=Al(e),i=nd(e,t.options),a={facetSearch:{...Wa},...xo,...t.options,facetId:i};Xt(e,cd,a,"buildFacet");const o=()=>li(e.state,i),s=()=>{const{currentValues:e}=o(),t=a.numberOfValues,r=!!e.find((e=>"idle"===e.state));return t<e.length&&r};r(vo(a));const c=(()=>{const{facetId:t,facetSearch:r}=a,n={facetId:t,...r};return function(e,t){const{dispatch:r}=e,{options:n}=t,{facetId:i}=n;r(Ka(n));const a=$l(e,{options:n,getFacetSearch:()=>e.state.facetSearchSet[i]});return{...a,select(e){r(Xa({facetId:i,value:e})),a.select(e)},singleSelect(e){r(wo(i)),r(Xa({facetId:i,value:e})),a.select(e)},get state(){const{values:e}=a.state;return{...a.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}(e,{options:n})})(),{state:u,...l}=c,d=e=>{r(sd({facetId:a.facetId,selection:e}))};return{...n,facetSearch:l,toggleSelect:e=>d(e),toggleSingleSelect:e=>{"idle"===e.state&&r(wo(i)),d(e)},isValueSelected:ad,deselectAll(){r(wo(i)),r(ya({freezeFacetOrder:!0})),r(ia(no(i)))},sortBy(e){r(So({facetId:i,criterion:e})),r(ya({freezeFacetOrder:!0})),r(ia(ro({facetId:i,criterion:e})))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){const e=o().numberOfValues,t=a.numberOfValues;r(Oo({facetId:i,numberOfValues:e+(t-e%t)})),r(Co({facetId:i,isFieldExpanded:!0})),r(ya({freezeFacetOrder:!0})),r(ia(Ga(i)))},showLessValues(){const e=a.numberOfValues,t=Math.max(e,(()=>{const{currentValues:e}=o();return e.filter((e=>"idle"!==e.state)).length})());r(Oo({facetId:i,numberOfValues:t})),r(Co({facetId:i,isFieldExpanded:!1})),r(ya({freezeFacetOrder:!0})),r(ia(eo(i)))},get state(){const t=o(),r=di(e.state,i),n=e.state.search.isLoading,a=t.sortCriteria,u=r?r.values:[],l=u.some((e=>"idle"!==e.state)),d=!!r&&r.moreValuesAvailable;return{facetId:i,values:u,sortCriterion:a,isLoading:n,hasActiveValues:l,canShowMoreValues:d,canShowLessValues:s(),facetSearch:c.state}}}}const ld=e=>"selected"===e.state;function dd(e,t){const{facetId:r,getRequest:n}=t,i=Al(e),a=e.dispatch;return{...i,isValueSelected:ld,deselectAll(){a(wo(r)),a(ya({freezeFacetOrder:!0})),a(ia(no(r)))},sortBy(e){a($o({facetId:r,criterion:e})),a(ya({freezeFacetOrder:!0})),a(ia(ro({facetId:r,criterion:e})))},isSortedBy(e){return this.state.sortCriterion===e},get state(){const t=n(),i=ui(e.state,r),a=t.sortCriteria,o=i?i.values:[],s=e.state.search.isLoading,c=o.some((e=>"idle"!==e.state));return{facetId:r,values:o,sortCriterion:a,hasActiveValues:c,isLoading:s}}}}function fd(e,t){if(!e.generateAutomaticRanges&&void 0===e.currentValues){throw new Error(`currentValues should be specified for ${t} when generateAutomaticRanges is false.`)}}const pd=Fe("rangeFacet/executeToggleSelect",(({facetId:e,selection:t},{dispatch:r,extra:{validatePayload:n}})=>{n({facetId:e,selection:t},ko(t));const i=((e,t)=>{const r={facetId:e,facetValue:`${t.start}..${t.end}`};return ld(t)?ao(r):io(r)})(e,t);r(ya({freezeFacetOrder:!0})),r(ia(i))})),hd={facetId:va,selection:new Ft({values:jo})},gd=Fe("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hd),t(Qo(e)),t(pd(e))})),yd=["idle","selected"],md=["ascending","descending"],vd=["even","equiprobable"],bd={start:new Et,end:new Et,endInclusive:new It,state:new Et({constrainTo:yd})},wd=new bt({facetId:zl,field:Ul,generateAutomaticRanges:Kl,filterFacetCount:Yl,injectionDepth:Wl,numberOfValues:Jl,currentValues:new kt({each:new Ft({values:bd})}),sortCriteria:new Et({constrainTo:md}),rangeAlgorithm:new Et({constrainTo:vd})});function Sd(e,t){Xt(e,wd,t,"buildDateFacet"),zo(t)}function Od(e,t){!function(e){e.addReducers({configuration:yu,search:wu,dateFacetSet:Ou})}(e),fd(t.options,"buildDateFacet");const r=e.dispatch,n=nd(e,t.options),i={currentValues:[],...t.options,facetId:n};Sd(e,i),r(Uo(i));const a=dd(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n]}),o=e=>{r(gd({facetId:n,selection:e}))};return{...a,toggleSelect:e=>o(e),toggleSingleSelect:e=>{"idle"===e.state&&r(wo(n)),o(e)},get state(){return a.state}}}const Cd={facetId:va,selection:new Ft({values:Fo})},qd=Fe("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Cd),t(us(e)),t(pd(e))})),Id={start:new Ct,end:new Ct,endInclusive:new It,state:new Et({constrainTo:yd})},xd=new bt({facetId:zl,field:Ul,generateAutomaticRanges:Kl,filterFacetCount:Yl,injectionDepth:Wl,numberOfValues:Jl,currentValues:new kt({each:new Ft({values:Id})}),sortCriteria:new Et({constrainTo:md}),rangeAlgorithm:new Et({constrainTo:vd})});function Rd(e,t){Xt(e,xd,t,"buildNumericFacet"),ss(t)}function Ed(e){return{endInclusive:!1,state:"idle",...e}}function Ad(e,t){!function(e){e.addReducers({numericFacetSet:qu,configuration:yu,search:wu})}(e),fd(t.options,"buildNumericFacet");const r=e.dispatch,n=nd(e,t.options),i={currentValues:[],...t.options,facetId:n};Rd(e,i),r(cs(i));const a=dd(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n]});return{...a,toggleSelect:e=>(e=>{r(qd({facetId:n,selection:e}))})(e),toggleSingleSelect(e){"idle"===e.state&&r(wo(n)),r(qd({facetId:n,selection:e}))},get state(){return a.state}}}const Fd=(e,t)=>{const r=((e,t)=>{const r=ui(e,t);if(function(e,t){return!!t&&t.facetId in e.numericFacetSet}(e,r))return r})(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]};function jd(e,t){var r;!function(e){e.addReducers({numericFacetSet:qu,configuration:yu,search:wu})}(e);const n=Al(e),{dispatch:i}=e,a=()=>e.state,o=nd(e,t.options),s={...t.options,currentValues:(null===(r=t.initialState)||void 0===r?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};return Rd(e,s),i(cs(s)),{...n,clear:()=>{i(ls({facetId:o,values:[]})),i(ya({freezeFacetOrder:!0})),i(ia(no(o)))},setRange:e=>{const t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=ls({facetId:o,values:[t]});return!r.error&&(i(r),i(ya({freezeFacetOrder:!0})),i(ia(io({facetId:o,facetValue:`${t.start}..${t.end}`}))),!0)},get state(){const e=a().search.isLoading,t=Fd(a(),o),r=t.length?t[0]:void 0;return{facetId:o,isLoading:e,range:r}}}}const kd=(e,t)=>{const r=((e,t)=>{const r=ui(e,t);if(function(e,t){return!!t&&t.facetId in e.dateFacetSet}(e,r))return r})(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]};function Pd(e,t){var r;!function(e){e.addReducers({dateFacetSet:Ou,configuration:yu,search:wu})}(e);const n=Al(e),{dispatch:i}=e,a=()=>e.state,o=nd(e,t.options),s={...t.options,currentValues:(null===(r=t.initialState)||void 0===r?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};return Sd(e,s),i(Uo(s)),{...n,clear:()=>{i(Ho({facetId:o,values:[]})),i(ya({freezeFacetOrder:!0})),i(ia(no(o)))},setRange:e=>{const t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=Ho({facetId:o,values:[t]});return!r.error&&(i(r),i(ya({freezeFacetOrder:!0})),i(ia(io({facetId:o,facetValue:`${t.start}..${t.end}`}))),!0)},get state(){const e=a().search.isLoading,t=kd(a(),o),r=t.length?t[0]:void 0;return{facetId:o,isLoading:e,range:r}}}}const Td=ji("history/analytics/forward",Fi.Search,(e=>e.logSearchEvent("historyForward"))),Vd=ji("history/analytics/backward",Fi.Search,(e=>e.logSearchEvent("historyBackward")));function Md(e){!function(e){e.addReducers({history:Qu,configuration:yu,facetOrder:Cu})}(e);const t=Al(e),{dispatch:r}=e;return{...t,get state(){return e.state.history},async back(){this.state.past.length&&this.state.present&&(await r(gr()),r(ia(Vd())))},async forward(){this.state.future.length&&this.state.present&&(await r(yr()),r(ia(Td())))}}}function Dd(e){return e.pagination.numberOfResults}const _d=fe((function(e){return e.pagination.firstResult}),Dd,nc),$d=fe((function(e){return e.pagination.totalCountFiltered}),Dd,ic),Ld=fe(_d,$d,((e,t)=>t),((e,t,r)=>{let n=function(e,t){const r=t%2==0,n=Math.floor(t/2);return{start:e-n,end:e+(r?n-1:n)}}(e,r);return n=function(e){const t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}(n),n=function(e,t){const r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),i=e.end-r;return{start:n,end:i}}(n,t),function(e){const t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}(n)}));const Nd=ji("analytics/pager/resize",Fi.Search,((e,t)=>{var r;return e.logPagerResize({currentResultsPerPage:(null===(r=t.pagination)||void 0===r?void 0:r.numberOfResults)||10})})),zd=ji("analytics/pager/number",Fi.Search,((e,t)=>e.logPagerNumber({pagerNumber:_d(t)}))),Ud=ji("analytics/pager/next",Fi.Search,((e,t)=>e.logPagerNext({pagerNumber:_d(t)}))),Qd=ji("analytics/pager/previous",Fi.Search,((e,t)=>e.logPagerPrevious({pagerNumber:_d(t)}))),Hd=new bt({numberOfPages:new Ct({default:5,min:0})}),Bd=new bt({page:new Ct({min:1})});function Yd(e,t={}){!function(e){e.addReducers({configuration:yu,pagination:mu})}(e);const r=Al(e),{dispatch:n}=e,i=Xt(e,Hd,t.options,"buildPager"),a=Zt(e,Bd,t.initialState,"buildPager").page;a&&n(Js(a));const o=()=>{const{numberOfPages:t}=i;return Ld(e.state,t)};return{...r,get state(){const t=_d(e.state),r=$d(e.state),n=t>1&&r>0,i=t<r;return{currentPage:t,currentPages:o(),maxPage:r,hasPreviousPage:n,hasNextPage:i}},selectPage(e){n(Ks(e)),n(ia(zd()))},nextPage(){n(Zs()),n(ia(Ud()))},previousPage(){n(Xs()),n(ia(Qd()))},isCurrentPage(e){return e===this.state.currentPage}}}function Wd(e){!function(e){e.addReducers({search:wu})}(e);const t=Al(e),r=()=>e.state;return{...t,get state(){return{hasError:null!==r().search.error,error:r().search.error}}}}function Jd(e){!function(e){e.addReducers({search:wu})}(e);const t=Al(e);return{...t,get state(){const t=e.state;return{hasError:null!==t.search.error,isLoading:t.search.isLoading,hasResults:!!t.search.results.length,firstSearchExecuted:xl(t)}}}}function Kd(e){!function(e){e.addReducers({search:wu,pagination:mu})}(e);const t=Al(e),r=Jd(e),n=()=>{const t=e.state.search.duration/1e3;return Math.round(100*(t+Number.EPSILON))/100};return{...t,get state(){const t=e.state;return{...r.state,durationInMilliseconds:t.search.duration,durationInSeconds:n(),firstResult:t.pagination.firstResult+1,hasDuration:0!==t.search.duration,hasQuery:""!==t.search.queryExecuted,lastResult:t.pagination.firstResult+t.search.results.length,query:t.search.queryExecuted,total:t.pagination.totalCountFiltered}}}}const Zd=new bt({fieldsToInclude:new kt({required:!1,each:new Et({required:!0,emptyAllowed:!1})})});function Xd(e,t){!function(e){e.addReducers({search:wu,configuration:yu,fields:Mu})}(e);const r=Al(e),n=Jd(e),{dispatch:i}=e,a=Xt(e,Zd,null==t?void 0:t.options,"buildResultList");a.fieldsToInclude&&i(ys(a.fieldsToInclude));const o=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered;let s=0,c=0;let u=!1;return{...r,get state(){const t=e.state;return{...n.state,results:t.search.results,searchUid:t.search.response.searchUid,moreResultsAvailable:o()}},fetchMoreResults:()=>{if(e.state.search.isLoading)return;if(!o())return void e.logger.info("No more results are available for the result list to fetch.");if(Date.now()-s<200){if(c++,c>=5)return s=Date.now(),!u&&e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively 5 times, with little delay. Please verify the conditions under which the function is called.'),void(u=!0)}else c=0;u=!1,i(aa()).then((()=>s=Date.now()))}}}const Gd=e=>(e=>ji("analytics/result/open",Fi.Click,((t,r)=>(_i(e),t.logDocumentOpen(ki(e,r),Pi(e))))))(e)();function ef(e,t){!function(e){e.addReducers({configuration:yu})}(e);const r={selectionDelay:1e3,...t.options};let n=!1;const i=()=>{n||(n=!0,e.dispatch(Gd(r.result)))};let a;return{select:i,beginDelayedSelect(){a=setTimeout(i,r.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}const tf=new bt({numberOfResults:new Ct({min:0})});function rf(e,t={}){!function(e){e.addReducers({pagination:mu,configuration:yu})}(e);const r=Al(e),{dispatch:n}=e,i=Zt(e,tf,t.initialState,"buildResultsPerPage").numberOfResults;return void 0!==i&&n(Ys(i)),{...r,get state(){return{numberOfResults:e.state.pagination.numberOfResults}},set(e){n(Ws(e)),n(ia(Nd()))},isSetTo(e){return e===this.state.numberOfResults}}}const nf=ji("analytics/searchbox/submit",Fi.Search,(e=>e.logSearchboxSubmit())),af={enableQuerySyntax:!1,numberOfSuggestions:5},of={open:new Et,close:new Et},sf={id:Bt,numberOfSuggestions:new Ct({min:0}),enableQuerySyntax:new It,highlightOptions:new Ft({values:{notMatchDelimiters:new Ft({values:of}),exactMatchDelimiters:new Ft({values:of}),correctionDelimiters:new Ft({values:of})}})},cf=new bt(sf),uf=e=>ji("analytics/querySuggest",Fi.Search,((t,r)=>{const n=lf(r,e);return t.logOmniboxAnalytics(n)}))();function lf(e,t){const{id:r,suggestion:n}=t,i=e.querySuggest&&e.querySuggest[r];if(!i)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);const a=i.completions.map((e=>e.expression));return{suggestionRanking:a.indexOf(n),partialQuery:i.partialQueries[i.partialQueries.length-1],partialQueries:i.partialQueries,suggestions:a}}function df(e,t){return(e=pf(e)).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,i)=>r?ff(r,t.notMatchDelimiters):n?ff(n,t.exactMatchDelimiters):i?ff(i,t.correctionDelimiters):e))}function ff(e,t){return t?t.open+e+t.close:e}function pf(e){return e.replace(/&/g,"&amp").replace(/</g,"&lt").replace(/>/g,"&gt").replace(/"/g,"&quot").replace(/`/g,"&#96").replace(/'/g,"&#x27")}var hf=Object.freeze({__proto__:null,highlightString:function(e){if(Cs(e.openingDelimiter)||Cs(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(Ot(e.content)||Cs(e.content))return e.content;const t=e.content.length;let r="",n=0;for(let i=0;i<e.highlights.length;i++){const a=e.highlights[i],o=a.offset,s=o+a.length;if(s>t)break;r+=pf(e.content.slice(n,o)),r+=e.openingDelimiter,r+=pf(e.content.slice(o,s)),r+=e.closingDelimiter,n=s}return n!==t&&(r+=e.content.slice(n)),r},getHighlightedSuggestion:df,escape:pf});function gf(e,t={}){var r,n;!function(e){e.addReducers({query:Eu,querySuggest:ku,configuration:yu,querySet:Fu,search:wu})}(e);const i=Al(e),{dispatch:a}=e,o=(null===(r=t.options)||void 0===r?void 0:r.id)||Ss("search_box"),s={id:o,highlightOptions:{...null===(n=t.options)||void 0===n?void 0:n.highlightOptions},...af,...t.options};Xt(e,cf,s,"buildSearchBox"),a(wc({id:o,query:""})),a(Cc({id:o,q:e.state.query.q,count:s.numberOfSuggestions}));const c=()=>e.state.querySet[s.id],u=async e=>{const{enableQuerySyntax:t}=s;a(Ta()),a(Ni({q:c(),enableQuerySyntax:t})),a(Ks(1)),await a(ia(e))};return{...i,updateText(e){a(Sc({id:o,query:e})),this.showSuggestions()},clear(){a(Sc({id:o,query:""})),a(xc({id:o}))},showSuggestions(){s.numberOfSuggestions&&a(Rc({id:o}))},selectSuggestion(e){a(Ic({id:o,expression:e})),u(uf({id:o,suggestion:e})).then((()=>{a(xc({id:o}))}))},submit(){u(nf()),a(xc({id:o}))},get state(){const t=e.state,r=function(e,t){if(!e)return[];return e.completions.map((e=>({highlightedValue:df(e.highlighted,t),rawValue:e.expression})))}(t.querySuggest[s.id],s.highlightOptions);return{value:c(),suggestions:r,isLoading:t.search.isLoading}}}}const yf=ji("analytics/sort/results",Fi.Search,((e,t)=>e.logResultsSort({resultsSortBy:t.sortCriteria||Zi()})));function mf(e,t){if(!t)return;const r=new bt({criterion:new kt({each:Ki})}),n=function(e){if(!e.criterion)return[];return Pt(e.criterion)?e.criterion:[e.criterion]}(t),i={...t,criterion:n};Zt(e,r,i,"buildSort")}function vf(e,t={}){var r;!function(e){e.addReducers({configuration:yu,sortCriteria:Pu})}(e);const n=Al(e),{dispatch:i}=e;mf(e,t.initialState);const a=null===(r=t.initialState)||void 0===r?void 0:r.criterion;return a&&i(lu(a)),{...n,sortBy(e){i(du(e)),i(Ks(1)),i(ia(yf()))},isSortedBy(e){return this.state.sortCriteria===Qi(e)},get state(){return{sortCriteria:e.state.sortCriteria}}}}const bf=new bt({expression:new Et({required:!0,emptyAllowed:!0}),id:new Et({required:!0,emptyAllowed:!1})}),wf=new bt({isActive:new It});function Sf(e,t){!function(e){const t=Cr().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}(t.options.id),function(e){e.addReducers({configuration:yu,advancedSearchQueries:Au})}(e);const r=Al(e),{dispatch:n}=e,i=Xt(e,bf,t.options,"buildTab");if(Zt(e,wf,t.initialState,"buildTab").isActive){const{id:e}=i;e&&n(cr({originLevel2:e})),n(br({cq:i.expression}))}return{...r,select(){const{id:e}=i;e&&n(cr({originLevel2:e})),n(vr({cq:i.expression})),n(ia(Cl()))},get state(){return{isActive:e.state.advancedSearchQueries.cq===i.expression}}}}function Of(e){!function(e){e.addReducers({search:wu,facetOptions:xu})}(e);const t=Al(e);return{...t,sort(e){return ea(e,this.state.facetIds)},get state(){return{facetIds:e.state.search.response.facets.map((e=>e.facetId))}}}}const Cf=()=>ji("analytics/facet/deselectAllFacets",Fi.Search,(e=>e.logBreadcrumbResetAll()))(),qf={categoryFacetId:va,categoryFacetPath:new kt({required:!0,each:Bt})},If=e=>ji("analytics/categoryFacet/breadcrumb",Fi.Search,((t,r)=>(Kt(e,qf),t.logBreadcrumbFacet(((e,{categoryFacetId:t,categoryFacetPath:r})=>{const n=e.categoryFacetSet[t],i=null==n?void 0:n.request.field;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:i,categoryFacetTitle:`${i}_${t}`}})(r,e)))))(),xf=(e,{facetId:t,selection:r})=>{const n=e.dateFacetSet[t]||e.numericFacetSet[t];return{facetId:t,facetField:n.field,facetTitle:`${n.field}_${t}`,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:""+r.end,facetRangeStart:""+r.start}},Rf=e=>ji("analytics/numericFacet/breadcrumb",Fi.Search,((t,r)=>{Kt(e,ko(e.selection));const n=xf(r,e);return t.logBreadcrumbFacet(n)}))(),Ef=e=>ji("analytics/dateFacet/breadcrumb",Fi.Search,((t,r)=>{Kt(e,ko(e.selection));const n=xf(r,e);return t.logBreadcrumbFacet(n)}))();function Af(e){!function(e){e.addReducers({configuration:yu,search:wu,facetSet:vu,numericFacetSet:qu,dateFacetSet:Ou,categoryFacetSet:Iu})}(e);const t=Al(e),{dispatch:r}=e,n=(t,r,n)=>Object.keys(t).map((i=>{const a=n(e.state,i).map((e=>({value:e,deselect:()=>r({facetId:i,selection:e})})));return{facetId:i,field:t[i].field,values:a}})).filter((e=>e.values.length)),i=()=>n(e.state.facetSet,(({facetId:e,selection:t})=>{const n=oo({facetId:e,facetValue:t.value});r(bo({facetId:e,selection:t})),r(qo({facetId:e,freezeCurrentValues:!1})),r(ia(n))}),fi),a=()=>n(e.state.numericFacetSet,(e=>{r(us(e)),r(ia(Rf(e)))}),Fd),o=()=>n(e.state.dateFacetSet,(e=>{r(Qo(e)),r(ia(Ef(e)))}),kd),s=t=>{const n=gi(e.state,t);return{facetId:t,field:e.state.categoryFacetSet[t].request.field,path:n,deselect:()=>{r(qa(t)),r(ia(If({categoryFacetPath:n.map((e=>e.value)),categoryFacetId:t})))}}},c=()=>Object.keys(e.state.categoryFacetSet).map(s).filter((e=>e.path.length));return{...t,get state(){return{facetBreadcrumbs:i(),categoryFacetBreadcrumbs:c(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:o(),hasBreadcrumbs:!![...i(),...a(),...o(),...c()].length}},deselectAll:()=>{r(Ta()),r(ia(Cf()))},deselectBreadcrumb(e){e.deselect()}}}const Ff=new bt({...sf,redirectionUrl:new Et({required:!0,emptyAllowed:!1,url:!0})});function jf(e,t){!function(e){e.addReducers({redirection:ju,configuration:yu,query:Eu,querySuggest:ku})}(e);const{dispatch:r}=e,n=()=>e.state,i=t.options.id||Ss("standalone_search_box"),a={id:i,highlightOptions:{...t.options.highlightOptions},...af,...t.options};Xt(e,Ff,a,"buildStandaloneSearchBox");const o=gf(e,{options:a});let s={cause:"",metadata:null};return{...o,updateText(e){s={cause:"searchFromLink",metadata:null},o.updateText(e)},selectSuggestion(e){s=function(e,t,r){return{cause:"omniboxFromLink",metadata:lf(e,{id:t,suggestion:r})}}(n(),i,e),r(Ic({id:i,expression:e})),this.submit()},submit(){r(Ni({q:this.state.value,enableQuerySyntax:a.enableQuerySyntax})),r(Xc({defaultRedirectionUrl:a.redirectionUrl}))},get state(){const e=n();return{...o.state,redirectTo:e.redirection.redirectTo,analytics:s}}}}const kf=new bt({parameters:new Ft({options:{required:!0},values:wr})});function Pf(e,t){const{dispatch:r}=e,n=Al(e);return Zt(e,kf,t.initialState,"buildSearchParameterManager"),r(Sr(t.initialState.parameters)),{...n,get state(){const t=e.state;return{parameters:{...Tf(t),...Vf(t),...Mf(t),...Df(t),..._f(t),...$f(t),...Lf(t),...Nf(t),...zf(t),...Uf(t),...Qf(t),...Bf(t)}}}}}function Tf(e){if(void 0===e.query)return{};const t=e.query.q;return""!==t?{q:t}:{}}function Vf(e){if(void 0===e.query)return{};const t=e.query.enableQuerySyntax;return!1!==t?{enableQuerySyntax:t}:{}}function Mf(e){if(void 0===e.advancedSearchQueries)return{};const{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function Df(e){if(void 0===e.advancedSearchQueries)return{};const{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function _f(e){if(void 0===e.pagination)return{};const t=e.pagination.firstResult;return 0!==t?{firstResult:t}:{}}function $f(e){if(void 0===e.pagination)return{};const t=e.pagination.numberOfResults;return 10!==t?{numberOfResults:t}:{}}function Lf(e){if(void 0===e.sortCriteria)return{};const t=e.sortCriteria;return t!==Zi()?{sortCriteria:t}:{}}function Nf(e){if(void 0===e.facetSet)return{};const t=Object.entries(e.facetSet).map((([e,t])=>{const r=t.currentValues.filter((e=>"selected"===e.state)).map((e=>e.value));return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{f:t}:{}}function zf(e){if(void 0===e.categoryFacetSet)return{};const t=Object.entries(e.categoryFacetSet).map((([e,t])=>{const{parents:r}=pi(t.request.currentValues),n=r.map((e=>e.value));return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{cf:t}:{}}function Uf(e){if(void 0===e.numericFacetSet)return{};const t=Object.entries(e.numericFacetSet).map((([e,t])=>{const r=Hf(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{nf:t}:{}}function Qf(e){if(void 0===e.dateFacetSet)return{};const t=Object.entries(e.dateFacetSet).map((([e,t])=>{const r=Hf(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{df:t}:{}}function Hf(e){return e.filter((e=>"selected"===e.state))}function Bf(e){if(void 0===e.debug)return{};const t=e.debug;return!1!==t?{debug:t}:{}}function Yf(){return{serialize:Wf,deserialize:Xf}}function Wf(e){return Object.entries(e).map(Jf).filter((e=>e)).join("&")}function Jf(e){const[t,r]=e;return tp(t)?"f"===t||"cf"===t?function(e){if(!Kf(e))return!1;return Zf(e,(e=>"string"==typeof e))}(r)?function(e,t){return Object.entries(t).map((([t,r])=>`${e}[${t}]=${r.join(",")}`)).join("&")}(t,r):"":"nf"===t||"df"===t?function(e){if(!Kf(e))return!1;return Zf(e,(e=>Kf(e)&&"start"in e&&"end"in e))}(r)?function(e,t){return Object.entries(t).map((([t,r])=>{const n=r.map((({start:e,end:t})=>`${e}..${t}`)).join(",");return`${e}[${t}]=${n}`})).join("&")}(t,r):"":`${t}=${r}`:""}function Kf(e){return!(!e||"object"!=typeof e)}function Zf(e,t){return 0===Object.entries(e).filter((e=>{const r=e[1];return!Array.isArray(r)||!r.every(t)})).length}function Xf(e){return e.split("&").map((e=>function(e){const[t,...r]=e.split("="),n=r.join("=");return[t,n]}(e))).map(Gf).filter(ep).map(rp).reduce(((e,t)=>{const[r,n]=t;if("f"===r||"cf"===r||"nf"===r||"df"===r){const t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}}),{})}function Gf(e){const[t,r]=e,n=/^(f|cf|nf|df)\[(.+)\]$/.exec(t);if(!n)return e;const i=n[1],a={[n[2]]:function(e,t){if("nf"===e)return t.map((e=>e.split("..").map(parseFloat))).filter((e=>2===e.length&&e.every(Number.isFinite))).map((([e,t])=>Ed({start:e,end:t,state:"selected"})));if("df"===e)return function(e){return e.map((e=>e.split(".."))).filter((e=>2===e.length&&e.every(Vo))).map((([e,t])=>Mo({start:e,end:t,useLocalTime:!0,state:"selected"})))}(t);return t}(i,r.split(","))};return[i,JSON.stringify(a)]}function ep(e){const t=tp(e[0]),r=2===e.length;return t&&r}function tp(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,cf:!0,nf:!0,df:!0,debug:!0}}function rp(e){const[t,r]=e;return"enableQuerySyntax"===t||"debug"===t?[t,"true"===r]:"firstResult"===t||"numberOfResults"===t?[t,parseInt(r)]:"f"===t||"cf"===t||"nf"===t||"df"===t?[t,JSON.parse(r)]:e}function np(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function ip(e){const t={};return Object.keys(e).forEach((r=>t[r]=e[r].map((e=>`${e.start}..${e.end}`)))),t}function ap(e={},t={}){const r=Object.keys(e),n=Object.keys(t),i=r.filter((e=>!n.includes(e)));if(i.length){const t=i[0];return e[t].length>1?no(t):ao({facetId:t,facetValue:e[t][0]})}const a=n.filter((e=>!r.includes(e)));if(a.length){const e=a[0];return io({facetId:e,facetValue:t[e][0]})}const o=n.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!o)return Cl();const s=e[o],c=t[o],u=c.filter((e=>!s.includes(e)));if(u.length)return io({facetId:o,facetValue:u[0]});const l=s.filter((e=>!c.includes(e)));return l.length?ao({facetId:o,facetValue:l[0]}):Cl()}function op(e={},t={}){return ap(ip(e),ip(t))}const sp=new bt({fragment:new Et});function cp(e,t){!function(e){e.addReducers({configuration:yu})}(e),Zt(e,sp,t.initialState,"buildUrlManager");const r=t=>{return{...(r=e.state,{q:"",enableQuerySyntax:!1,aq:null!==(i=null===(n=r.advancedSearchQueries)||void 0===n?void 0:n.defaultFilters.aq)&&void 0!==i?i:"",cq:null!==(o=null===(a=r.advancedSearchQueries)||void 0===a?void 0:a.defaultFilters.cq)&&void 0!==o?o:"",firstResult:0,numberOfResults:10,sortCriteria:Zi(),f:{},cf:{},nf:{},df:{},debug:!1}),...dp(t)};var r,n,i,a,o},n=Al(e),{dispatch:i}=e;let a=lp(t.initialState.fragment);const o=Pf(e,{initialState:{parameters:dp(a)}});return{...n,subscribe(t){const r=()=>{const e=this.state.fragment;up(a,e)||(a=e,t())};return r(),e.subscribe(r)},get state(){return{fragment:Yf().serialize(o.state.parameters)}},synchronize(e){const t=lp(e);if(up(a,t))return;const n=r(a),o=r(t);var s,c;a=t,i(Sr(o)),i(ia((c=o,(s=n).q!==c.q?nf():s.sortCriteria!==c.sortCriteria?yf():s.firstResult!==c.firstResult?zd():s.numberOfResults!==c.numberOfResults?Nd():np(s.f,c.f)?ap(s.f,c.f):np(s.cf,c.cf)?ap(s.cf,c.cf):np(s.nf,c.nf)?op(s.nf,c.nf):np(s.df,c.df)?op(s.df,c.df):Cl())))}}}function up(e,t){if(e===t)return!0;const r=dp(e),n=dp(t);return ks(r,n)}function lp(e){return decodeURIComponent(e)}function dp(e){return Yf().deserialize(e)}const fp=e=>ji("analytics/resultPreview/open",Fi.Click,((t,r)=>{_i(e);const n=ki(e,r),i=Pi(e);return t.logDocumentQuickview(n,i)}));function pp(e,t){!function(e){e.addReducers({configuration:yu,resultPreview:Lu})}(e);const{dispatch:r}=e,n=Al(e),{result:i,maximumPreviewSize:a}=t.options,o=i.uniqueId;return{...n,fetchResultContent(){r(tu({uniqueId:o,requestedOutputSize:a})),r((e=>fp(e)())(i))},get state(){const t=i.hasHtmlVersion,r=e.state.resultPreview;return{content:o===r.uniqueId?r.content:"",resultHasPreview:t,isLoading:r.isLoading}}}}const hp=new bt(ms);function gp(e,t={}){var r;!function(e){e.addReducers({search:wu,configuration:yu,folding:Su})}(e);const n=Xd(e,t),{dispatch:i}=e,a=(null===(r=t.options)||void 0===r?void 0:r.folding)?Xt(e,hp,t.options.folding,"buildFoldedResultList"):{};return i(vs({...a})),{...n,loadCollection:t=>{i(bs(t.result.raw[e.state.folding.fields.collection]))},get state(){const t=e.state;return{...n.state,results:n.state.results.map((e=>{const r=e.raw[t.folding.fields.collection];return r&&t.folding.collections[r]?t.folding.collections[r]:{result:e,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}}))}}}}const yp=ji("analytics/trigger/query",Fi.Search,((e,t)=>{var r;if(null===(r=t.triggers)||void 0===r?void 0:r.query)return e.logTriggerQuery()})),mp=ji("analytics/trigger/notify",Fi.Search,((e,t)=>{var r;if(null===(r=t.triggers)||void 0===r?void 0:r.notification)return e.logTriggerNotify({notification:t.triggers.notification})})),vp=ji("analytics/trigger/redirect",Fi.Search,((e,t)=>{var r;if(null===(r=t.triggers)||void 0===r?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.triggers.redirectTo})})),bp=ji("analytics/trigger/execute",Fi.Search,((e,t)=>{var r;if(null===(r=t.triggers)||void 0===r?void 0:r.execute)return e.logTriggerExecute({executed:t.triggers.execute.functionName})}));function wp(e){!function(e){e.addReducers({triggers:zu})}(e);const t=Al(e),{dispatch:r}=e,n=()=>e.state;let i=n().triggers.redirectTo;return{...t,subscribe(t){const n=()=>{const e=i!==this.state.redirectTo;i=this.state.redirectTo,e&&this.state.redirectTo&&(t(),r(vp()))};return n(),e.subscribe(n)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function Sp(e){!function(e){e.addReducers({triggers:zu,query:Eu})}(e);const t=Al(e),{dispatch:r}=e,n=()=>e.state;let i=n().triggers.query,a=n().query.q;return{...t,subscribe(t){const o=()=>{const e=i!==this.state.newQuery;if(i=this.state.newQuery,e&&this.state.newQuery){a=n().query.q;const e={q:n().triggers.query};r(Ni(e)),t(),r(ia(yp()))}};return o(),e.subscribe(o)},get state(){return{newQuery:n().triggers.query,originalQuery:a,wasQueryModified:""!==n().triggers.query}}}}function Op(e){!function(e){e.addReducers({triggers:zu})}(e);const t=Al(e),{dispatch:r}=e,n=()=>e.state;let i=n().triggers.execute.functionName,a=n().triggers.execute.params;return{...t,subscribe(t){const n=()=>{const e=i!==this.state.functionName||a!==this.state.params;i=this.state.functionName,a=this.state.params,e&&this.state.functionName&&(t(),r(bp()))};return n(),e.subscribe(n)},get state(){return{functionName:n().triggers.execute.functionName,params:n().triggers.execute.params}}}}function Cp(e){!function(e){e.addReducers({triggers:zu})}(e);const t=Al(e),{dispatch:r}=e,n=()=>e.state;let i=n().triggers.notification;return{...t,subscribe(t){const a=()=>{const e=i!==this.state.notification;i=this.state.notification,e&&n().triggers.notification&&(t(),r(mp()))};return a(),e.subscribe(a)},get state(){return{notification:n().triggers.notification}}}}const qp=ji("analytics/smartSnippet/expand",Fi.Custom,(e=>e.logExpandSmartSnippet())),Ip=ji("analytics/smartSnippet/collapse",Fi.Custom,(e=>e.logCollapseSmartSnippet())),xp=ji("analytics/smartSnippet/like",Fi.Custom,(e=>e.logLikeSmartSnippet())),Rp=ji("analytics/smartSnippet/dislike",Fi.Custom,(e=>e.logDislikeSmartSnippet())),Ep=e=>ji("analytics/smartSnippetSuggestion/expand",Fi.Custom,(t=>(Kt(e,Pc()),t.logExpandSmartSnippetSuggestion(e))))(),Ap=e=>ji("analytics/smartSnippetSuggestion/expand",Fi.Custom,(t=>(Kt(e,Pc()),t.logCollapseSmartSnippetSuggestion(e))))();function Fp(e){!function(e){e.addReducers({search:wu,questionAnswering:Uu})}(e);const t=Al(e);return{...t,get state(){const t=e.state;return{disliked:t.questionAnswering.disliked,liked:t.questionAnswering.liked,expanded:t.questionAnswering.expanded,answerFound:""!==t.search.response.questionAnswer.answerSnippet,question:t.search.response.questionAnswer.question,answer:t.search.response.questionAnswer.answerSnippet,documentId:t.search.response.questionAnswer.documentId}},expand(){e.dispatch(qp()),e.dispatch(Tc())},collapse(){e.dispatch(Ip()),e.dispatch(Vc())},like(){e.dispatch(xp()),e.dispatch(Mc())},dislike(){e.dispatch(Rp()),e.dispatch(Dc())}}}function jp(e){!function(e){e.addReducers({search:wu,questionAnswering:Uu})}(e);const t=Al(e),r=(e,t)=>{const r=Lc(t,e.documentId);return-1!==r&&t[r].expanded};return{...t,get state(){const t=e.state;return{questions:t.search.response.questionAnswer.relatedQuestions.map((e=>({question:e.question,answer:e.answerSnippet,documentId:e.documentId,expanded:r(e,t.questionAnswering.relatedQuestions)})))}},expand(t){e.dispatch(Ep(t)),e.dispatch(_c(t))},collapse(t){e.dispatch(Ap(t)),e.dispatch($c(t))}}}function kp(e){return e.addReducers({advancedSearchQueries:Au}),{updateAdvancedSearchQueries:vr,registerAdvancedSearchQueries:br}}function Pp(e){return e.addReducers({categoryFacetSet:Iu}),{deselectAllCategoryFacetValues:qa,registerCategoryFacet:Oa,toggleSelectCategoryFacetValue:Ca,updateCategoryFacetNumberOfValues:Ia,updateCategoryFacetSortCriterion:xa}}function Tp(e){return e.addReducers({facetSet:vu}),{deselectAllFacetValues:wo,registerFacet:vo,toggleSelectFacetValue:bo,updateFacetIsFieldExpanded:Co,updateFacetNumberOfValues:Oo,updateFacetSortCriterion:So,updateFreezeCurrentValues:qo}}function Vp(e){return e.addReducers({configuration:yu}),{disableAnalytics:or,enableAnalytics:sr,setOriginLevel2:cr,setOriginLevel3:ur,updateAnalyticsConfiguration:ar,updateBasicConfiguration:nr}}function Mp(e){return e.addReducers({configuration:yu,pipeline:Du,searchHub:_u}),{updateSearchConfiguration:ir}}function Dp(e){return e.addReducers({context:Tu}),{addContext:Er,removeContext:Ar,setContext:Rr}}function _p(e){return e.addReducers({debug:$u}),{disableDebug:kr,enableDebug:jr}}function $p(e){return e.addReducers({dateFacetSet:Ou}),{deselectAllDateFacetValues:Yo,registerDateFacet:Uo,toggleSelectDateFacetValue:Qo,updateDateFacetSortCriterion:Bo,updateDateFacetValues:Ho}}function Lp(e){return e.addReducers({didYouMean:Vu,query:Eu}),{applyDidYouMeanCorrection:_r,disableDidYouMean:Dr,enableDidYouMean:Mr}}function Np(e){return e.addReducers({fields:Mu}),{registerFieldsToInclude:ys}}function zp(e){return e.addReducers({history:Qu,facetOrder:Cu}),{back:gr,forward:yr}}function Up(e){return e.addReducers({numericFacetSet:qu}),{deselectAllNumericFacetValues:fs,registerNumericFacet:cs,toggleSelectNumericFacetValue:us,updateNumericFacetSortCriterion:ds,updateNumericFacetValues:ls}}function Qp(e){return e.addReducers({pagination:mu}),{nextPage:Zs,previousPage:Xs,registerNumberOfResults:Ys,registerPage:Js,updateNumberOfResults:Ws,updatePage:Ks}}function Hp(e){return e.addReducers({pipeline:Du}),{setPipeline:ac}}function Bp(e){return e.addReducers({query:Eu}),{updateQuery:Ni}}function Yp(e){return e.addReducers({querySet:Fu}),{registerQuerySetQuery:wc,updateQuerySetQuery:Sc}}function Wp(e){return e.addReducers({querySuggest:ku}),{clearQuerySuggest:xc,fetchQuerySuggestions:Rc,registerQuerySuggest:Cc,selectQuerySuggestion:Ic}}function Jp(e){return e.addReducers({redirection:ju}),{checkForRedirection:Xc}}function Kp(e){return e.addReducers({search:wu}),{executeSearch:ia,fetchMoreResults:aa}}function Zp(e){return e.addReducers({searchHub:_u}),{setSearchHub:nu}}function Xp(e){return e.addReducers({sortCriteria:Pu}),{registerSortCriterion:lu,updateSortCriterion:du}}function Gp(e){return e.addReducers({}),{deselectAllFacets:Ta}}const eh=new bt({priority:new Ct({required:!1,default:0,min:0}),fields:new kt({required:!1,each:new Et({required:!0,emptyAllowed:!1})})});function th(e){!function(e){e.addReducers({fields:Mu})}(e);const t=[];return{registerTemplates(...r){const n=[];try{(e=>{e.forEach((e=>{if(eh.validate(e,"Check the arguments of registerTemplates"),!e.conditions.every((e=>e instanceof Function)))throw new vt("Each result template conditions should be a function that takes a result as an argument and returns a boolean")}))})(r)}catch(t){return void e.logger.error(t,"Result template manager error")}r.forEach((e=>{const r={...e,priority:e.priority||0,fields:e.fields||[]};t.push(r),n.push(...r.fields)})),t.sort(((e,t)=>t.priority-e.priority)),n.length&&e.dispatch(ys(n))},selectTemplate(e){const r=t.find((t=>t.conditions.every((t=>t(e)))));return r?r.content:null}}}const rh=(e,t)=>t in e?e[t]:t in e.raw?e.raw[t]:null,nh=e=>t=>e.every((e=>void 0!==t.raw[e])),ih=e=>t=>e.every((e=>void 0===t.raw[e])),ah=(e,t)=>r=>{const n=sh(e,r);return t.some((e=>n.some((t=>(""+t).toLowerCase()===e.toLowerCase()))))},oh=(e,t)=>r=>{const n=sh(e,r);return t.every((e=>n.every((t=>(""+t).toLowerCase()!==e.toLowerCase()))))},sh=(e,t)=>{const r=t.raw[e];return Os(r)?r:[r]};var ch;function uh(e){return e.addReducers({}),{logClearBreadcrumbs:Cf,logInterfaceLoad:Ol,logSearchFromLink:ql,logOmniboxFromLink:Il,logInterfaceChange:Cl,logDidYouMeanClick:$i,logCategoryFacetBreadcrumb:If,logFacetBreadcrumb:oo,logFacetClearAll:no,logFacetDeselect:ao,logFacetSelect:io,logFacetShowLess:eo,logFacetShowMore:Ga,logFacetUpdateSort:ro,logDateFacetBreadcrumb:Ef,logNumericFacetBreadcrumb:Rf,logNavigateBackward:Vd,logNavigateForward:Td,logPageNext:Ud,logPageNumber:zd,logPagePrevious:Qd,logPagerResize:Nd,logSearchboxSubmit:nf,logQuerySuggestionClick:uf,logResultsSort:yf,logDislikeSmartSnippet:Rp,logLikeSmartSnippet:xp,logExpandSmartSnippet:qp,logCollapseSmartSnippet:Ip,logExpandSmartSnippetSuggestion:Ep,logCollapseSmartSnippetSuggestion:Ap}}function lh(e){return e.addReducers({}),{logDocumentOpen:Gd}}function dh(e){return e.addReducers({}),{logSearchEvent:bl,logClickEvent:wl,logCustomEvent:Sl}}function fh(e){const t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map((t=>{const n=t.trim().split(" "),i=n[0].toLowerCase(),a=n[1]&&n[1].toLowerCase();if(n.length>2)throw r;if(""===i)throw r;if(!function(e){return void 0===e||e===zi.Ascending||e===zi.Descending}(a))throw new Error(`Wrong criterion sort order "${a}" in expression "${e}". Order should either be "${zi.Ascending}" or "${zi.Descending}"`);return function(e){const{by:t,order:r}=e;switch(t){case Ui.Relevancy:return Hi();case Ui.QRE:return Wi();case Ui.NoSort:return Ji();case Ui.Date:if(!r)throw new Error('"order" should be specified when "by" value is "date"');return Bi(r);default:if(!r)throw new Error(`"order" should be specified when "by" value is "field" for field "${t}"`);return Yi(t,r)}}({by:i,order:a})}))}function ph(e={}){return{configuration:Cr(),advancedSearchQueries:{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,defaultFilters:{cq:"",aq:""}},facetSet:{},dateFacetSet:{},numericFacetSet:{},categoryFacetSet:{},facetSearchSet:{},categoryFacetSearchSet:{},facetOptions:{freezeFacetOrder:!1},pagination:{firstResult:0,numberOfResults:10,totalCountFiltered:0},query:{q:"",enableQuerySyntax:!1},querySet:{},querySuggest:{},redirection:{redirectTo:null},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[]},sortCriteria:Zi(),context:{contextValues:{}},didYouMean:{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:{correctedQuery:"",wordCorrections:[],originalQuery:""},originalQuery:""},fields:{fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"]},history:gu(Xi()),pipeline:"default",facetOrder:[],searchHub:"default",debug:!1,resultPreview:{uniqueId:"",content:"",isLoading:!1},version:"unit-testing-version",folding:{enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},triggers:{redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""},questionAnswering:{liked:!1,disliked:!1,expanded:!1,relatedQuestions:[]},...e}}!function(e){e.getResultProperty=rh,e.fieldsMustBeDefined=nh,e.fieldsMustNotBeDefined=ih,e.fieldMustMatch=ah,e.fieldMustNotMatch=oh}(ch||(ch={}));var hh,gh,yh=Function.prototype,mh=Object.prototype,vh=yh.toString,bh=mh.hasOwnProperty,wh=vh.call(Object),Sh=mh.toString,Oh=(hh=Object.getPrototypeOf,gh=Object,function(e){return hh(gh(e))});var Ch,qh=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Sh.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Oh(e);if(null===t)return!0;var r=bh.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&vh.call(r)==wh},Ih=Pe(ce),xh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function r(){var e=[],r=[];return{getState:function(){return Ah(t)?t(e):t},getActions:function(){return e},dispatch:function(t){if(!(0,Rh.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(t));e.push(t);for(var n=0;n<r.length;n++)r[n]();return t},clearActions:function(){e=[]},subscribe:function(e){return Ah(e)&&r.push(e),function(){var t=r.indexOf(e);t<0||r.splice(t,1)}},replaceReducer:function(e){if(!Ah(e))throw new Error("Expected the nextReducer to be a function.")}}}var n=Ih.applyMiddleware.apply(void 0,Eh(e))(r);return n()}},Rh=(Ch=qh)&&Ch.__esModule?Ch:{default:Ch};function Eh(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var Ah=function(e){return"function"==typeof e};function Fh(e={}){return{configuration:Cr(),advancedSearchQueries:{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,defaultFilters:{cq:"",aq:""}},context:{contextValues:{}},fields:{fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"]},searchHub:"default",pipeline:"default",recommendation:{duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""},debug:!1,version:"unit-testing-version",...e}}function jh(e={}){return{configuration:Cr(),context:{contextValues:{}},searchHub:"default",productRecommendations:{id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0},version:"unit-testing-version",...e}}function kh(e){return new Vt({logger:Zu({level:"silent"}),preprocessRequest:pl,postprocessSearchResponseMiddleware:Ut,postprocessFacetSearchResponseMiddleware:Qt,postprocessQuerySuggestResponseMiddleware:Ht,...e})}function Ph(e={},t){const r=Zu({level:"silent"}),n=Th(r)(e.state||t()),i=()=>{};return{store:n,state:t(),subscribe:jest.fn((()=>i)),get dispatch(){return n.dispatch},get actions(){return n.getActions()},findAsyncAction(e){const t=this.actions.find((t=>t.type===e.type));return function(e){return!!e&&"meta"in e}(t)?t:void 0},logger:r,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...e}}const Th=e=>xh([lr(e),Bu,he.withExtraArgument({searchAPIClient:kh({logger:e}),validatePayload:Jt,logger:e}),...Ce(),dr(e)]);function Vh(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}var Mh=Object.freeze({__proto__:null,buildMockSearchAppEngine:function(e={}){return{...Ph(e,ph),executeFirstSearch:jest.fn()}},buildMockRecommendationAppEngine:function(e={}){return Ph(e,Fh)},buildMockProductRecommendationsAppEngine:function(e={}){return Ph(e,jh)},createMockState:ph,buildMockResult:function(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:Vh(),...e}},buildMockRaw:Vh});export{hf as HighlightUtils,ch as ResultTemplatesHelpers,Ui as SortBy,zi as SortOrder,Mh as TestUtils,Tr as VERSION,ui as baseFacetResponseSelector,Af as buildBreadcrumbManager,id as buildCategoryFacet,Dl as buildContext,Al as buildController,Qi as buildCriterionExpression,Od as buildDateFacet,Pd as buildDateFilter,Mo as buildDateRange,Bi as buildDateSortCriterion,_l as buildDidYouMean,Op as buildExecuteTrigger,ud as buildFacet,Of as buildFacetManager,Yi as buildFieldSortCriterion,gp as buildFoldedResultList,Md as buildHistoryManager,ef as buildInteractiveResult,Ji as buildNoSortCriterion,Cp as buildNotifyTrigger,Ad as buildNumericFacet,jd as buildNumericFilter,Ed as buildNumericRange,Yd as buildPager,Wd as buildQueryError,Wi as buildQueryRankingExpressionSortCriterion,Kd as buildQuerySummary,Sp as buildQueryTrigger,pp as buildQuickview,wp as buildRedirectionTrigger,Ml as buildRelevanceInspector,Hi as buildRelevanceSortCriterion,Xd as buildResultList,th as buildResultTemplatesManager,rf as buildResultsPerPage,gf as buildSearchBox,El as buildSearchEngine,Pf as buildSearchParameterManager,Yf as buildSearchParameterSerializer,Jd as buildSearchStatus,Fp as buildSmartSnippet,jp as buildSmartSnippetQuestionsList,vf as buildSort,jf as buildStandaloneSearchBox,Sf as buildTab,cp as buildUrlManager,Ie as createAction,Fe as createAsyncThunk,xe as createReducer,_d as currentPageSelector,Ld as currentPagesSelector,li as facetRequestSelector,fi as facetResponseSelectedValuesSelector,di as facetResponseSelector,ml as getSampleSearchEngineConfiguration,kp as loadAdvancedSearchQueryActions,Gp as loadBreadcrumbActions,Pp as loadCategoryFacetSetActions,lh as loadClickAnalyticsActions,Vp as loadConfigurationActions,Dp as loadContextActions,$p as loadDateFacetSetActions,_p as loadDebugActions,Lp as loadDidYouMeanActions,Tp as loadFacetSetActions,Np as loadFieldActions,dh as loadGenericAnalyticsActions,zp as loadHistoryActions,Up as loadNumericFacetSetActions,Qp as loadPaginationActions,Hp as loadPipelineActions,Bp as loadQueryActions,Yp as loadQuerySetActions,Wp as loadQuerySuggestActions,Jp as loadRedirectionActions,Kp as loadSearchActions,uh as loadSearchAnalyticsActions,Mp as loadSearchConfigurationActions,Zp as loadSearchHubActions,Xp as loadSortCriteriaActions,$d as maxPageSelector,fh as parseCriterionExpression,pt as platformUrl};
//# sourceMappingURL=headless.esm.js.map
